import{aW as ba,w as a,j as e,a3 as Dt,c as oo,m as Ne,aa as xe,ai as _e,aX as Do,aY as No,aZ as Po,a_ as ao,E as Xt,D as it,q as ul,S as pt,a7 as x,a$ as bl,x as $o,a as gl,B as ee,b0 as Mo,b1 as st,ay as Pl,b2 as no,f as $l,az as W,b3 as Vo,$ as $t,b4 as Ro,ah as xo,b5 as Cl,b6 as fa,ao as Zt,ar as Hl,I as St,aD as Yt,U as Vt,aI as Wo,b7 as Rt,b8 as ya,b9 as ha,ba as ga,a0 as Ot,bb as Ca,bc as va,ae as xa,bd as pl,aK as wa,be as Bo,a8 as O,bf as Sa,bg as Lo,aT as Ho,aG as Oe,aH as ne,aO as It,aB as he,ac as Xe,aE as Qe,bh as _l,bi as Ia,bj as ja,bk as Ta,bl as Ml,bm as Wt,bn as zo,bo as ka,bp as Aa,bq as Fa,br as Ea,bs as Xl,W as Da,bt as Na,aw as Yo,ad as eo,bu as Oo,bv as Pa,bw as $a,bx as Ma,by as Va,bz as Ra,bA as Wa,bB as Ba,bC as La,bD as Ha,bE as za,bF as Ya,bG as Oa,bH as Qa,bI as Qo,l as at,bJ as Uo,a9 as Te,G as qo,as as zl,aM as Jo,a4 as kl,bK as Vl,bL as Ko,aP as Go,aA as Al,aN as Ua,bM as Fl,bN as qa,bO as Ja,bP as Ka,bQ as Ga,bR as Za,bS as _a,bT as Xa,bU as en,bV as tn,bW as ln,bX as Yl,ap as Zo,bY as on,bZ as an,z as _o,b_ as nn,aq as Ol,b$ as rn,R as sn}from"./vendor-BlYRANeV.js";import{j as Xo,k as pn,l as ht,n as cn,r as dn,o as mn,p as El,q as ro,S as ea,d as fl,i as un,t as ta,v as dl,g as yl,w as Rl,x as Qt,y as yt,z as so,A as bn,C as io,D as la,E as Ie,F as jt,G as _t,H as fn,J as wt,K as Pt,M as oa,N as zt,O as Dl,P as yn,B as to,I as hn,Q as gn,T as Cn,U as vn,V as xn,W as jl,X as We,Y as wn,Z as Sn,_ as In,$ as jn}from"./index-BCqpSD-Y.js";import{v as Mt,u as Tn}from"./config-De6rmCc8.js";const aa=new Map;function Wl(l){return aa.get(l)}function po(l,n){return aa.set(l,n)}function cl(l,n=!0){var r,s;let t=null,o=null;for(const i of l){if(i.type==="start"||i.type==="end")continue;let c={action:{...i.config}};if(i.type==="condition"){const p=cl(((r=i.children.find(y=>y.title==="成功"))==null?void 0:r.children)||[],!0),b=cl(((s=i.children.find(y=>y.title==="失败"))==null?void 0:s.children)||[],!1),g=l.slice(l.indexOf(i)+1).filter(y=>y.type!=="end");if(c={success:p,fail:b},!o)t=c;else if(n)if(!o.next)o.next=c;else{let y=o.next;for(;y.next;)y=y.next;y.next=c}else if(!o.fail)o.fail=c;else{let y=o.fail;for(;y.next;)y=y.next;y.next=c}if(o=c,g.length>0){let y=cl(g,!0);if(!o.success)o.success=y;else{let m=o.success;for(;m.next;)m=m.next;for(;y.action;)m.next={action:y.action},m=m.next,y=y.next||{}}let d=cl(g,!0);if(!o.fail)o.fail=d;else{let m=o.fail;for(;m.next;)m=m.next;for(;d.action;)m.next={action:d.action},m=m.next,d=d.next||{}}}}else if(!o)t=o=c;else if(n)if(!o.next)o.next=c;else{let p=o.next;for(;p.next;)p=p.next;p.next=c}else if(!o.next)o.next=c;else{let p=o.next;for(;p.next;)p=p.next;p.next=c}}return t}function gt(l=[],n){const t=cl(l);t!=null&&t.action&&ve(t,n)}const kn=(l=[],n={})=>{const t=pn(l,n);return!(l!=null&&l.length)&&(Array.isArray(n)||typeof n=="string"||typeof n=="number"||typeof n=="boolean")?n:(n&&Object.keys(n).forEach(o=>{o&&typeof n[o]<"u"&&n[o]!=null&&(t[o]=n[o])}),Xo(t))};async function na({action:l,next:n},t={}){var r;const o=Wl(l.target);if(!o){sessionStorage.setItem("mars-event-flow-wait","1"),Number(sessionStorage.getItem("mars-event-flow-wait"))<10?setTimeout(()=>{na({action:l,next:n},t)},100):console.error("组件加载超时，请检查组件是否存在");return}try{const s=await((r=o==null?void 0:o[l.method])==null?void 0:r.call(o,{...t}));typeof s=="boolean"?ve(s?(n==null?void 0:n.success)||n:n==null?void 0:n.fail,t):setTimeout(()=>{(Array.isArray(s)||typeof s!="object")&&ht(s)?ve((n==null?void 0:n.success)||n,s):ve((n==null?void 0:n.success)||n,Object.assign(t,s||{}))})}catch(s){ve(n==null?void 0:n.fail,t),console.error(`【${l.method}】方法调用失败：`,s)}}async function wo({action:l,next:n},t={},o){const r=Wl(l.target);o==="close"&&r.close({...t}),o==="open"&&await r.open({...t}),ve(n,t)}const An=({action:l,next:n},t)=>{var o,r;(r=(o=window.$modal)[l.type])==null||r.call(o,{title:l.title,content:l.content,okText:l.okText,cancelText:l.cancelText,onOk:()=>{ve((n==null?void 0:n.success)||n,t)},onCancel:()=>{ve(n==null?void 0:n.fail,t)}})},Fn=({action:l,next:n},t)=>{window.$message.open({type:l.type,content:l.content,duration:l.duration}).then(()=>{ve(n,t)})},En=({action:l,next:n},t)=>{window.$notification.open({type:l.type,message:l.message,description:l.description,placement:l.placement,duration:l.duration}),ve(n,t)},Dn=async({action:l,next:n},t)=>{const o=await cn(l,t);o.code==="00000"?ve((n==null?void 0:n.success)||n,o.data):ve(n==null?void 0:n.fail,o.msg)},Nn=async({action:l},n)=>{var o;const t=new URLSearchParams(n);if(l.jumpType==="route"){const{href:r}=window.location;let s="";if(r.includes("microAppsWeb")){let c=r.split("/microAppsWeb")[1]||"";c=c.split("/").slice(0,3).join("/"),s=`${c}/${l.url}${l.url.indexOf("?")>-1?"&":"?"}${t}`}else s=`/page/${l.url}${l.url.indexOf("?")>-1?"&":"?"}${t}`;window.$router.navigate(s)}else if(l.jumpType==="micro")window.microApp||console.warn("跨服务跳转：当前页面不在微应用环境中，无法跳转"),(o=window.microApp)==null||o.dispatch({type:"router",path:l.url,data:n});else if(l.jumpType==="link"){const r=`${l.url}${l.url.indexOf("?")>-1?"&":"?"}${t}`;l.isNewWindow?window.open(r):window.location.href=r}},Pn=({action:l,next:n},t)=>{let o=l.assignmentType==="reset"?void 0:t[l.name];l.assignmentType==="reset"?o=void 0:l.assignmentType==="assignment"&&(l.assignmentWay==="static"?o=l.value:o=t),window.usePageStore.getState().setVariableData({name:l.name,value:o}),ve(n,t)},$n=async({action:l,next:n},t)=>{try{const o=dn(l.content,t||{});await mn(o),ve(n,t)}catch(o){console.log("执行复制行为：",o)}},Mn=async({action:l,next:n},t)=>{setTimeout(()=>{ve(n,t)},l.duration*1e3)},Vn=async({action:l,next:n},t)=>{const o=Wl(l.target);l.showType==="static"?l.showResult==="show"?o.show({...t}):o.hide({...t}):l.expression?o.show({...t}):o.hide({...t}),ve(n,t)},Rn=async({action:l,next:n},t)=>{const o=Wl(l.target);if(l.disableType==="static")l.disableResult?o.disable({...t}):o.enable({...t});else{const s=(l.expression??{}).value;El(s)?o.disable({...t}):o.enable({...t})}ve(n,t)},Wn=async({action:l,next:n},t)=>{const o=await ro.post("https://mars-api.micro-apps.cc/api/robot/sendMessage",{...l,variables:t});o.data.code===0?ve((n==null?void 0:n.success)||n,o.data.data):ve(n==null?void 0:n.fail,o.msg)},Bn=async({action:l,next:n},t)=>{const o=await ro.post("https://mars-api.micro-apps.cc/api/robot/createNode",{...l,variables:t});o.data.code===0?ve((n==null?void 0:n.success)||n,o.data.data):ve(n==null?void 0:n.fail,o.msg)},Ln=async({action:l,next:n},t)=>{const o=El(l.scripts,t);typeof o=="boolean"?ve(o?(n==null?void 0:n.success)||n:n==null?void 0:n.fail,t):ve((n==null?void 0:n.success)||n,o||t)},Hn=async({action:l,next:n},t)=>{const{exportType:o,fileName:r,targetComponent:s}=l,i={fileName:r},{page:c,selectPageItem:p}=window.usePageStore.getState(),b=c[(p==null?void 0:p.id)||""];if(b){const{elementsMap:g}=b,y=g[s];if(y){const{api:d,props:m}=y.config,{type:f}=y,{dataInstance:u,id:h,sourceType:C,dataType:w}=d;if(o==="excel"){if(w?i.dataType=w:["TinyLine","LineChart"].includes(f)?i.dataType=1:f==="MarsTable"?i.dataType=3:i.dataType=2,C==="dt"?i.apiType="DT":i.apiType="THIRD_PARTY",i.exportApiId=h||u,i.dataType===3){const{columns:v}=m,I=v.reduce((j,k)=>(j[k.dataIndex]=k.title,j),{});i.excelTitle=I}const S=await ea.exportExcel(i).catch(v=>{n!=null&&n.fail?ve(n==null?void 0:n.fail,S.msg):window.$message.error(v.toString())});if(S!=null&&S.file){const v=S.file,I=new Blob([v]),j=URL.createObjectURL(I),k=document.createElement("a");k.href=j,k.download=S.fileName||r,k.click()}}else{const S=document.querySelector(`[data-id="${s}"]`);S&&ba.toPng(S).then(v=>{const I=document.createElement("a");I.href=v,I.download=r,I.click()})}}}ve((n==null?void 0:n.success)||n,t)},ve=(l,n={})=>{if(!(!l||!(l!=null&&l.action)))try{const t=kn(l.action.data,n);delete l.action.data,l.action=Xo(l.action);const{actionType:o}=l.action;o==="methods"?na(l,t):o==="showConfirm"?An(l,t):o==="message"?Fn(l,t):o==="notifacation"?En(l,t):["request","download"].includes(o)?Dn(l,t):o==="openModal"?wo(l,t,"open"):o==="closeModal"?wo(l,t,"close"):o==="jumpLink"?Nn(l,t):o==="reloadPage"?window.location.reload():o==="variable"?Pn(l,t):o==="copy"?$n(l,t):o==="setTimeout"?Mn(l,t):o==="visible"?Vn(l,t):o==="disable"?Rn(l,t):o==="sendMessage"?Wn(l,t):o==="createNode"?Bn(l,t):o==="script"?Ln(l,t):o==="exportData"&&Hn(l,t)}catch(t){console.error(`事件流[${l.actionType}执行异常]`,t)}},co=a.createContext(null);function mo(){return e.jsxs("div",{className:"h-screen flex flex-col items-center justify-center",children:[e.jsx("div",{className:"h-32 w-32 animate-spin border-b-2  rounded-full",style:{color:"var(-ant-color-text)"}}),e.jsx("p",{className:"mt-4 text-2xlfont-bold",style:{color:"var(-ant-color-text)"},children:"Loading..."})]})}const zn=Dt.div`
  position: absolute;
  z-index: 999; //Modal为1000，防止遮挡属性中的弹框
  pointer-events: none;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  transition: all 0.2s;
  font-size: 12px;
  top: 0;
  left: 0;
  .tool-bar {
    display: none;
    position: absolute;
    right: -1px;
    bottom: -20px;
    background-color: var(--primary-color);
    color: #fff;
    pointer-events: auto;
    min-width: 120px;
    width: fit-content;
    &.bottomRight {
      top: auto;
      bottom: -25px;
    }
    &.bottomLeft {
      left: -1px;
      top: auto;
      bottom: -24px;
    }
  }
  .node-nav {
    min-width: 48px;
    .node-tip {
      display: block;
      padding-left: 8px;
      padding-right: 8px;
      transition: all 0.2s;
      height: 24px;
      line-height: 24px;
      cursor: pointer;
      &.parent,
      &.child {
        position: absolute;
        background-color: var(--primary-color);
        opacity: 0;
      }

      &.parent {
        left: 0;
        top: 0;
      }
      &.child {
        left: 0;
        top: 0;
      }
    }
    &:hover {
      .parent {
        opacity: 1;
        transform: translateY(-26px);
      }
      .child {
        opacity: 1;
        transform: translateY(27px);
      }
    }
  }
  .actions {
    position: relative;
    padding: 0 12px;
    &::before {
      position: absolute;
      left: 0;
      color: #fff;
      content: "|";
      width: 1px;
    }
  }
  &:hover {
    border: 1px dashed var(--primary-color);
  }
  &.selected {
    border: 1px solid var(--primary-color);
    background-color: rgb(156 105 244 / 10%);
    .tool-bar {
      position: absolute;
      right: -1px;
      top: -25px;
      display: inline-flex;
      background-color: var(--primary-color);
      color: #fff;
      pointer-events: auto;
      &.bottomRight {
        top: auto;
        bottom: -25px;
      }
      &.bottomLeft {
        left: -1px;
        top: auto;
        bottom: -24px;
      }
    }
  }
`,ra=oo()(l=>({targets:null,selectorRef:null,movableRef:null,setTargets:n=>l(()=>({targets:document.getElementById(n)})),setSelectorRef:n=>l(t=>({selectorRef:n})),setMovableRef:n=>l(t=>({movableRef:n}))})),Yn={},On=(l,n)=>{for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(o.elementsMap[l])return o}return null},Qn=l=>{const{selectedElement:n,elementsMap:t,addElement:o,addChildElements:r,removeElements:s,moveElements:i,selectPageItem:c,buildType:p,setDefaultPageConfig:b,addBusinessComponentToElements:g,page:y,menuOutline:d}=window.usePageStore(I=>{var k;const j=I.page[((k=I.selectPageItem)==null?void 0:k.id)||""]||{};return{selectedElement:I.selectedElement,page:I.page,elementsMap:j.elementsMap,menuOutline:I.menuOutline,addElement:I.addElement,addChildElements:I.addChildElements,addBusinessComponentToElements:I.addBusinessComponentToElements,removeElements:I.removeElements,moveElements:I.moveElements,buildType:j.buildType||"web",selectPageItem:I.selectPageItem,setDefaultPageConfig:I.setDefaultPageConfig}}),m=ra(I=>I.setTargets);function f(I,j){var k;for(let T=0;T<I.length;T++){const A=dl(I[T].id.split("_")[0]);r({...t[I[T].id],parentId:j,elements:[],id:A}),((k=I[T].elements)==null?void 0:k.length)>0&&f(I[T].elements,A)}}const u=(I,j)=>{i({componentId:n==null?void 0:n.id,direction:j}),I.stopPropagation()},h=a.useCallback(()=>{m("")},[]);return{delElement:()=>{p!=="topo"&&n&&(s(n.id),h())},copyElement:()=>{p!=="topo"&&fl.set("copy_component",(n==null?void 0:n.id)||(c==null?void 0:c.id))},pastElement:()=>{var D;if(p==="topo")return;const I=fl.get("copy_component"),j=window.$translation;if(!I)return window.$message.info(j("edl.editor.toolbar.noDataCopy"));if(un(d,I)){const{elements:M,elementsMap:q}=y[I],{elements:te,elementsMap:P}=ta(Ne(M),Ne(q));g({elements:te,elementsMap:P});return}const{elementsMap:T,elements:A}=On(I,y)||{};if(!T||!A)return;let F=(D=T[I])==null?void 0:D.parentId;(n==null?void 0:n.id)!==I&&(F=n==null?void 0:n.id);const E=dl(I.split("_")[0]);if(F){const M=yl(A,I);r({...T[I],elements:[],parentId:F,id:E}),f((M==null?void 0:M.elements)||[],E)}else{const M=yl(A,I);o({...T[I],elements:[],id:E}),f((M==null?void 0:M.elements)||[],E)}h()},undo:()=>{const I=Yn[(c==null?void 0:c.id)||""];if(I){const j=I.backoff();j&&b(c,j)}},moveCard:u}},al=window.$translation,Un=a.memo(({name:l})=>{const[n]=a.useState("rightTop"),{delElement:t,copyElement:o,pastElement:r,moveCard:s}=Qn();return e.jsx(zn,{className:"toolbar-box",children:e.jsxs("div",{className:"tool-bar "+n,children:[e.jsx("div",{className:"node-nav",children:e.jsx("span",{className:"node-tip current",children:al(l)})}),e.jsxs(xe,{className:"actions",children:[e.jsx(_e,{title:al("edl.editor.toolbar.moveUp"),children:e.jsx(Do,{onMouseDown:i=>i.stopPropagation(),onClick:i=>s(i,"up")})}),e.jsx(_e,{title:al("edl.editor.toolbar.moveDown"),children:e.jsx(No,{onMouseDown:i=>i.stopPropagation(),onClick:i=>s(i,"down")})}),e.jsx(_e,{title:al("edl.editor.toolbar.copy"),children:e.jsx(Po,{onMouseDown:i=>i.stopPropagation(),onClick:i=>{o(),r(),i.stopPropagation()}})}),e.jsx(_e,{title:al("edl.editor.toolbar.delete"),children:e.jsx(ao,{onClick:i=>{i.stopPropagation(),t()},onMouseDown:i=>i.stopPropagation()})})]})]})})}),qn=Dt.div`
  position: relative;
  &[data-id*="Modal"] {
    position: unset;
  }
  &.active {
    > .toolbar-box {
      > .tool-bar {
        display: inline-flex;
      }
    }

    .toolbar-box {
      border: 1px dashed var(--primary-color);
    }
  }
  &:hover {
    .toolbar-box {
      border: 1px dashed var(--primary-color);
    }
  }
  .apps-component-spin-wrapper {
    height: 100%;
    .ant-spin-container {
      height: 100%;
    }
  }
`,uo=a.memo(({item:l,inner:n})=>{var w,S,v,I,j,k;const t=!!a.useContext(co),{locale:o}=a.useContext(Xt.ConfigContext),[r,s]=a.useState(null),[i,c]=a.useState(),[p,b]=a.useState(!1),{elementsMap:g,mode:y,selectedElement:d,variableData:m,formData:f}=window.usePageStore(it(T=>{var F;const A=T.page[((F=T.selectPageItem)==null?void 0:F.id)||""];return{elementsMap:A.elementsMap,variables:A.variables,variableData:A.variableData,formData:A.formData,selectedElement:T.selectedElement,mode:T.mode}}));a.useEffect(()=>{if(!g[l.id])return;const{remoteUrl:T,remoteCssUrl:A,config:F,type:E}=g[l.id];T?(Rl(l.type,A),b(!0),Qt(T||"",E).then(D=>{Object.keys(D).length&&s(()=>D)}).finally(()=>{b(!1)})):s(window.$Components[l.type]),c(F||{props:{},events:{},api:{}})},[]);const u=T=>{var A,F,E,D,M;if((A=T.props)!=null&&A.formItem){const q=((F=T.props)==null?void 0:F.formItem.rules)||[];q.map(J=>{J.pattern&&(J.pattern=new RegExp(J.pattern))}),T.props.formItem.rules=q,(E=l.parentId)!=null&&E.startsWith("FormList")&&T.props.formItem.name&&(T.props.formItem.name=[l.name,T.props.formItem.name]);const{labelCol:te,wrapperCol:P}=T.props.formItem;yt(te==null?void 0:te.span)&&yt(te==null?void 0:te.offset)&&((D=T.props.formItem)==null||delete D.labelCol),yt(P==null?void 0:P.span)&&yt(P==null?void 0:P.offset)&&((M=T.props.formItem)==null||delete M.wrapperCol)}},h=T=>{Object.keys(T.props||{}).map(A=>{const F=T.props[A];typeof F=="object"&&((F==null?void 0:F.type)==="static"?T.props[A]=F.value:(F==null?void 0:F.type)==="variable"&&(T.props[A]=so(F.value)))})};a.useEffect(()=>{var T;(T=g[l.id])!=null&&T.config&&c(()=>ul(g[l.id].config,A=>{u(A),h(A)}))},[m,f,g]);const C=()=>{const T={},A=(i==null?void 0:i.events)||[];if(!(A!=null&&A.length))return{};const F={};A.forEach(E=>{var D;((D=E.actions)==null?void 0:D.length)>0&&(F[E.eventName]=(F[E.eventName]||[]).concat([E.actions]))});for(const E in F)Object.prototype.hasOwnProperty.call(F,E)&&(T[E]=D=>{F[E].forEach(M=>{gt(M,D)})});return T};if(r){const{zIndex:T,...A}=(i==null?void 0:i.props)||{},{margin:F,marginLeft:E,marginBottom:D,marginRight:M,marginTop:q,...te}=(i==null?void 0:i.style)||{},P={margin:F,marginLeft:E,marginBottom:D,marginRight:M,marginTop:q};return n?(P.position="absolute",P.transform=`translate(${(w=i==null?void 0:i.props)==null?void 0:w.x}px, ${((S=i==null?void 0:i.props)==null?void 0:S.y)||0}px)`,P.zIndex=T,P.width=((v=i==null?void 0:i.style)==null?void 0:v.width)||"",P.height=((I=i==null?void 0:i.style)==null?void 0:I.height)||"fit-content"):(P.width=((j=i==null?void 0:i.style)==null?void 0:j.width)||"",P.height=((k=i==null?void 0:i.style)==null?void 0:k.height)||"fit-content"),e.jsxs(qn,{"data-id":l.id,"data-type":l.type,id:l.id,style:P,className:`${(d==null?void 0:d.id)===l.id?"active materials-item":"materials-item"}`,children:[y==="edit"&&!t&&e.jsx(Un,{name:(A==null?void 0:A.name)||l.name}),e.jsx(pt,{wrapperClassName:"apps-component-spin-wrapper",size:"large",spinning:p,children:e.jsx(a.Suspense,{fallback:e.jsx(mo,{}),children:e.jsx(r,{locale:o,className:"apps-component",id:l.id,type:l.type,config:{...i,props:A||{},style:{...te||{},width:"100%",height:"100%"}},bigScreenElements:l.bigScreenElements||{},elements:l.elements||[],...C(),ref:J=>po(l.id,J)})})})]})}return null}),So=a.memo(({elements:l,inner:n})=>e.jsx(e.Fragment,{children:l.filter(t=>t).map((t,o)=>e.jsx(uo,{inner:n,item:t},t.id))})),bp=a.memo(()=>{window.AppsRender=window.AppsRender||So;const{config:l,elements:n,freeEdit:t}=window.usePageStore(it(o=>{var c,p;const{selectPageItem:r,page:s}=o,i=s[(r==null?void 0:r.id)||""]||{};return{config:i.config||{},elements:i.elements||[],freeEdit:(p=(c=i.config)==null?void 0:c.props)==null?void 0:p.freeEdit}}));return a.useEffect(()=>{var o;(o=l.events)==null||o.forEach(r=>{var s;((s=r.actions)==null?void 0:s.length)>0&&gt(r.actions,{})})},[]),e.jsx(So,{inner:t,elements:n||[]})}),Io=window.$translation;function Jn(){const l=!!a.useContext(co);return e.jsx(e.Fragment,{children:e.jsx(x.Item,{label:Io("edl.component.componentSchema.iconSet"),tooltip:Io("edl.component.componentSchema.iconSet"),name:["icon"],children:e.jsx(bl,{disabled:l,allowClear:!1})})})}const Kn=window.$translation,fp={attrs:[{key:"PageSet",type:"Title",label:"edl.propertyConfig.editorPage.title"},{key:"PageName",type:"ColorPicker",label:"edl.propertyConfig.editorPage.backgroundColor",name:"theme"},{key:"isFullscreen",type:"Switch",label:"edl.propertyConfig.editorPage.fullScreen",name:"isFullscreen"},{key:"freeEdit",type:"Switch",label:"edl.propertyConfig.editorPage.freeEdit",name:"freeEdit"},{key:"iconSet",type:"function",label:"edl.component.componentSchema.iconSet",name:"icon",render(){return e.jsx(Jn,{})}}],config:{props:{x:0,y:0,theme:"#00000030",isFullscreen:!1,freeEdit:!1,icon:""},style:{color:"#000",backgroundColor:"#ffffff20",padding:"0px",width:"100%",height:"100%"},events:[],api:{sourceType:"json",id:"",source:{},sourceField:""}},events:[{value:"onLoad",name:Kn("edl.eventConfig.initEvent")}]},sa=oo()(l=>({selectedElement:void 0,page:{pageId:0,pageName:"",remark:"",canvasWidth:1440,canvasHeight:900,scale:1,preview_img:"",buildType:"web",config:{props:{},style:{},scopeCss:"",scopeStyle:{},events:[],api:{sourceType:"json",id:"",source:{},sourceDataType:"string",sourceField:"",dataModel:"",dataInstance:"",isRealTime:!1,dataType:""}},events:[],elements:[],elementsMap:{},variables:[],variableData:{},formData:{}},setSelectedElement(n){l(ul(t=>{t.selectedElement=n}))},savePageInfo:n=>l(ul(t=>{const o=t.page;o&&(n.type==="props"?o.config.props={...o.config.props,...n.props}:n.type==="style"?(o.config.scopeCss=n.scopeCss,o.config.scopeStyle=n.scopeStyle,o.config.style={...o.config.style,...n.style}):n.type==="events"?o.config.events=n.events?[...o.config.events,...n.events]:[]:n.type==="api"?o.config.api=n.api:t.page[t.selectPageItem.id]=Object.assign(t.page[t.selectPageItem.id],n))}))})),Gn=Dt.div`
  position: absolute;
  z-index: 999; //Modal为1000，防止遮挡属性中的弹框
  pointer-events: none;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  transition: all 0.2s;
  font-size: 12px;
  top: 0;
  left: 0;
  .tool-bar {
    display: none;
    position: absolute;
    right: -1px;
    bottom: -20px;
    background-color: var(--primary-color);
    color: #fff;
    pointer-events: auto;
    min-width: 120px;
    width: fit-content;
    &.bottomRight {
      top: auto;
      bottom: -25px;
    }
    &.bottomLeft {
      left: -1px;
      top: auto;
      bottom: -24px;
    }
  }
  .node-nav {
    min-width: 48px;
    .node-tip {
      display: block;
      padding-left: 8px;
      padding-right: 8px;
      transition: all 0.2s;
      height: 24px;
      line-height: 24px;
      cursor: pointer;
      &.parent,
      &.child {
        position: absolute;
        background-color: var(--primary-color);
        opacity: 0;
      }

      &.parent {
        left: 0;
        top: 0;
      }
      &.child {
        left: 0;
        top: 0;
      }
    }
    &:hover {
      .parent {
        opacity: 1;
        transform: translateY(-26px);
      }
      .child {
        opacity: 1;
        transform: translateY(27px);
      }
    }
  }
  .actions {
    position: relative;
    padding: 0 12px;
    &::before {
      position: absolute;
      left: 0;
      color: #fff;
      content: "|";
      width: 1px;
    }
  }
  &:hover {
    border: 1px dashed var(--primary-color);
  }
  &.selected {
    border: 1px solid var(--primary-color);
    background-color: rgb(156 105 244 / 10%);
    .tool-bar {
      position: absolute;
      right: -1px;
      top: -25px;
      display: inline-flex;
      background-color: var(--primary-color);
      color: #fff;
      pointer-events: auto;
      &.bottomRight {
        top: auto;
        bottom: -25px;
      }
      &.bottomLeft {
        left: -1px;
        top: auto;
        bottom: -24px;
      }
    }
  }
`,Zn=()=>{const{selectedElement:l,elements:n,elementsMap:t,addElement:o,addChildElements:r,removeElements:s,moveElements:i}=window.usePageStore(f=>{var h;const u=f.page[((h=f.selectPageItem)==null?void 0:h.id)||""]||{};return{selectedElement:f.selectedElement,elements:u.elements,elementsMap:u.elementsMap,addElement:f.addElement,addChildElements:f.addChildElements,removeElements:f.removeElements,moveElements:f.moveElements}}),c=ra(f=>f.setTargets),p=(f,u)=>{i({componentId:l==null?void 0:l.id,direction:u}),f.stopPropagation()};function b(f,u){var h;for(let C=0;C<f.length;C++){const w=dl(f[C].id.split("-")[0]);r({...t[f[C].id],parentId:u,elements:[],id:w}),((h=f[C].elements)==null?void 0:h.length)>0&&b(f[C].elements,w)}}const g=a.useCallback(()=>{c("")},[]);return{delElement:()=>{console.log("el"),l&&(s(l.id),g())},copyElement:()=>{fl.set("copy_component",l==null?void 0:l.id)},pastElement:()=>{var C;const f=window.$translation,u=fl.get("copy_component");if(!u)return window.$message.info(f("edl.editor.toolbar.noDataCopy"));let h=(C=t[u])==null?void 0:C.parentId;if((l==null?void 0:l.id)!==u&&(h=l==null?void 0:l.id),h){const w=yl(n,u),S=dl(u.split("-")[0]);r({...t[u],elements:[],parentId:h,id:S}),b((w==null?void 0:w.elements)||[],S)}else{const w=yl(n,u),S=dl(u.split("-")[0]);o({...t[u],elements:[],id:S}),b((w==null?void 0:w.elements)||[],S)}g()},moveCard:p}},nl=window.$translation,_n=a.memo(({name:l})=>{const[n]=a.useState("rightTop"),{delElement:t,copyElement:o,pastElement:r,moveCard:s}=Zn();return e.jsx(Gn,{className:"toolbar-box",children:e.jsxs("div",{className:"tool-bar "+n,children:[e.jsx("div",{className:"node-nav",children:e.jsx("span",{className:"node-tip current",children:nl(l)})}),e.jsxs(xe,{className:"actions",children:[e.jsx(_e,{title:nl("edl.editor.toolbar.moveUp"),children:e.jsx(Do,{onMouseDown:i=>i.stopPropagation(),onClick:i=>s(i,"up")})}),e.jsx(_e,{title:nl("edl.editor.toolbar.moveDown"),children:e.jsx(No,{onMouseDown:i=>i.stopPropagation(),onClick:i=>s(i,"down")})}),e.jsx(_e,{title:nl("edl.editor.toolbar.copy"),children:e.jsx(Po,{onMouseDown:i=>i.stopPropagation(),onClick:i=>{o(),r(),i.stopPropagation()}})}),e.jsx(_e,{title:nl("edl.editor.toolbar.delete"),children:e.jsx(ao,{onClick:i=>{i.stopPropagation(),t()},onMouseDown:i=>i.stopPropagation()})})]})]})})}),Xn=Dt.div`
  position: absolute;
  &[data-id*="Modal"] {
    position: unset;
  }
  &.active {
    > .toolbar-box {
      > .tool-bar {
        display: inline-flex;
      }
    }

    .toolbar-box {
      border: 1px dashed var(--primary-color);
    }
  }
  &:hover {
    .toolbar-box {
      border: 1px dashed var(--primary-color);
    }
  }
`,er=a.memo(({item:l})=>{var m,f,u,h;const{locale:n}=a.useContext(Xt.ConfigContext),[t,o]=a.useState(null),[r,s]=a.useState(),{elementsMap:i,variableData:c,formData:p}=window.usePageStore(it(C=>{var S;const w=C.page[((S=C.selectPageItem)==null?void 0:S.id)||""];return{elementsMap:w.elementsMap,variables:w.variables,variableData:w.variableData,formData:w.formData,selectedElement:C.selectedElement}})),{selectedElement:b}=sa(C=>({selectedElement:C.selectedElement}));a.useEffect(()=>{if(!i[l.id])return;const{remoteUrl:C,remoteCssUrl:w,config:S,type:v}=i[l.id];C?(Rl(l.type,w),Qt(C||"",v).then(I=>{Object.keys(I).length&&o(()=>I)})):o(window.$Components[l.type]),s(S||{props:{},events:{},api:{}})},[]);const g=C=>{var w,S,v,I,j;if((w=C.props)!=null&&w.formItem){const k=((S=C.props)==null?void 0:S.formItem.rules)||[];k.map(F=>{F.pattern&&(F.pattern=new RegExp(F.pattern))}),C.props.formItem.rules=k,(v=l.parentId)!=null&&v.startsWith("FormList")&&C.props.formItem.name&&(C.props.formItem.name=[l.name,C.props.formItem.name]);const{labelCol:T,wrapperCol:A}=C.props.formItem;yt(T==null?void 0:T.span)&&yt(T==null?void 0:T.offset)&&((I=C.props.formItem)==null||delete I.labelCol),yt(A==null?void 0:A.span)&&yt(A==null?void 0:A.offset)&&((j=C.props.formItem)==null||delete j.wrapperCol)}},y=C=>{Object.keys(C.props||{}).map(w=>{const S=C.props[w];typeof S=="object"&&((S==null?void 0:S.type)==="static"?C.props[w]=S.value:(S==null?void 0:S.type)==="variable"&&(C.props[w]=so(S.value)))})};a.useEffect(()=>{var C;(C=i[l.id])!=null&&C.config&&s(()=>ul(i[l.id].config,w=>{g(w),y(w)}))},[c,p,i]);const d=()=>{const C={},w=(r==null?void 0:r.events)||[];if(!(w!=null&&w.length))return{};const S={};w.forEach(v=>{var I;((I=v.actions)==null?void 0:I.length)>0&&(S[v.eventName]=(S[v.eventName]||[]).concat([v.actions]))});for(const v in S)Object.prototype.hasOwnProperty.call(S,v)&&(C[v]=I=>{S[v].forEach(j=>{gt(j,I)})});return C};if(t){const{zIndex:C,...w}=(r==null?void 0:r.props)||{},{margin:S,...v}=(r==null?void 0:r.style)||{},I={position:"absolute",transform:`translate(${(m=r==null?void 0:r.props)==null?void 0:m.x}px, ${((f=r==null?void 0:r.props)==null?void 0:f.y)||0}px)`,zIndex:C,width:((u=r==null?void 0:r.style)==null?void 0:u.width)||"fit-content",height:((h=r==null?void 0:r.style)==null?void 0:h.height)||"fit-content",margin:S};return e.jsxs(Xn,{"data-sub-id":l.id,id:l.id,"data-type":l.type,style:{...I},className:`${(b==null?void 0:b.id)===l.id?"active materials-item":"materials-item"}`,children:[e.jsx(_n,{name:l.name}),e.jsx(a.Suspense,{fallback:e.jsx(mo,{}),children:e.jsx(t,{locale:n,className:"apps-component",id:l.id,type:l.type,config:{...r,props:w||{},style:{...v,width:"100%",height:"100%"}},bigScreenElements:l.bigScreenElements||{},elements:l.elements||[],...d(),ref:j=>po(l.id,j)})})]})}return null}),yp=a.memo(({elements:l,inner:n})=>e.jsx(e.Fragment,{children:l.filter(t=>t).map(t=>e.jsx(er,{inner:n,item:t},t.id))})),tr=window.$translation,hp={attrs:[{key:"PageSet",type:"Title",label:"edl.propertyConfig.editorPage.title"},{key:"PageName",type:"ColorPicker",label:"edl.propertyConfig.editorPage.backgroundColor",name:"theme"},{key:"isFullscreen",type:"Switch",label:"edl.propertyConfig.editorPage.fullScreen",name:"isFullscreen"},{key:"freeEdit",type:"Switch",label:"edl.propertyConfig.editorPage.freeEdit",name:"freeEdit"}],config:{props:{x:0,y:0,theme:"#1677ff",isFullscreen:!1,freeEdit:!1},style:{color:"#000",backgroundColor:"#fff",padding:"0px",width:"100%",height:"100%"},scopeCss:"",scopeStyle:{color:"#000",backgroundColor:"#fff",padding:"0px"},events:[],api:{sourceType:"json",id:"",source:{},sourceField:""}},events:[{value:"onLoad",name:tr("edl.eventConfig.initEvent")}]},lr=$o({fileUpload:{method:"post",url:"/file/upload",headers:{"Content-Type":"multipart/form-data"}}},{baseURL:"/microApp",headers:{"Content-Type":"application/json"}});var lo=(l=>(l[l["*"]=0]="*",l[l["image/png,image/jpeg,image/jpg"]=1]="image/png,image/jpeg,image/jpg",l[l["image/gif"]=2]="image/gif",l[l["video/*"]=3]="video/*",l[l["image/*"]=4]="image/*",l[l["image/*,video/*"]=5]="image/*,video/*",l[l["image/jpg,image/jpeg,image/png,image/gif,image/webp,image/svg+xml"]=6]="image/jpg,image/jpeg,image/png,image/gif,image/webp,image/svg+xml",l[l.so=7]="so",l[l["doc,docx,pdf"]=8]="doc,docx,pdf",l[l[".js,.json,.gz,.css"]=9]=".js,.json,.gz,.css",l))(lo||{});const or=()=>{},ar=a.memo(({onChange:l=or,value:n,limitSize:t=500,maxCount:o=1,listType:r,accept:s,showUploadList:i=!0,multiple:c=!1,children:p,floder:b="common"})=>{const{t:g}=gl(),[y,d]=a.useState([]),[m,f]=a.useState(!1);a.useEffect(()=>{n&&(Array.isArray(n)?d(n):typeof n=="string"?d([{uid:1001,name:"",url:n,status:"done"}]):typeof n=="object"&&d([{uid:n.id,name:"",url:n.url,status:"done"}]))},[n]);const u=v=>s&&!s.includes(v.type)?(window.$message.error(g("edl.common.fileNotSupport")),!1):v.size>t*1024**2?(window.$message.error(g("edl.common.fileOverLimited")),!1):!0,h=v=>{const I=(y||[]).filter(j=>j.url!==v.url);d(I),l(o===1?null:I)},C=v=>{f(!0);let I=0;Array.isArray(s)?I=lo[s.join(",")]:I=lo[s],lr.fileUpload({file:v.file},{params:{fileType:I||0,path:b}}).then(j=>{const{name:k,fileUrl:T="",id:A}=j;if(f(!1),T){const F={uid:v.file.uid,name:k,url:T,status:"done"},E=[...y,F];d(E),l({id:A,url:T})}}).catch(()=>{f(!1),window.$message.error(g("edl.common.fdb.fileUploadFailed"))})},w=e.jsx(ee,{icon:m?e.jsx(Mo,{}):e.jsx(st,{}),children:g("edl.common.upload")}),S=p||w;return e.jsx(e.Fragment,{children:e.jsx(Pl,{listType:r,onRemove:h,beforeUpload:u,accept:s,maxCount:o,fileList:y,showUploadList:i,multiple:c,customRequest:C,children:y.length>=o?null:S})})}),Ql=window.$translation;function nr(){return e.jsx(x.Item,{name:"iconFileId",label:Ql("edl.component.compIcon"),tooltip:Ql("edl.component.compIconTips"),children:e.jsx(ar,{listType:"picture",limitSize:10,children:e.jsx(ee,{icon:e.jsx(no,{}),children:Ql("edl.component.compIcon")})})})}const rr=$o({getDictionary:{url:"/tag/getDataDictInfo"}},{baseURL:"/microApp",headers:{"Content-Type":"application/json"},timeout:1e4});function sr(l){const[n,t]=a.useState([]);return $l(async()=>{const o=await rr.getDictionary({code:l});t(o)}),n}const jo=window.$translation;function ir(){const l=sr("componentDevelopLabelBiz");return e.jsx(x.Item,{name:"tags",rules:[{required:!0,message:jo("common.pleaseSelect")}],label:jo("edl.component.compTag"),children:e.jsx(W,{mode:"multiple",maxCount:1,options:l})},"tags")}const Tt=window.$translation;function pr(){const l=x.useFormInstance(),n=x.useWatch("cmptI18nName",l),[t,o]=a.useState(n);return a.useEffect(()=>{o(n)},[n]),e.jsx(x.Item,{name:"cmptI18nName",label:Tt("edl.component.componentName"),rules:[{required:!0,message:Tt("common.pleaseSelect",{addSpaceAfterEn:!0})+Tt("edl.component.componentName",{lowerCase:!0})},{validator:(r,s,i)=>{if(!s){i();return}const{default:c}=s||{};if(!c){i(Tt("common.pleaseInput",{addSpaceAfterEn:!0})+Tt("edl.component.componentName",{lowerCase:!0}));return}Mt(r,c,i)}}],children:e.jsx(Vo,{rules:{default:[{required:!0,message:Tt("common.pleaseInput")},{validator:Mt}],[$t.ENUS]:[{validator:Mt}],[$t.ZHCN]:[{validator:Mt},{type:"string",max:10,min:4,message:Tt("common.length",{min:4,max:10})}]},defaultValues:t,getResult:r=>{Ro.isEmpty(r)&&(r=void 0),l.setFieldValue("cmptI18nName",r),o(r),l.validateFields(["cmptI18nName"])},addBtnFlag:!1,inputProps:{placeholder:Tt("common.pleaseInput",{addSpaceAfterEn:!0})+Tt("edl.component.componentName",{lowerCase:!0}),allowClear:!0}})})}const kt=window.$translation;function cr(){const l=x.useFormInstance(),n=x.useWatch("descriptionI18n",l),[t,o]=a.useState(n);return a.useEffect(()=>{o(n)},[n]),e.jsx(x.Item,{name:"descriptionI18n",label:kt("edl.component.compDesc"),rules:[{required:!0,message:kt("common.pleaseSelect",{addSpaceAfterEn:!0})+kt("edl.component.compDesc",{lowerCase:!0})},{validator:(r,s,i)=>{if(!s){i();return}const{default:c}=s||{};if(!c){i(kt("common.pleaseInput",{addSpaceAfterEn:!0})+kt("edl.component.compDesc",{lowerCase:!0}));return}Mt(r,c,i)}}],children:e.jsx(Vo,{rules:{default:[{required:!0,message:kt("common.pleaseInput")},{validator:Mt}],[$t.ENUS]:[{validator:Mt}],[$t.ZHCN]:[{validator:Mt},{type:"string",max:200,min:4,message:kt("common.length",{min:4,max:200})}]},defaultValues:t,getResult:r=>{Ro.isEmpty(r)&&(r=void 0),l.setFieldValue("descriptionI18n",r),o(r),l.validateFields(["descriptionI18n"])},addBtnFlag:!1,inputType:"textarea",inputProps:{placeholder:kt("common.pleaseInput",{addSpaceAfterEn:!0})+kt("edl.component.compDesc",{lowerCase:!0}),allowClear:!0}})})}const Bt=window.$translation,gp={attrs:[{name:"cmptI18nName",type:"function",render:()=>e.jsx(pr,{},"cmptI18nName")},{type:"Input",label:Bt("edl.component.compEnName"),name:"cmptEnName",props:{disabled:!0,rules:[{required:!0,message:Bt("common.pleaseInput")},{type:"string",max:50,min:4,message:Bt("common.length",{min:4,max:50})},{pattern:/^([A-Z][A-Za-z0-9_]+)$/,message:Bt("edl.component.compEnNameValidation")}]}},{type:"function",label:Bt("edl.component.compTag"),name:"tagIds",render:l=>e.jsx(ir,{},"tagIds")},{type:"function",label:Bt("edl.component.compIcon"),name:"iconFileId",props:{action:"/upload",valuePropName:"iconFileId"},render:l=>e.jsx(nr,{},"iconFileId")},{name:"descriptionI18n",type:"function",render:()=>e.jsx(cr,{},"descriptionI18n")}],config:{props:{cmptName:"",cmptI18nName:void 0,iconFileId:[],cmptEnName:"",description:"",descriptionI18n:void 0,tagIds:[],x:0,y:0},style:{color:"#000",backgroundColor:"#fff",padding:"0px",width:"100%",height:"100%"},scopeCss:"",scopeStyle:{color:"#000",backgroundColor:"#fff",padding:"0px"},events:[],api:{sourceType:"json",id:"",source:{},sourceField:""}},events:[{value:"onLoad",name:Bt("edl.eventConfig.initEvent")}]};function bo(l){const{interceptor:n,app:t={}}=l,{setInterceptor:o,interceptor:r}=window.usePageStore.getState();o(xo(Ne(r),n));const s=[],i={},c=[];return Object.entries(t).forEach(([p,b])=>{const{elements:g=[],elementsMap:y={},variables:d=[]}=b,m=ta(g,y),{variables:f,elementsMap:u}=bn(d,m.elementsMap);s.push(...m.elements),c.push(...f),b.elements=m.elements,b.elementsMap=u,xo(i,u)}),{elements:s,elementsMap:i,variables:c,variableData:{}}}const dr=(l,n)=>{const{addChildElements:t,addBusinessComponentToChildElements:o}=window.usePageStore(r=>({addChildElements:r.addChildElements,addBusinessComponentToChildElements:r.addBusinessComponentToChildElements}));return async(r,s,i)=>{if(r.createType==="componentDevelopSourceCode"){const{detail:c}=r;let p;try{p=JSON.parse(c)}catch{p=[],window.$message.error("组件文件缺失");return}const b=[],g=[];if(p.forEach(h=>{h.type==="text/javascript"?b.push(h.fileUrl):h.type==="text/css"&&g.push(h.fileUrl)}),b.length===0){window.$message.error("组件文件缺失");return}const{config:y,events:d,methods:m=[]}=await Qt(b[0],r.cmptEnName,!0),f=io(r.cmptEnName),u={remoteUrl:b[0],remoteCssUrl:g[0],type:r.cmptEnName,name:r.cmptName,config:{...y,props:{...y.props,x:s,y:i}},events:d,methods:m};t({...u,elements:[],parentId:l,id:f},n)}else{const{detail:c}=r;let p;try{p=JSON.parse(c)}catch{p={}}const{elements:b,elementsMap:g,variableData:y,variables:d}=bo(p);o({parentId:l,elements:b.map(m=>({...m,parentId:l})),elementsMap:g,variableData:y,variables:d},n)}}},mr=(l,n)=>{const t=dr(l,n),{addChildElements:o}=window.usePageStore(r=>({mode:r.mode,addChildElements:r.addChildElements}));return(r,s)=>{const i=s.getClientOffset(),c=document.querySelector(`[data-id="${l}"]`),p=la(c),b=(i==null?void 0:i.x)-p.left,g=(i==null?void 0:i.y)-p.top;if(r.origin==="base"){const{config:y,events:d,methods:m=[]}=window.$Components[r.type+"Config"]||{};o({type:r.type,name:r.name,parentId:l,id:r.id,config:{...y,props:{...y.props,x:b,y:g}},events:d,methods:m},n)}else t(r,b,g)}},Ze=(l,n,t)=>{const o=mr(l,t),[,r]=Cl({accept:"MENU_ITEM",drop(s,i){i.didDrop()||o(s,i)},collect:s=>({isOver:s.isOver(),canDrop:s.canDrop()})});return r},ur="_slots_heo27_1",Tl={slots:ur,"spin-loading":"_spin-loading_heo27_14","ant-spin-container":"_ant-spin-container_heo27_17","test-icon":"_test-icon_heo27_21"},br=({id:l,type:n,config:t,elements:o,onCheckedChange:r},s)=>{var pe,ut,He,qe,Sl,tl,Il;const[i,c]=a.useState({}),[p,b]=a.useState({[t.props.field.pageNum]:1,[t.props.field.pageSize]:t.props.pagination.pageSize}),{setVisible:g,setData:y,loading:d,visible:m,setLoading:f,getDataList:u,data:h}=Ie(t),[C,w]=a.useState(0),[S,v]=a.useState([]),[I,j]=a.useState([]),k=window.AppsRender,{variableData:T,mode:A}=window.usePageStore(V=>{const{page:Be,addChildElements:bt,selectPageItem:et}=V,Ct=Be[(et==null?void 0:et.id)||""]||{};return{mode:V.mode,variableData:Ct.variableData}}),F=a.useMemo(()=>(t.props.field.total&&h.originData&&w(h[t.props.field.total]||0),Array.isArray(h.data)?h.data:Array.isArray(h)?h:[]),[h]);a.useEffect(()=>{b(()=>{const V={[t.props.field.pageNum]:1,[t.props.field.pageSize]:t.props.pagination.pageSize};return u(t.props.hidePager?{}:V),V})},[t.api,t.props.field,((pe=t.api)==null?void 0:pe.sourceType)==="variable"?T:""]);const E=Ze(l);a.useImperativeHandle(s,()=>({startLoading:()=>{f(!0)},stopLoading:()=>{f(!1)},show(){g(!0)},hide(){g(!1)},search:V=>{const Be=fa(V,bt=>ht(bt));b({...p,[t.props.field.pageNum]:1}),c(Be),u({...p,[t.props.field.pageNum]:1,...Be})},reload:()=>{u({...p,...i})},clearData:()=>{y({data:[],originData:{}})},checkSelectedRow:()=>S.length!==0,setSelectedRowKeys:V=>{v(V)},getSelectedRowKeys:()=>S||[],getSelectedRow:()=>I}));let D=null;t.props.selectionType&&(D={type:t.props.selectionType,selectedRowKeys:S,onChange(V,Be){r==null||r(V),v(V),j(Be)}});const M=(V,Be)=>{const bt=t.events.find(et=>et.eventName===V);gt(bt==null?void 0:bt.actions,Be)},q={rowSelection:D,rowKey:t.props.rowKey||"id",bordered:t.props.bordered,size:t.props.size,columns:t.props.columns.map((V,Be)=>{const{dataIndex:bt}=V;return{...V,key:bt||Be,onCell(et,Ct){if(V.onCell)try{return new Function("record","index",`return (${V.onCell})(record,index);`)(et,Ct)}catch(ll){console.error(`列[${V.title}]渲染失败`,ll)}return{}},render(et,Ct,ll){var go;let K=et;if(ht(K)?V.type==="money"?K=jt(et,"currency"):V.type==="number"?K=jt(et):V.type==="date1"?K=_t(et,"YYYY-MM-DD"):V.type==="date2"&&(K=_t(et)):typeof t.props.empty>"u"?K="-":t.props.empty&&(K=t.props.empty),V.render)try{K=new Function("text","record","index",`return (${V.render})(text,record,index);`)(K,Ct,ll)}catch(ce){console.error(`列[${V.title}]渲染失败`,ce),K="解析异常"}if(V.type==="text"){const ce=e.jsx(ee,{type:"link",onClick:()=>M(V.eventName,Ct),children:K.toString()});return V.ellipsis&&V.copyable?e.jsx(_e,{title:K,children:e.jsx(Zt.Paragraph,{copyable:!0,style:{marginBottom:0},children:V.clickable?ce:K.toString()})}):V.ellipsis?e.jsx(_e,{title:K,children:V.clickable?ce:K.toString()}):V.copyable?e.jsx(Zt.Paragraph,{copyable:!0,children:V.clickable?ce:K.toString()}):V.clickable?e.jsx(ee,{type:"link",onClick:()=>M(V.eventName,Ct),children:K.toString()}):K.toString()}return V.type==="multiline"?Array.isArray(K)?K.map(ce=>e.jsxs("div",{children:[e.jsx("span",{children:ce.label}),e.jsx("span",{children:ce.value})]},JSON.stringify(ce))):K.toString():V.type==="status"?Array.isArray(K)?K.map(ce=>e.jsx(Hl,{status:ce.status,text:ce.text},JSON.stringify(ce))):typeof K=="object"?e.jsx(Hl,{status:K.status,text:K.text}):e.jsx(Hl,{status:"success",text:K.toString()}):V.type==="image"?Array.isArray(K)?e.jsx(St.PreviewGroup,{items:K,children:e.jsx(St,{width:30,src:K[0]})}):e.jsx(St,{src:K,width:30}):V.type==="tag"?Array.isArray(K)?K.map(ce=>typeof ce=="object"?e.jsx(Yt,{color:ce.color,children:ce.label},JSON.stringify(ce)):e.jsx(Yt,{color:"green",children:ce},ce)):typeof K=="string"||typeof K=="number"?e.jsx(Yt,{color:"green",children:K}):K==null?void 0:K.toString():V.type==="action"?e.jsx("div",{className:Tl.action,children:(go=V.list)==null?void 0:go.map(ce=>{var Co;let ol="";if(typeof ce.text=="string")ol=ce.text;else if(((Co=ce.text)==null?void 0:Co.type)==="static")ol=ce.text.value;else try{ol=new Function("text","record","index",`return (${ce.text.value})(text,record,index);`)("",Ct,ll)}catch(vo){console.error(`列[${ce.title}]渲染失败`,vo),ol="解析异常"}return e.jsx(ee,{type:"link",size:"small",danger:ce.danger,onClick:()=>M(ce.eventName,Ct),children:ol},ce.eventName)})}):K}}}),dataSource:F,loading:d},te={total:C,current:p[t.props.field.pageNum]||1,pageSize:p[t.props.field.pageSize]||10,showSizeChanger:(ut=t.props.pagination)==null?void 0:ut.showSizeChanger,showQuickJumper:(He=t.props.pagination)==null?void 0:He.showQuickJumper,showTotal:(qe=t.props.pagination)!=null&&qe.showTotal?V=>`共 ${V} 条数据`:void 0,position:(Sl=t.props.pagination)==null?void 0:Sl.position,onChange:(V,Be)=>{b({[t.props.field.pageNum]:V,[t.props.field.pageSize]:Be}),u({[t.props.field.pageNum]:V,[t.props.field.pageSize]:Be})}},P=V=>{const Be=t.events.find(bt=>bt.eventName===V);gt(Be==null?void 0:Be.actions,i)},J=t.props.leftTitle,se=t.props.bulkActionList||[],je=Rt;return a.useEffect(()=>{g(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),m&&e.jsxs(e.Fragment,{children:[J||o!=null&&o.length||se.length?e.jsxs("div",{className:Tl.toolbar,children:[t.props.leftTitle&&e.jsx("div",{className:Tl.title,children:t.props.leftTitle}),e.jsxs("div",{className:Tl.action,ref:E,children:[o!=null&&o.length?e.jsx(k,{elements:o}):A==="edit"&&e.jsx("div",{className:"slots",children:"拖拽子元素到这里，一般用来放表单"}),se==null?void 0:se.map(V=>e.jsx(ee,{type:V.type,danger:V.danger,icon:V.icon?Vt.createElement(je[V.icon]):null,onClick:()=>P(V.eventName),children:V.text},V.eventName))]})]}):null,e.jsx(Wo,{...q,scroll:{x:(tl=t.props.scroll)==null?void 0:tl.x,y:(Il=t.props.scroll)==null?void 0:Il.y},pagination:t.props.hidePager?!1:te})]})},Cp=a.memo(a.forwardRef(br)),fr={zhCn:"zh-cn",en:"en",zhTw:"zh-tw"},yr=location.origin+"/app";function hl({height:l,language:n,value:t,onChange:o}){const r=ya(),s=a.useRef(null),{defaultLanguage:i}=Tn(it(p=>({defaultLanguage:p.defaultLanguage})));function c(p){return r?[{label:"context",kind:r.languages.CompletionItemKind.Function,documentation:"context是一个全局上下文变量",insertText:"context",range:p},{label:"variable",kind:r.languages.CompletionItemKind.Function,documentation:"variable是一个系统变量",insertText:"variable",range:p},{label:"eventParams",kind:r.languages.CompletionItemKind.Function,documentation:"eventParams是事件流参数",insertText:"eventParams",range:p}]:[]}return a.useEffect(()=>{r==null||r.languages.registerCompletionItemProvider("javascript",{provideCompletionItems(p,b){const g=p.getWordUntilPosition(b),y={startLineNumber:b.lineNumber,endLineNumber:b.lineNumber,startColumn:g.startColumn,endColumn:g.endColumn};return{suggestions:c(y)}}})},[r]),ha.config({paths:{vs:`${yr}/vs`},"vs/nls":{availableLanguages:{"*":fr[i]}}}),e.jsx(ga,{height:l||"150px",language:n||"javascript",value:ht(t)?typeof t=="string"?t:JSON.stringify(t,null,2):"",onChange:o,onMount:(p,b)=>{s.current={editor:p,monaco:b}},options:{lineNumbers:"on",minimap:{enabled:!1}}})}const hr="_container_1jni7_1",gr="_leftFn_1jni7_6",Cr="_box_1jni7_23",vr="_content_1jni7_27",xr="_title_1jni7_30",wr="_variable_1jni7_38",At={container:hr,leftFn:gr,box:Cr,content:vr,title:xr,variable:wr},Sr=({onSelect:l},n)=>{const{t}=gl(),[o,r]=a.useState(!1),[s]=x.useForm(),{variables:i,pageName:c,elements:p,elementsMap:b}=window.usePageStore(S=>{var F;const{page:v,selectPageItem:I,menuOutline:j}=S,k=v[(I==null?void 0:I.id)||""]||{},A=((F=fn(j,I==null?void 0:I.id)[0])==null?void 0:F.title)||"";return{variables:k.variables,pageName:A,elements:k.elements,elementsMap:k.elementsMap}}),g=a.useCallback(()=>{const S=[];return Object.keys(b).map(v=>{var I;if(v.startsWith("SearchForm_")||v.startsWith("Form_")||v.startsWith("MarsTable_")){const j=yl(Ne(p),v);(I=j.elements)==null||I.map(k=>{const T=b[k.id].config.props.formItem;T?k.name=t(`${T.label}(${T.name})`):k.name=""}),j.elements&&(j.elements=j.elements.filter(k=>k.name)),j&&S.push(j)}}),S},[b]);function y(S){return S.map(v=>{const{name:I,type:j,defaultValue:k}=v,T={name:I,value:k,elements:[]};return j==="array"?(T.type="Variable",T.id=v.name,T.name=`Array<${v.name}>${v.remark?"("+v.remark+")":""}`):j==="object"?(T.id=v.name,T.name=`${v.name}${v.remark?"("+v.remark+")":""}`,T.type="Variable",T.elements=y(Object.entries(k).map(([A,F])=>({type:Array.isArray(F)?"array":typeof F,id:v.name+"."+A,name:v.name+"."+A,defaultValue:F})))):(T.type="Variable",T.id=v.name,T.name=`${v.name}${v.remark?"("+v.remark+")":""}`),T})}const d=[{name:`${t("edl.variable.page")}【${c}】`,id:"page",elements:[{name:t("edl.variable.pageVariable"),id:"PageVariable",type:"PageVariable",elements:y(i)},...g()]}];a.useImperativeHandle(n,()=>({open(S){s.setFieldValue("expression",S),r(!0)}}));const m=S=>{S==="table"?s.setFieldValue("expression",`function render(text, record, index) {
    return text;
}`):S==="expression"?s.setFieldValue("expression","status === 1 ? '启用' : '禁用'"):S==="function"&&s.setFieldValue("expression",`function run(eventParams) {
    return '';
}`)},f=(S,{node:v})=>{var j,k;if(!v.type)return;const I=s.getFieldValue("expression")??"";if(v.type==="Variable"){s.setFieldValue("expression",`${I} context.variable.${v.id}`.trimStart());return}if(v.type==="PageVariable")s.setFieldValue("expression",`${I} context.variable`);else if(v.type==="EditTable"){const T=(j=b[v.id])==null?void 0:j.config.props.field;T&&s.setFieldValue("expression",`${I} context.${v.parentId}.${T}`.trimStart())}else if(v.type==="Form")s.setFieldValue("expression",`${I}  context.${v.id}`);else{const T=(k=b[v.id])==null?void 0:k.config.props.formItem;s.setFieldValue("expression",`${I} context.${v.parentId}.${T.name}`.trimStart())}},u=S=>{const v=s.getFieldValue("expression")??"";s.setFieldValue("expression",`${v} context.${S}()`.trimStart())},h=()=>{r(!1)},C=()=>{const S=s.getFieldValue("expression");l({value:S}),h()},w=[{key:"3",label:t("edl.variable.dateFunction"),children:e.jsx("ul",{children:e.jsx("li",{onClick:()=>u("FORMAT"),children:"FORMAT"})})}];return e.jsxs(Ot,{open:o,onCancel:h,title:t("edl.variable.logicEditor"),width:1100,onOk:C,okText:t("edl.common.confirm"),cancelText:t("edl.common.cancel"),children:[e.jsxs("div",{style:{marginBlock:10},children:[e.jsx(Ca,{style:{color:"#7D33FF"}}),e.jsx("span",{style:{marginLeft:5},children:t("edl.variable.pageVariableTip")})]}),e.jsxs("div",{className:At.container,children:[e.jsxs("div",{className:At.leftFn,children:[e.jsx("div",{className:At.title,children:t("edl.variable.calcFunction")}),e.jsx("div",{className:At.box,children:e.jsx(va,{ghost:!0,items:w,style:{marginTop:-13}})})]}),e.jsxs("div",{className:At.content,children:[e.jsxs("div",{className:At.title,children:[t("edl.variable.expression"),e.jsx(xa,{content:e.jsxs("div",{children:[e.jsx("p",{children:t("edl.variable.expressionTip1")}),e.jsx("p",{children:t("edl.variable.expressionTip2")}),e.jsx("p",{children:t("edl.variable.expressionTip3")}),e.jsx("p",{children:t("edl.variable.expressionTip4")}),e.jsx("p",{children:t("edl.variable.expressionTip5")}),e.jsx("p",{children:t("edl.variable.expressionTip6")})]}),children:e.jsx(pl,{style:{marginLeft:10,cursor:"pointer"}})}),e.jsx(ee,{type:"link",onClick:()=>m("expression"),children:t("edl.variable.ternaryExpressionModal")}),e.jsx(ee,{type:"link",onClick:()=>m("function"),children:t("edl.variable.functionModal")}),e.jsx(ee,{type:"link",onClick:()=>m("table"),children:t("edl.variable.tableCustomModal")})]}),e.jsx("div",{className:At.formula,children:e.jsx(x,{form:s,children:e.jsx(x.Item,{noStyle:!0,name:"expression",children:e.jsx(hl,{height:"440px",language:"javascript"})})})})]}),e.jsxs("div",{className:At.variable,children:[e.jsx("div",{className:At.title,children:t("edl.variable.paramsAndVariable")}),e.jsx(wa,{showLine:!0,defaultExpandAll:!0,switcherIcon:e.jsx(Bo,{}),fieldNames:{title:"name",key:"id",children:"elements"},treeData:d,onSelect:f})]})]})]})},Ir=a.forwardRef(Sr),Nl=({value:l,onChange:n,...t})=>{const{t:o}=gl(),r=a.useRef();function s(p){var b;n({type:"static",value:(b=p==null?void 0:p.target)==null?void 0:b.value})}function i(p){n({type:"variable",...p})}const c=typeof l=="string"?{type:"static",value:l}:l;return e.jsxs(e.Fragment,{children:[e.jsx(O,{readOnly:(c==null?void 0:c.type)==="variable"&&c.value,allowClear:!0,value:c==null?void 0:c.value,onChange:s,addonAfter:e.jsx(Sa,{onClick:()=>{var p;(p=r.current)==null||p.open(c==null?void 0:c.value)},style:{color:(l==null?void 0:l.type)==="variable"?"#7D33FF":""}}),placeholder:o("edl.common.pleaseInput")+o("edl.variable.variable"),...t}),e.jsx(Ir,{ref:r,onSelect:i})]})},Y=window.$translation,jr=()=>{const l=window.$translation;return e.jsxs(e.Fragment,{children:[e.jsxs(Oe,{children:[e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:l("edl.propertyConfig.basicColumn.columnHeader"),name:"title",rules:[{required:!0,message:l("common.pleaseInput")}],children:e.jsx(O,{})})}),e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:l("edl.propertyConfig.basicColumn.dataIndex"),name:"dataIndex",rules:[{required:!0,message:l("common.pleaseInput")}],children:e.jsx(O,{})})})]}),e.jsxs(Oe,{children:[e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:l("common.width"),name:"width",children:e.jsx(It,{placeholder:"eg: 100"})})}),e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:l("edl.propertyConfig.basicColumn.align"),name:"align",children:e.jsxs(he.Group,{buttonStyle:"solid",children:[e.jsx(he.Button,{value:"left",children:l("edl.propertyConfig.basicColumn.leftAlign")}),e.jsx(he.Button,{value:"center",children:l("edl.propertyConfig.basicColumn.centerAlign")}),e.jsx(he.Button,{value:"right",children:l("edl.propertyConfig.basicColumn.rightAlign")})]})})})]}),e.jsxs(Oe,{children:[e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:l("edl.propertyConfig.basicColumn.fixWay"),name:"fixed",children:e.jsxs(he.Group,{buttonStyle:"solid",children:[e.jsx(he.Button,{value:"",children:l("common.default")}),e.jsx(he.Button,{value:"left",children:l("edl.propertyConfig.basicColumn.leftFix")}),e.jsx(he.Button,{value:"right",children:l("edl.propertyConfig.basicColumn.rightFix")})]})})}),e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:l("edl.propertyConfig.basicColumn.colSpan"),name:"colSpan",children:e.jsx(It,{placeholder:"eg: 3"})})})]})]})},Tr=()=>{const l={labelCol:{span:4},wrapperCol:{span:8}};return e.jsxs(e.Fragment,{children:[e.jsx(x.Item,{label:Y("edl.propertyConfig.basicColumn.showStyle"),name:"type",...l,children:e.jsxs(W,{children:[e.jsx(W.Option,{value:"text",children:Y("edl.propertyConfig.basicColumn.singleText")}),e.jsx(W.Option,{value:"multiline",children:e.jsxs(Xe,{justify:"space-between",children:[e.jsx("span",{children:Y("edl.propertyConfig.basicColumn.multiText")}),e.jsx("span",{children:e.jsx(_e,{title:Y("edl.propertyConfig.basicColumn.textTips"),children:e.jsx(pl,{})})})]})}),e.jsx(W.Option,{value:"status",children:e.jsxs(Xe,{justify:"space-between",children:[e.jsx("span",{children:Y("edl.propertyConfig.basicColumn.status")}),e.jsx("span",{children:e.jsx(_e,{title:Y("edl.propertyConfig.basicColumn.statusTips"),children:e.jsx(pl,{})})})]})}),e.jsx(W.Option,{value:"image",children:e.jsxs(Xe,{justify:"space-between",children:[e.jsx("span",{children:Y("edl.propertyConfig.basicColumn.img")}),e.jsx("span",{children:e.jsx(_e,{title:Y("edl.propertyConfig.basicColumn.imgTips"),children:e.jsx(pl,{})})})]})}),e.jsx(W.Option,{value:"date1",children:Y("edl.propertyConfig.basicColumn.formate-tips1")}),e.jsx(W.Option,{value:"date2",children:Y("edl.propertyConfig.basicColumn.formate-tips2")}),e.jsx(W.Option,{value:"money",children:Y("edl.propertyConfig.basicColumn.amount")}),e.jsx(W.Option,{value:"number",children:Y("edl.propertyConfig.basicColumn.number")}),e.jsx(W.Option,{value:"tag",children:e.jsxs(Xe,{justify:"space-between",children:[e.jsx("span",{children:Y("edl.propertyConfig.basicColumn.label")}),e.jsx("span",{children:e.jsx(_e,{title:Y("edl.propertyConfig.basicColumn.labelTips"),children:e.jsx(pl,{})})})]})}),e.jsx(W.Option,{value:"action",children:Y("edl.propertyConfig.basicColumn.operation")})]})}),e.jsx(x.Item,{label:Y("edl.propertyConfig.basicColumn.clickable"),name:"clickable",tooltip:Y("edl.propertyConfig.basicColumn.clickableTips"),...l,children:e.jsx(Qe,{})}),e.jsx(x.Item,{name:"eventName",hidden:!0,children:e.jsx(O,{})}),e.jsx(x.Item,{label:Y("edl.propertyConfig.basicColumn.ellipsis"),name:"ellipsis",tooltip:Y("edl.propertyConfig.basicColumn.ellipsisTips"),...l,children:e.jsx(Qe,{})}),e.jsx(x.Item,{label:Y("edl.propertyConfig.basicColumn.copyable"),name:"copyable",tooltip:Y("edl.propertyConfig.basicColumn.copyableTips"),...l,children:e.jsx(Qe,{})}),e.jsx(x.Item,{shouldUpdate:!0,noStyle:!0,children:n=>{if(n.getFieldValue("type")==="action")return e.jsx(x.List,{name:"list",children:(o,{add:r,remove:s})=>e.jsxs(e.Fragment,{children:[o.map(({key:i,name:c,...p})=>e.jsx(_l,{style:{width:"100%",marginBottom:10},title:Y("edl.propertyConfig.basicColumn.btnConfig"),size:"small",extra:e.jsx(ee,{onClick:()=>s(c),icon:e.jsx(Ia,{}),type:"text",danger:!0,children:Y("edl.propertyConfig.basicColumn.delete")}),children:e.jsxs(Oe,{gutter:15,style:{marginBottom:-24},children:[e.jsx(ne,{span:6,children:e.jsx(x.Item,{...p,name:[c,"text"],label:Y("edl.propertyConfig.basicColumn.name"),children:e.jsx(Nl,{})})}),e.jsx(ne,{span:4,children:e.jsx(x.Item,{label:"danger",name:[c,"danger"],labelCol:{span:14},valuePropName:"checked",children:e.jsx(Qe,{})})}),e.jsx(ne,{span:7,children:e.jsx(x.Item,{label:Y("edl.propertyConfig.basicButton.auth"),tooltip:Y("edl.propertyConfig.basicButton.authTips"),name:[c,"authCode"],children:e.jsx(O,{placeholder:Y("edl.propertyConfig.basicButton.btnCode")})})}),e.jsxs(ne,{span:7,children:[e.jsx(x.Item,{label:Y("edl.propertyConfig.basicButton.scripts"),tooltip:Y("edl.propertyConfig.basicButton.scriptsTips"),name:[c,"authScript"],children:e.jsx(Nl,{placeholder:Y("edl.propertyConfig.basicButton.scriptsHolder")})}),e.jsx(x.Item,{name:[c,"eventName"],hidden:!0,children:e.jsx(O,{})})]})]})},i)),e.jsx("div",{style:{marginTop:15},children:e.jsx(ee,{type:"dashed",block:!0,onClick:()=>r({text:Y("edl.propertyConfig.basicButton.text"),type:"link",eventName:wt("Dynamic")}),icon:e.jsx(st,{}),children:Y("edl.propertyConfig.basicButton.add")})})]})})}})]})},kr=()=>e.jsxs(e.Fragment,{children:[e.jsx(Oe,{children:e.jsx(ne,{span:24,children:e.jsx(x.Item,{label:Y("edl.propertyConfig.basicTable.cellRender"),name:"onCell",labelCol:{span:4},wrapperCol:{span:21},tooltip:Y("edl.propertyConfig.basicTable.cellRenderTips"),children:e.jsx(hl,{})})})}),e.jsx(Oe,{children:e.jsx(ne,{span:24,children:e.jsx(x.Item,{label:Y("edl.propertyConfig.basicTable.customRender"),name:"render",labelCol:{span:4},wrapperCol:{span:21},tooltip:Y("edl.propertyConfig.basicTable.customRenderTips"),children:e.jsx(hl,{})})})})]}),Ar=a.memo(l=>{const[n,t]=a.useState(!1),[o,r]=a.useState(0),[s]=Lo(),{selectedElement:i,elementsMap:c,editTableProps:p,editEvents:b}=window.usePageStore(m=>{const{page:f,selectPageItem:u,selectedElement:h,editTableProps:C,editEvents:w}=m,S=f[(u==null?void 0:u.id)||""]||{};return{selectedElement:h,elementsMap:S.elementsMap,editTableProps:C,editEvents:w}});a.useImperativeHandle(l.columnRef,()=>({open(m){const u=c[i==null?void 0:i.id].config.props.columns[m],h=u.render||`function render(text, record, index) {
    return text;
}`;s.resetFields(),s.setFieldsValue({align:"center",fixed:!1,type:"text",empty:"-",...u,render:h,onCell:u.onCell||`function onCell(record, index) {
    // ${Y("edl.propertyConfig.basicTable.remark")}
    return {

    }
}`}),r(m),t(!0)}}));const g=a.useMemo(()=>[{key:"basic",label:Y("edl.propertyConfig.basicConfig"),children:e.jsx(jr,{})},{key:"display",label:Y("edl.propertyConfig.displayConfig"),forceRender:!0,children:e.jsx(Tr,{})},{key:"custom",label:Y("edl.propertyConfig.custom"),forceRender:!0,children:e.jsx(kr,{})}],[]),y=()=>{s.validateFields().then(()=>{var w,S;const m=s.getFieldsValue(),f=c[i==null?void 0:i.id],u=wt(`ClickCell${m.dataIndex}`);m.clickable?m.eventName=m.eventName||u:m.eventName="",p({id:i==null?void 0:i.id,type:"column",index:o,props:{...m,key:m.dataIndex||o}});let h=(w=f.events)==null?void 0:w.filter(v=>v.value.indexOf("Dynamic")===-1);(S=m.list)==null||S.map((v,I)=>{var k,T;let j="";typeof v.text=="string"||((k=v.text)==null?void 0:k.type)==="static"?j=Y("edl.propertyConfig.basicColumn.columnName")+(((T=v.text)==null?void 0:T.value)||v.text)+Y("edl.propertyConfig.basicColumn.eventName"):j=`${Y("edl.propertyConfig.basicColumn.columnBtnName")}${I+1}${Y("edl.propertyConfig.basicColumn.eventName")}`,h.push({name:j,value:v.eventName})});const C=f.config.props.columns[o].eventName;h=h.filter(v=>v.value!==C),m.clickable&&h.push({name:`${Y("edl.propertyConfig.basicColumn.columnName2")}${m.title}${Y("edl.propertyConfig.basicColumn.eventName")}`,value:m.eventName||u}),b({id:f.id,events:h}),l.update(m,o),t(!1)})},d=()=>{t(!1)};return e.jsx(Ot,{title:Y("edl.propertyConfig.basicColumn.columnSetting"),open:n,onOk:y,onCancel:d,width:900,children:e.jsx(x,{form:s,labelCol:{span:6},children:e.jsx(Ho,{items:g})})})}),Fr=({index:l,move:n,handleOpen:t,add:o,remove:r})=>{const s=a.useRef(null),[,i]=Cl({accept:"card",hover(y,d){var S;if(!s.current)return;const m=y.index,f=l;if(m===f)return;const u=(S=s.current)==null?void 0:S.getBoundingClientRect(),h=(u.bottom-u.top)/2,w=d.getClientOffset().y-u.top;m<f&&w<h||m>f&&w>h||(n(m,f),y.index=f)}}),[{isDragging:c},p]=ja({type:"card",item:()=>({index:l}),collect:y=>({isDragging:y.isDragging()})}),b=c?0:1;p(i(s));const g=wt("C",5);return e.jsx(e.Fragment,{children:e.jsxs(xe,{style:{display:"flex",marginBottom:15,padding:"0 10px",opacity:b},align:"baseline",ref:s,children:[e.jsx(Ta,{style:{cursor:"grab"}}),e.jsx(x.Item,{wrapperCol:{span:22},name:[l,"title"],noStyle:!0,children:e.jsx(O,{placeholder:"列名称"})}),e.jsx(x.Item,{wrapperCol:{span:22},name:[l,"dataIndex"],noStyle:!0,children:e.jsx(O,{placeholder:"列字段",style:{width:"100%"}})}),e.jsx(Ml,{onClick:()=>t(l)}),e.jsx(st,{onClick:()=>o({title:g,dataIndex:g,width:120},l+1)}),e.jsx(Wt,{onClick:()=>r(l)})]})})},Er=a.memo(({form:l})=>{const n=a.useRef(),t=a.useCallback(r=>{var s;(s=n.current)==null||s.open(r)},[]),o=(r,s)=>{l.setFieldValue(["columns",s],r)};return e.jsxs(e.Fragment,{children:[e.jsx(x.List,{name:["columns"],children:(r,{add:s,remove:i,move:c})=>e.jsx(e.Fragment,{children:r.map(({key:p,name:b})=>e.jsx(Fr,{index:b,add:s,remove:i,handleOpen:t,move:c},p))})}),e.jsx(Ar,{columnRef:n,update:o})]})}),Je=window.$translation,Dr=a.memo(l=>{const[n,t]=a.useState(!1),[o,r]=a.useState(0),[s]=x.useForm(),{selectedElement:i,elementsMap:c,editTableProps:p}=window.usePageStore(d=>{var f;const m=d.page[((f=d.selectPageItem)==null?void 0:f.id)||""];return{selectedElement:d.selectedElement,elementsMap:m.elementsMap,editTableProps:d.editTableProps}});a.useImperativeHandle(l.modalRef,()=>({open(d){const m=c[i==null?void 0:i.id];s.setFieldsValue({danger:!1,...m.config.props.bulkActionList[d]}),r(d),t(!0)}}));const b=()=>{s.validateFields().then(()=>{const d=s.getFieldsValue();p({id:i==null?void 0:i.id,type:"bulkActionList",index:o,props:d}),l.update(d,o),t(!1)})},g=()=>{t(!1)},y=Rt;return e.jsx(Ot,{title:Je("edl.propertyConfig.basicColumn.btnConfig"),open:n,onOk:b,onCancel:g,width:600,destroyOnClose:!0,children:e.jsxs(x,{form:s,children:[e.jsx(x.Item,{label:Je("edl.propertyConfig.basicButton.btnLabel"),name:"text",rules:[{required:!0,message:`${Je("common.pleaseInput")}${Je("edl.propertyConfig.basicButton.btnLabel")}`}],children:e.jsx(O,{})}),e.jsx(x.Item,{name:"eventName",hidden:!0,children:e.jsx(O,{})}),e.jsx(x.Item,{label:Je("edl.propertyConfig.basicButton.btnType"),name:"type",children:e.jsx(he.Group,{optionType:"button",buttonStyle:"solid",options:[{label:Je("edl.propertyConfig.basicButton.primary"),value:"primary"},{label:Je("common.default"),value:"default"},{label:Je("edl.propertyConfig.basicButton.dashedBtn"),value:"dashed"},{label:Je("edl.propertyConfig.basicButton.textBtn"),value:"text"},{label:Je("edl.propertyConfig.basicButton.linkBtn"),value:"link"}]})}),e.jsx(x.Item,{label:Je("edl.propertyConfig.basicButton.dangerBtn"),name:"danger",valuePropName:"checked",children:e.jsx(Qe,{})}),e.jsx(x.Item,{label:Je("edl.propertyConfig.basicButton.blockBtn"),name:"block",valuePropName:"checked",children:e.jsx(Qe,{})}),e.jsx(x.Item,{label:Je("edl.propertyConfig.basicButton.btnIcon"),name:"icon",children:e.jsx(W,{placeholder:`${Je("common.pleaseSelect")}${Je("edl.propertyConfig.basicButton.btnIcon")}`,showSearch:!0,allowClear:!0,children:Object.keys(Rt).filter(d=>!["default","createFromIconfontCN","getTwoToneColor","setTwoToneColor","IconProvider"].includes(d)).map(d=>e.jsx(W.Option,{value:d,children:Vt.createElement(y[d],{style:{fontSize:"24px",verticalAlign:"middle"}})},d))})}),e.jsx(x.Item,{name:"authCode",label:Je("edl.propertyConfig.basicButton.auth"),children:e.jsx(O,{})}),e.jsx(x.Item,{name:"authScript",label:Je("edl.propertyConfig.basicButton.scripts"),children:e.jsx(Nl,{})})]})})}),vl=a.memo(({form:l})=>{const n=window.$translation,{selectedElement:t,elementsMap:o,editEvents:r}=window.usePageStore(d=>{var f;const m=d.page[((f=d.selectPageItem)==null?void 0:f.id)||""];return{selectedElement:d.selectedElement,elementsMap:m.elementsMap,editEvents:d.editEvents}}),s=a.useRef(),i=()=>{var f,u;const m=(f=o[t==null?void 0:t.id].events)==null?void 0:f.filter(h=>h.value.indexOf("BulkAction")===-1);(u=l.getFieldValue("bulkActionList"))==null||u.map(h=>{m.push({name:h.text+"事件",value:h.eventName})}),r({id:t==null?void 0:t.id,events:m})},c=(d,m)=>{typeof d=="string"?l.setFieldValue(["bulkActionList",m,"text"],d):l.setFieldValue(["bulkActionList",m],d);const f=l.getFieldValue(["bulkActionList",m,"eventName"]),u=o[t==null?void 0:t.id],h=Ne(u.events||[]);h.map(C=>{if(C.value===f){const w=n("edl.eventConfig.title");typeof d=="string"?C.name=d+w:C.name=d.text+w}return C}),r({id:t==null?void 0:t.id,events:h})},p=d=>{d({text:n("common.download"),type:"primary",eventName:wt("BulkAction")}),i()},b=(d,m)=>{d(m),i()},g=d=>{var m;(m=s.current)==null||m.open(d)},{run:y}=zo((d,m)=>{c(d,m)},{wait:500});return e.jsxs(e.Fragment,{children:[e.jsx(x.List,{name:["bulkActionList"],children:(d,{add:m,remove:f})=>e.jsxs(e.Fragment,{children:[d.map(({key:u,name:h,...C})=>e.jsxs(xe,{align:"baseline",children:[e.jsx(x.Item,{...C,labelCol:{span:12},name:[h,"text"],label:n("edl.component.featureComponent.btn"),children:e.jsx(O,{placeholder:n("common.pleaseInput"),onChange:w=>y(w.target.value,h)})}),e.jsx(x.Item,{name:[h,"eventName"],hidden:!0,children:e.jsx(O,{})}),e.jsx(x.Item,{name:[h,"type"],hidden:!0,children:e.jsx(O,{})}),e.jsx(Ml,{onClick:()=>g(h)}),e.jsx(Wt,{onClick:()=>b(f,h)})]},u)),e.jsx("div",{style:{padding:"0 10px 10px"},children:e.jsx(ee,{type:"primary",block:!0,ghost:!0,onClick:()=>p(m),icon:e.jsx(st,{}),children:n("buComp.common.create")})})]})}),e.jsx(Dr,{modalRef:s,update:c})]})}),Nr=window.$translation,$=[{type:"Switch",label:Nr("common.show"),name:"visible"}],H=window.$translation,vp={attrs:[{type:"Title",label:H("edl.propertyConfig.basicTable.operationCol")},...$,{type:"function",render(l){return e.jsx(vl,{form:l},"ActionSetting")}},{type:"Title",label:H("edl.propertyConfig.basicTable.tableConfig")},{type:"Input",label:H("common.title"),name:["leftTitle"]},{type:"Switch",label:H("edl.propertyConfig.basicTable.showBorder"),name:["bordered"]},{type:"Select",label:H("edl.propertyConfig.basicTable.tableSize"),name:["size"],props:{options:[{label:H("common.default"),value:"large"},{label:H("edl.propertyConfig.basicForm.medium"),value:"middle"},{label:H("edl.propertyConfig.basicTable.compact"),value:"small"}]}},{type:"Select",label:H("edl.propertyConfig.basicTable.singleOrMultip"),name:["selectionType"],props:{options:[{label:H("common.none"),value:""},{label:H("edl.propertyConfig.basicTable.single"),value:"radio"},{label:H("edl.propertyConfig.basicTable.multiple"),value:"checkbox"}]}},{type:"InputNumber",label:H("edl.propertyConfig.basicTable.scrollxAxis"),name:["scroll","x"],tooltip:H("edl.propertyConfig.basicTable.scrollxTips"),props:{placeholder:"eg: 1000"}},{type:"InputNumber",label:H("edl.propertyConfig.basicTable.scrollyAxis"),name:["scroll","y"],tooltip:H("edl.propertyConfig.basicTable.scrollyTips"),props:{placeholder:"eg: 600"}},{type:"Select",label:H("edl.propertyConfig.basicStaticTerm.nullDisplay"),name:["empty"],tooltip:H("edl.propertyConfig.basicTable.emptyTips"),props:{options:[{label:H("common.none"),value:""},{label:"-",value:"-"},{label:"/",value:"/"}]}},{type:"Title",label:H("edl.propertyConfig.basicTable.colSetting"),key:"columnConfig"},{type:"Input",label:"rowKey",name:["rowKey"],tooltip:H("edl.propertyConfig.basicTable.setTips"),props:{placeholder:"eg: id"}},{type:"function",key:"TableSetting",render(l){return e.jsx(Er,{form:l},"TableSetting")}},{type:"Title",label:H("edl.propertyConfig.basicTable.pagination.label"),key:"pageConfig"},{type:"Switch",label:H("edl.propertyConfig.basicTable.pagination.hide"),name:["hidePager"]},{type:"Select",label:H("edl.propertyConfig.basicTable.pagination.position"),name:["pagination","position"],props:{mode:"multiple",options:[{label:H("edl.propertyConfig.basicTable.pagination.topLeft"),value:"topLeft"},{label:H("edl.propertyConfig.basicTable.pagination.topRight"),value:"topRight"},{label:H("edl.propertyConfig.basicTable.pagination.bottomLeft"),value:"bottomLeft"},{label:H("edl.propertyConfig.basicTable.pagination.bottomRight"),value:"bottomRight"}]}},{type:"InputNumber",label:H("edl.propertyConfig.basicTable.pagination.pageSize"),name:["pagination","pageSize"]},{type:"Switch",label:H("edl.propertyConfig.basicTable.pagination.total"),name:["pagination","showTotal"]},{type:"Switch",label:H("edl.propertyConfig.basicTable.pagination.showSwitch"),name:["pagination","showSizeChanger"]},{type:"Switch",label:H("edl.propertyConfig.basicTable.pagination.showJump"),name:["pagination","showQuickJumper"]},{type:"Title",label:H("edl.propertyConfig.basicSelect.optionMode.fieldMapping"),key:"fieldmap"},{type:"Input",label:H("edl.propertyConfig.basicTable.pagination.pageNumber"),name:["field","pageNum"]},{type:"Input",label:H("edl.propertyConfig.basicTable.pagination.step"),name:["field","pageSize"]},{type:"Input",label:H("edl.propertyConfig.basicTable.pagination.totalCount"),name:["field","total"]}],config:{props:{x:0,y:0,visible:!0,width:500,height:150,rowKey:"id",size:"large",bordered:!0,selectionType:"",leftTitle:H("edl.propertyConfig.basicTable.searchForm"),empty:"-",columns:[{title:"姓名",dataIndex:"name",key:"name",width:90,align:"center"},{title:"种类",dataIndex:"type",key:"type",width:80,align:"center"},{title:"头像",dataIndex:"avatar",key:"avatar",type:"image",width:90,align:"center"},{title:"分布区域",dataIndex:"area",key:"area",width:230},{title:"繁殖周期",dataIndex:"time",key:"time",render:`function render(text,record){
    return text + "个月"
}`,width:110},{title:"技能",dataIndex:"skill",key:"skill",type:"tag",width:200,align:"center"},{title:"售价",dataIndex:"sales",key:"sales",type:"money",width:90,align:"center"},{title:"状态",dataIndex:"status",key:"status",type:"status",width:90,align:"center",render:`function render(text,record){
    return {
      status: "processing",
      text: text
    }
}`},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",type:"date1",width:130,align:"center"},{title:"操作",key:"action",type:"action",dataIndex:"action",fixed:"right",width:220,align:"center",list:[{text:"详情",type:"link",eventName:"DynamicDetail"},{text:"编辑",type:"link",eventName:"DynamicEdit"},{text:"删除",type:"link",danger:!0,eventName:"DynamicDelete"}]}],hidePager:!1,pagination:{total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,position:["bottomRight"],pageSizeOptions:[10,20,50,100],showTotal:!0},field:{pageNum:"pageNum",pageSize:"pageSize",total:"total"}},style:{background:"#fff",padding:"0 20px",margin:"20px 0 0",border:"1px solid #e6e6e6",borderRadius:"3px"},events:[],api:{sourceType:"json",sourceField:"list",source:[{id:1001,name:"萤火虫",type:"昆虫",avatar:"",time:10,skill:["飞","发光","御敌"],sales:9.9,status:"在售",createdAt:new Date().getTime(),area:"热带、亚热带和温带地区"}]}},events:[{value:"onCheckedChange",name:H("edl.propertyConfig.basicTable.onCheckedEvent")},{value:"DynamicDetail",name:H("edl.propertyConfig.basicTable.onViewEvent")},{value:"DynamicEdit",name:H("edl.propertyConfig.basicTable.onEditEvent")},{value:"DynamicDelete",name:H("edl.propertyConfig.basicTable.onDeleteEvent")}],methods:[{name:"search",title:H("edl.propertyConfig.basicTable.search")},{name:"reload",title:H("edl.propertyConfig.basicTable.fresh")},{name:"clearData",title:H("edl.propertyConfig.basicTable.clear")},{name:"startLoading",title:H("edl.component.componentSchema.startLoading")},{name:"stopLoading",title:H("edl.component.componentSchema.endLoading")},{name:"checkSelectedRow",title:H("edl.propertyConfig.basicTable.checkSelected")},{name:"setSelectedRowKeys",title:H("edl.propertyConfig.basicTable.setCheckedKeys")},{name:"getSelectedRowKeys",title:H("edl.propertyConfig.basicTable.getCheckedKeys")},{name:"getSelectedRow",title:H("edl.propertyConfig.basicTable.getCheckedRecords")}]},ke=a.createContext(null),Pr="_formWrap_1vtpi_1",$r="_searchBox_1vtpi_9",Mr="_action_1vtpi_13",Vr="_toggleAll_1vtpi_18",To={formWrap:Pr,searchBox:$r,action:Mr,toggleAll:Vr},Rr=({id:l,type:n,config:t,elements:o,onSearch:r,onChange:s,onReset:i},c)=>{var te;const{props:p}=t,[b]=x.useForm(),g=a.useRef(null),[y,d]=a.useState(!1),[m,f]=a.useState(!1),[u,h]=a.useState(p.visible!==void 0?p.visible:!0),C=window.AppsRender,w=window.$translation,{formData:S,setFormData:v}=window.usePageStore(P=>{const{setFormData:J,page:se,selectPageItem:je}=P;return{formData:(se[(je==null?void 0:je.id)||""]||{}).formData,setFormData:J}});a.useEffect(()=>{const P=setTimeout(()=>{var J;((J=g.current)==null?void 0:J.offsetTop)>=32&&((o==null?void 0:o.length)||0)>0?f(!0):f(!1),clearTimeout(P)},500)},[o]);const I=Ze(l),j=()=>{const P=b.getFieldsValue();r&&r(Pt(o,P))},k=()=>{b.resetFields();const P=b.getFieldsValue();i&&i(Pt(o,P))},T=(P,J)=>{const se=Pt(o,J);s==null||s(se),v({name:l,value:se})};a.useImperativeHandle(c,()=>({show(){h(!0)},hide(){h(!1)},reset(){b.resetFields()},submit(){b.submit()},init(P={}){const J=Pt(o,P);b.setFieldsValue(J),v({name:l,value:J})},getFormData(P){var J;return P&&typeof P=="string"?(J=S[l])==null?void 0:J[P]:S[l]}}));const A=P=>{const J=b.getFieldsValue(),se=Pt(o,J),je=t.events.find(pe=>pe.eventName===P);gt(je==null?void 0:je.actions,se)},F=()=>{d(!y)},{submitText:E,resetText:D}=p.form||{},M=p.bulkActionList||[],q=Rt;return a.useEffect(()=>{h(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),u&&e.jsx(ke.Provider,{value:b,children:e.jsxs(x,{form:b,layout:"inline",onValuesChange:T,children:[e.jsxs("div",{className:To.formWrap,ref:I,style:y?{}:{height:32,overflow:"hidden"},children:[o!=null&&o.length?e.jsx(C,{elements:o}):e.jsxs("div",{className:"slots",children:[" ",w("edl.component.containerComponent.dragDesc")]}),e.jsx("div",{ref:g})]}),e.jsxs(xe,{style:{alignItems:"baseline"},children:[E?e.jsx(ee,{type:"primary",icon:e.jsx(ka,{}),onClick:j,children:E}):null,D?e.jsx(ee,{type:"default",icon:e.jsx(Aa,{}),onClick:k,children:D}):null,M.length>0&&e.jsx("div",{className:To.action,children:(te=t.props.bulkActionList)==null?void 0:te.map(P=>e.jsx(ee,{type:P.type,danger:P.danger,icon:P.icon?Vt.createElement(q[P.icon]):null,onClick:()=>A(P.eventName),children:P.text},P.eventName))}),m&&e.jsx(ee,{type:"link",icon:y?e.jsx(Fa,{}):e.jsx(Bo,{}),onClick:F,children:y?"收起":"展开"})]})]})})},xp=a.forwardRef(Rr),ct=window.$translation,wp={attrs:[{type:"Title",label:ct("edl.propertyConfig.basicTable.operationCol")},...$,{type:"function",render(l){return e.jsx(vl,{form:l},"ActionSetting")}},{type:"Title",name:ct("edl.propertyConfig.basicForm.btn.title")},{type:"Input",label:ct("edl.propertyConfig.basicForm.btn.search"),name:["form","submitText"]},{type:"Input",label:ct("edl.propertyConfig.basicForm.btn.reset"),name:["form","resetText"]}],config:{props:{x:0,y:0,form:{submitText:ct("common.query"),resetText:ct("common.reset")},visible:!0},style:{background:"#fff",padding:"20px 10px",border:"1px solid #e6e6e6",borderRadius:"3px"},events:[],api:{}},events:[{value:"onSearch",name:ct("edl.propertyConfig.basicForm.onSearch")},{value:"onReset",name:ct("edl.propertyConfig.basicForm.onReset")},{value:"onChange",name:ct("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"reset",title:ct("edl.propertyConfig.basicForm.triggerFormReset")},{name:"submit",title:ct("edl.propertyConfig.basicForm.triggerFormSubmit")},{name:"init",title:ct("edl.propertyConfig.basicForm.triggerFormInit")},{name:"getFormData",title:ct("edl.propertyConfig.basicForm.getFormData")}]},Wr=({id:l,config:n,elements:t},o)=>{const{props:r}=n,{mode:s}=window.usePageStore(it(f=>({addChildElements:f.addChildElements,mode:f.mode}))),[i,c]=a.useState(r.visible!==void 0?r.visible:!0),p=Ze(l),b=window.$translation;a.useImperativeHandle(o,()=>({show(){c(!0)},hide(){c(!1)}}));const g=window.AppsRender,y=f=>{},{visible:d,...m}=n.props;return a.useEffect(()=>{c(d!==void 0?d:!0)},[d]),i&&e.jsx(Xe,{onMouseDown:y,style:n.style,...m,ref:p,children:t!=null&&t.length?e.jsx(g,{elements:t||[]}):e.jsx("div",{className:"slots",style:{lineHeight:"200px"},children:s!=="edit"?"":b("edl.component.containerComponent.dragDesc")})})},Sp=a.forwardRef(Wr),Pe=window.$translation,Ip={attrs:[{type:"Title",label:Pe("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Switch",label:Pe("edl.propertyConfig.basicForm.layout.vert"),name:"vertical"},{type:"Select",label:Pe("edl.styleConfig.flexWrap"),name:"wrap",props:{options:[{value:"nowrap",label:Pe("edl.styleConfig.nowrap")},{value:"wrap",label:Pe("edl.styleConfig.wrap")},{value:"wrap-reverse",label:Pe("edl.styleConfig.wrapReverse")}]}},{type:"Select",label:Pe("edl.styleConfig.justifyContent"),name:"justify",props:{options:[{value:"flex-start",label:Pe("edl.styleConfig.left")},{value:"flex-end",label:Pe("edl.styleConfig.right")},{value:"center",label:Pe("edl.styleConfig.center")},{value:"space-between",label:Pe("edl.styleConfig.spaceBetween")},{value:"space-around",label:Pe("edl.styleConfig.spaceAround")},{value:"space-evenly",label:Pe("edl.styleConfig.spaceEvenly")}]}},{type:"Select",label:Pe("edl.styleConfig.alignItems"),name:"align",props:{options:[{value:"start",label:Pe("edl.styleConfig.flexStart")},{value:"end",label:Pe("edl.styleConfig.flexEnd")},{value:"center",label:Pe("edl.styleConfig.center")},{value:"baseline",label:Pe("edl.styleConfig.baseline")},{value:"stretch",label:Pe("edl.styleConfig.stretch")}]}},{type:"Input",label:Pe("edl.styleConfig.gap"),name:"gap",props:{placeholder:"eg: 10px"}}],config:{props:{vertical:!1,wrap:"nowrap",justify:"center",align:"center",gap:20,x:0,y:0,visible:!0},style:{padding:"20px"},events:[],api:{},source:""},events:[]},Br=({id:l,config:n,elements:t,onFinish:o,onChange:r},s)=>{const{props:i}=n,c=window.$translation,[p]=x.useForm(),{formData:b,setFormData:g}=window.usePageStore(it(S=>{const{selectPageItem:v,page:I}=S;return{formData:(I[(v==null?void 0:v.id)||""]||{}).formData,setFormData:S.setFormData}})),[y,d]=a.useState(i.visible!==void 0?i.visible:!0),m=Ze(l),f=S=>{o==null||o(Pt(t||[],S))},u=(S,v)=>{const I=Pt(t||[],v);r==null||r(I),g({name:l,value:I})};a.useImperativeHandle(s,()=>({show(){d(!0)},hide(){d(!1)},reset(){p.resetFields()},submit(){p.submit()},async validate(){try{return await p.validateFields(),!0}catch(S){return console.error(S),!1}},init(S={}){const v=Pt(t||[],S);p.setFieldsValue(v),g({name:l,value:v})},getFormData(S){var v;return S&&typeof S=="string"?(v=b[l])==null?void 0:v[S]:b[l]}}));const{visible:h,...C}=i,w=window.AppsRender;return a.useEffect(()=>{d(h!==void 0?h:!0)},[h]),y&&e.jsx(ke.Provider,{value:p,children:e.jsx("div",{style:{...n.style,width:"100%",height:"100%"},ref:m,children:e.jsx(x,{form:p,...C,onFinish:f,onValuesChange:u,children:t!=null&&t.length?e.jsx(w,{elements:t}):e.jsx("div",{className:"slots",style:{lineHeight:"150px"},children:c("edl.component.containerComponent.dragDesc")})})})})},jp=a.memo(a.forwardRef(Br)),_=window.$translation,Tp={attrs:[{type:"Title",label:_("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Input",label:_("edl.component.componentSchema.field"),name:"name",props:{placeholder:_("edl.component.componentSchema.fieldDefaultEmpty")}},{type:"Switch",label:_("edl.propertyConfig.basicForm.displayColon"),name:"colon"},{type:"Select",label:_("edl.propertyConfig.basicForm.labelAlign"),name:"labelAlign",props:{options:[{label:_("edl.propertyConfig.basicForm.left"),value:"left"},{label:_("edl.propertyConfig.basicForm.right"),value:"right"}]}},{type:"Switch",label:_("edl.propertyConfig.basicForm.disabled"),name:["disabled"]},{type:"Select",label:_("edl.propertyConfig.basicForm.size"),name:"size",props:{options:[{label:_("edl.propertyConfig.basicForm.small"),value:"small"},{label:_("edl.propertyConfig.basicForm.medium"),value:"middle"},{label:_("edl.propertyConfig.basicForm.large"),value:"large"}]}},{type:"Title",label:_("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"Select",label:_("edl.propertyConfig.basicForm.layout.formLayout"),name:"layout",props:{options:[{label:_("edl.propertyConfig.basicForm.layout.hoz"),value:"horizontal"},{label:_("edl.propertyConfig.basicForm.layout.vert"),value:"vertical"},{label:_("edl.propertyConfig.basicForm.layout.inlineLayout"),value:"inline"}]}},{type:"InputNumber",label:_("edl.propertyConfig.basicForm.layout.labelLayout"),name:["labelCol","span"],props:{placeholder:_("edl.propertyConfig.basicForm.layout.columnSpan")}},{type:"InputNumber",label:_("edl.propertyConfig.basicForm.layout.labelOffset"),name:["labelCol","offset"],props:{placeholder:_("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:_("edl.propertyConfig.basicForm.layout.itemSpan"),name:["wrapperCol","span"],props:{placeholder:_("edl.propertyConfig.basicForm.layout.columnSpan")}},{type:"InputNumber",label:_("edl.propertyConfig.basicForm.layout.itemOffset"),name:["wrapperCol","offset"],props:{placeholder:_("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:_("edl.propertyConfig.basicForm.layout.otherConfig"),key:"OtherConfig"},{type:"Switch",label:_("edl.propertyConfig.basicForm.layout.errorFocus"),name:"scrollToFirstError"},{type:"Select",label:_("edl.propertyConfig.basicForm.layout.formShape"),name:"variant",props:{options:[{value:"outlined",label:_("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:_("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:_("edl.propertyConfig.basicForm.layout.fill")}]}}],config:{props:{x:0,y:0,visible:!0,width:500,height:150,colon:!0,labelAlign:"right",layout:"horizontal",labelCol:{span:2}},style:{padding:"20px 10px",backgroundColor:"#fff"},events:[],api:{}},events:[{value:"onReset",name:_("edl.propertyConfig.basicForm.onReset")},{value:"onChange",name:_("edl.propertyConfig.basicForm.onChange")},{value:"onFinish",name:_("edl.propertyConfig.basicForm.onSubmit")}],methods:[{name:"reset",title:_("edl.propertyConfig.basicForm.triggerFormReset")},{name:"submit",title:_("edl.propertyConfig.basicForm.triggerFormSubmit")},{name:"validate",title:_("edl.propertyConfig.basicForm.triggerFormValidate")},{name:"init",title:_("edl.propertyConfig.basicForm.triggerFormInit")},{name:"getFormData",title:_("edl.propertyConfig.basicForm.getFormData")}]},Lr=l=>{const{addChildElements:n,interceptor:t,addBusinessComponentToChildElements:o}=window.usePageStore(r=>({addChildElements:r.addChildElements,interceptor:r.interceptor,addBusinessComponentToChildElements:r.addBusinessComponentToChildElements}));return async(r,s)=>{if(r.createType===oa.FILE_UPLOAD){const{detail:i}=r;let c;try{c=JSON.parse(i)}catch{c=[],window.$message.error("组件文件缺失");return}const p=[],b=[];if(c.forEach(u=>{u.type==="text/javascript"?p.push(u.fileUrl):u.type==="text/css"&&b.push(u.fileUrl)}),p.length===0){window.$message.error("组件文件缺失");return}const{config:g,events:y,methods:d=[]}=await Qt(p[0],r.cmptEnName,!0),m=io(r.cmptEnName),f={remoteUrl:p[0],remoteCssUrl:b[0],type:r.cmptEnName,name:r.cmptName,config:g,events:y,methods:d};n({...f,elements:[],parentId:l,id:m},s)}else{const{detail:i}=r;let c;try{c=JSON.parse(i)}catch{c={}}const{elements:p,elementsMap:b,variableData:g,variables:y}=bo(c);o({parentId:l,elements:p,elementsMap:b,variableData:g,variables:y},s)}}},Hr=l=>{const n=Lr(l),{addChildElements:t}=window.usePageStore(o=>({mode:o.mode,addChildElements:o.addChildElements}));return(o,r,s)=>{if(o.origin==="base"){const{config:i,events:c,methods:p=[]}=window.$Components[o.type+"Config"]||{};t({type:o.type,name:o.name,parentId:l,id:o.id,config:i,events:c,methods:p},s)}else n(o,s)}},Gt=(l,n,t)=>{const o=Hr(l),{props:r}=n,[,s]=Cl({accept:"MENU_ITEM",drop(i,c){c.didDrop()||i.type==="Combine"||r.locked||o(i,c,t)},collect:i=>({isOver:i.isOver(),canDrop:i.canDrop()})});return s};function fo(){const{mode:l}=window.usePageStore(it(t=>({mode:t.mode})));return a.useMemo(()=>l==="edit"?"slots":"",[l])}const zr="/app/assets/png/header-CJjl0hsE.png",Yr=Dt.div`
  background-color: #fff;
  &.bigScreen {
    background-color: unset;
    .card-body {
      background: linear-gradient(180deg, rgba(0, 0, 0, 0.2), #198fff20);
      backdrop-filter: blur(21px); /* 标准属性 */
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .header {
      background: url(${zr}) no-repeat left top / 256px 35px;
      padding: 7px 16px 7px 35px;
    }
    .card_title {
      font-weight: normal;
      font-size: 18px;
      color: #ffffff;
    }
  }
  .header {
    position: relative;
    /* padding: 2px 0 2px 8px; */
    padding: 2px 10px 2px 8px;
    height: 35px;
    .action {
      display: flex;
      justify-content: flex-end;
      align-items: flex-start;
      /* position: absolute;
      height: fit-content;
      right: 10px;
      top: 16px; */
      z-index: 2;
      min-width: 30%;
      width: fit-content;
    }
  }
`,Or=({id:l,type:n,config:t,elements:o,onClick:r},s)=>{const{props:i,style:c}=t,[p,b]=a.useState(i.visible!==void 0?i.visible:!0),g=window.usePageStore(w=>w.mode);a.useImperativeHandle(s,()=>({show(){b(!0)},hide(){b(!1)}}));const y=Gt(l,t,"right"),d=Gt(l,t,"center"),{center:m=[],right:f=[]}=a.useMemo(()=>{const w=[],S=[];return o==null||o.forEach(v=>{const{pos:I}=v;I==="center"?w.push(v):I==="right"&&S.push(v)}),{center:w,right:S}},[o]),u=fo(),h=window.AppsRender,C=window.$translation;return a.useEffect(()=>{b(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),p&&e.jsxs(Yr,{className:`${i.bigScreen?"bigScreen":""}`,style:c,children:[e.jsxs(Xe,{justify:"between",align:"center",className:"header",children:[e.jsx("span",{style:{color:i.color},className:"mr-20px flex-1 font-size-20px font-bold color-white card_title",children:i.title}),e.jsx("div",{className:"action",ref:y,children:f.length?e.jsx(h,{inner:!1,elements:f}):g==="edit"?e.jsx("div",{className:`${u} h-[calc(100%-72px)]`,children:C("edl.component.containerComponent.dragDesc")}):null})]}),e.jsx("main",{ref:d,className:`${m.length?"":u} card-body h-[calc(100%-35px)]`,children:m.length?e.jsx(h,{inner:!1,elements:m}):g!=="edit"?"":C("edl.component.containerComponent.dragDesc")})]})},kp=a.forwardRef(Or),rl=window.$translation,Ap={attrs:[{type:"Title",label:rl("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Variable",label:rl("common.title"),name:"title"},{type:"ColorPicker",label:rl("edl.propertyConfig.basicCard.titleColor"),name:"color"},{type:"Switch",label:rl("edl.propertyConfig.basicCard.bigscreen"),name:"bigScreen"}],config:{props:{color:"#fff",title:rl("common.title"),bigScreen:!0,x:0,y:0},style:{height:300,borderRadius:"4px"}},events:[]},Qr=({id:l,config:n,elements:t},o)=>{const{props:r}=n,[s,i]=a.useState(r.visible!==void 0?r.visible:!0),c=Ze(l),p=window.$translation;a.useImperativeHandle(o,()=>({show(){i(!0)},hide(){i(!1)}}));const b=window.AppsRender;return a.useEffect(()=>{i(n.props.visible!==void 0?n.props.visible:!0)},[n.props.visible]),s&&e.jsxs("div",{style:n.style,ref:c,children:[r.title&&e.jsx("header",{children:r.title}),e.jsx(xe,{direction:"vertical",size:[0,20],children:t!=null&&t.length?e.jsx(b,{elements:t||[]}):e.jsx("div",{className:"slots",style:{height:100,lineHeight:"100px"},children:p("edl.component.containerComponent.dragDesc")})})]})},Fp=a.forwardRef(Qr),ko=window.$translation,Ep={attrs:[{type:"Title",label:ko("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Input",label:ko("common.title"),name:"title"}],config:{props:{x:0,y:0,title:"",visible:!0},style:{padding:"20px"},events:[],api:{},source:""},events:[]},Ur=({id:l,type:n,config:t,elements:o,onLoad:r,onUpdate:s},i)=>{const{mode:c}=window.usePageStore(it(C=>({addChildElements:C.addChildElements,mode:C.mode}))),{setVisible:p,loading:b,visible:g,getDataList:y,data:d}=Ie(t),{props:m}=t,f=window.$translation,u=Ze(l),h=window.AppsRender;return a.useImperativeHandle(i,()=>({show(){p(!0)},hide(){p(!1)},update(C){y(C)}})),a.useEffect(()=>{s&&s(d)},[d]),$l(()=>{r&&r()}),a.useEffect(()=>{p(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),g&&e.jsxs("div",{ref:u,className:c==="edit"?"position-relative border-dashed":"position-relative",style:t.style,children:[e.jsx(pt,{spinning:b,children:m.title&&e.jsx("div",{className:"color-#333 font-bold position-absolute translate-x-20px translate-y-16px",children:m.title})}),o!=null&&o.length?e.jsx(h,{inner:m.free,elements:o}):e.jsx("div",{className:"slots",style:{height:"100%"},children:c!=="edit"?"":f("edl.component.containerComponent.dragDesc")})]})},Dp=a.memo(a.forwardRef(Ur)),Ut=window.$translation,Np={attrs:[{type:"Title",label:Ut("edl.propertyConfig.basicConfig"),key:"basic"},{type:"Input",label:Ut("edl.propertyConfig.basicCard.title"),name:"title"},{type:"Switch",label:Ut("edl.propertyConfig.basicCard.freeEdit"),name:"free"}],config:{props:{free:!1,title:"",x:0,y:0,visible:!0},style:{padding:"0px",backgroundColor:"#fff",width:"100%",height:"500px",boxShadow:""},events:[],api:{sourceType:"json",source:{}}},events:[{value:"onLoad",name:Ut("edl.propertyConfig.basicCard.onload")},{value:"onUpdate",name:Ut("edl.propertyConfig.basicCard.onUpdate")}],methods:[{name:"update",title:Ut("edl.component.componentSchema.updateData")}]},qr=Dt.div`
  position: relative;
`,Jr=a.memo(({item:l,data:n})=>{var f,u,h,C,w,S;const{locale:t}=a.useContext(Xt.ConfigContext),[o,r]=a.useState(null),[s,i]=a.useState(),{elementsMap:c,selectedElement:p,variableData:b,formData:g}=window.usePageStore(it(v=>{var j;const I=v.page[((j=v.selectPageItem)==null?void 0:j.id)||""];return{elementsMap:I.elementsMap,variables:I.variables,variableData:I.variableData,formData:I.formData,selectedElement:v.selectedElement}}));a.useEffect(()=>{if(!c[l.id])return;const{remoteUrl:v,remoteCssUrl:I,config:j,type:k}=c[l.id];v?(Rl(l.type,I),Qt(v||"",k).then(T=>{Object.keys(T).length&&r(()=>T)})):r(window.$Components[l.type]),i(j||{props:{},events:{},api:{}})},[]);const y=v=>{var I,j,k,T,A;if((I=v.props)!=null&&I.formItem){const F=((j=v.props)==null?void 0:j.formItem.rules)||[];F.map(M=>{M.pattern&&(M.pattern=new RegExp(M.pattern))}),v.props.formItem.rules=F,(k=l.parentId)!=null&&k.startsWith("FormList")&&v.props.formItem.name&&(v.props.formItem.name=[l.name,v.props.formItem.name]);const{labelCol:E,wrapperCol:D}=v.props.formItem;yt(E==null?void 0:E.span)&&yt(E==null?void 0:E.offset)&&((T=v.props.formItem)==null||delete T.labelCol),yt(D==null?void 0:D.span)&&yt(D==null?void 0:D.offset)&&((A=v.props.formItem)==null||delete A.wrapperCol)}},d=v=>{Object.keys(v.props||{}).map(I=>{const j=v.props[I];typeof j=="object"&&((j==null?void 0:j.type)==="static"?v.props[I]=j.value:(j==null?void 0:j.type)==="variable"&&(v.props[I]=so(j.value)))})};a.useEffect(()=>{var v;(v=c[l.id])!=null&&v.config&&i(()=>ul(c[l.id].config,I=>{y(I),d(I)}))},[b,g,c]);const m=()=>{const v={},I=(s==null?void 0:s.events)||[];if(!(I!=null&&I.length))return{};const j={};I.forEach(k=>{var T;((T=k.actions)==null?void 0:T.length)>0&&(j[k.eventName]=(j[k.eventName]||[]).concat([k.actions]))});for(const k in j)Object.prototype.hasOwnProperty.call(j,k)&&(v[k]=T=>{j[k].forEach(A=>{gt(A,T)})});return v};if(o){const{zIndex:v,...I}=(s==null?void 0:s.props)||{},j={position:"absolute",transform:`translate(${(f=s==null?void 0:s.props)==null?void 0:f.x}px, ${((u=s==null?void 0:s.props)==null?void 0:u.y)||0}px)`,zIndex:v,width:(h=s==null?void 0:s.style)==null?void 0:h.width,height:(C=s==null?void 0:s.style)==null?void 0:C.height},k=s==null?void 0:s.api,T=Ne(k);return k&&k.sourceType==="parent"&&(T.source=n),e.jsx(qr,{"data-sub-id":l.id,"data-type":l.type,id:l.id,style:j,className:`${(p==null?void 0:p.id)===l.id?"active materials-item":"materials-item"}`,children:e.jsx(a.Suspense,{fallback:e.jsx(mo,{}),children:e.jsx(o,{locale:t,className:"apps-component",id:l.id,type:l.type,config:{...s,api:T,props:I||{},style:{...(s==null?void 0:s.style)||{},width:((w=s==null?void 0:s.style)==null?void 0:w.width)||"",height:((S=s==null?void 0:s.style)==null?void 0:S.height)||""}},bigScreenElements:l.bigScreenElements||{},elements:l.elements||[],...m(),ref:A=>po(l.id,A)})})})}return null}),ia=a.createContext({backgroundColor:"#fff",gap:"20px",emptyText:"暂无设计信息"});function Kr({data:l,elements:n}){const t=a.useContext(ia),{emptyText:o,...r}=t;return n.length===0?e.jsx("div",{style:r,className:"bg-gray-200  grid place-items-center color-gray",children:o}):e.jsx("div",{style:r,className:"w-100px h-100px",children:n.filter(s=>s).map((s,i)=>e.jsx(Jr,{item:s,data:l},i))})}const Gr=a.memo(Kr),Zr=a.memo(({elements:l,data:n})=>e.jsx(e.Fragment,{children:n.filter(t=>t).map((t,o)=>e.jsx(Gr,{elements:l,data:t},`container${o}`))})),_r=({id:l,type:n,config:t,elements:o,onLoad:r,onUpdate:s},i)=>{const{mode:c}=window.usePageStore(it(w=>({mode:w.mode}))),{setVisible:p,loading:b,visible:g,getDataList:y,data:d}=Ie(t),{props:m}=t,f=window.$translation;a.useImperativeHandle(i,()=>({show(){p(!0)},hide(){p(!1)},update(w){y(w)}}));const u=a.useMemo(()=>Array.isArray(d)?d:(console.error("ListContainer data must be an array"),[]),[d]);a.useEffect(()=>{s&&s(d)},[d]),$l(()=>{r&&r()});const{subModule:h,layout:C}=m;return a.useEffect(()=>{p(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),g&&e.jsx("div",{className:c==="edit"?"position-relative border-dashed border-4 border-gray-300":"position-relative",style:t.style,children:e.jsxs(ia.Provider,{value:h,children:[m.title&&e.jsx("div",{style:{fontSize:m.titleFontSize,color:m.titleColor},className:"mb-12px font-bold px-20px py-6px",children:m.title}),e.jsxs(Xe,{...C,className:"px-20px py-6px",children:[e.jsx(pt,{spinning:b}),u!=null&&u.length?e.jsx(Zr,{elements:o||[],data:u}):e.jsx("div",{className:"slots",style:{height:"100%"},children:f("common.noData")})]})]})})},Pp=a.memo(a.forwardRef(_r)),{Option:Lt}=W,Et=({value:l,onChange:n,...t})=>{const{t:o}=gl(),[r,s]=a.useState(""),[i,c]=a.useState("px");a.useEffect(()=>{const y=l==null?void 0:l.toString(),d=y==null?void 0:y.replace(/(px|%|vw|vh|em|rem|auto)/,"");d&&s(d);const m=new RegExp("(px|%|vw|vh|em|rem|auto)"),f=y==null?void 0:y.match(m);f&&c(f[0])},[l]);const p=y=>{y||y===0?(s(y),n(i==="auto"?i:y+i)):(s(null),n(""))},b=y=>{c(y),r!==null&&r!==""&&n(r+y),y==="auto"&&n(y)},g=e.jsxs(W,{defaultValue:"px",value:i,onChange:b,size:"small",style:{width:60},children:[e.jsx(Lt,{value:"px",children:"px"}),e.jsx(Lt,{value:"%",children:"%"}),e.jsx(Lt,{value:"vw",children:"vw"}),e.jsx(Lt,{value:"vh",children:"vh"}),e.jsx(Lt,{value:"em",children:"em"}),e.jsx(Lt,{value:"rem",children:"rem"}),e.jsx(Lt,{value:"auto",children:"auto"})]});return e.jsx(It,{placeholder:o("edl.styleConfig.inputSize")+": 10",...t,addonAfter:g,value:r,controls:!1,onChange:y=>p(y),style:{width:"100%"}})},Ao=window.$translation;function Xr(){var b;const{setPageBuildType:l,config:n,selectedElement:t,setSelectedElement:o,buildType:r}=window.usePageStore(g=>{var h;const{selectPageItem:y,selectedElement:d,setSelectedElement:m,setPageBuildType:f}=g,u=g.page[(y==null?void 0:y.id)||""]||{};return{setPageBuildType:f,buildType:(u==null?void 0:u.buildType)||"web",selectedElement:d,setSelectedElement:m,config:((h=u==null?void 0:u.elementsMap[(d==null?void 0:d.id)||""])==null?void 0:h.config)||{}}}),{subSelectedElement:s,saveSubPageInfo:i,subSetSelectedElement:c}=sa(g=>({subSelectedElement:g.selectedElement,subSetSelectedElement:g.setSelectedElement,saveSubPageInfo:g.savePageInfo})),p=a.useCallback(()=>{var y;const g=r==="web"?t:s;fl.set("selectedElementId",(g==null?void 0:g.id)||""),r==="web"?(i({type:"style",style:(y=n==null?void 0:n.props)==null?void 0:y.subModule}),l("subPanel"),o(null)):c(null)},[r,(b=n==null?void 0:n.props)==null?void 0:b.subModule]);return e.jsx(x.Item,{label:Ao("common.edit"),children:e.jsx(ee,{onClick:p,type:"primary",size:"small",children:Ao("common.edit")})},"editContainer")}const es=a.memo(Xr),ae=window.$translation,$p={attrs:[{type:"Title",label:ae("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"function",label:"editContainer",render(){return e.jsx(es,{})}},{type:"Collapse",label:ae("common.title"),props:{items:[{type:"Input",label:ae("edl.propertyConfig.basicCard.title"),name:"title"},{type:"function",label:ae("edl.styleConfig.fontSize"),name:"titleFontSize",render:()=>e.jsx(x.Item,{label:ae("edl.styleConfig.fontSize"),name:"titleFontSize",children:e.jsx(Et,{})},"titleFontSize")},{type:"ColorPicker",label:ae("common.Color"),name:"titleColor"}]}},{type:"Collapse",label:ae("edl.component.containerComponent.layoutSet"),props:{items:[{type:"InputNumber",label:ae("edl.component.componentSchema.gap"),name:["layout","gap"]},{type:"Switch",label:ae("edl.propertyConfig.basicSpace.autoWrap"),name:["layout","wrap"]},{type:"Switch",label:ae("edl.component.containerComponent.veticalLayout"),name:["layout","vertical"]},{type:"Select",label:ae("edl.styleConfig.justifyContent"),name:["layout","justify"],props:{options:[{label:ae("edl.styleConfig.flexStart"),value:"start"},{label:ae("edl.styleConfig.flexEnd"),value:"end"},{label:ae("edl.styleConfig.center"),value:"center"},{label:ae("edl.styleConfig.spaceBetween"),value:"space-between"},{label:ae("edl.styleConfig.spaceAround"),value:"space-around"}]}},{type:"Select",label:ae("edl.styleConfig.alignItems"),name:["layout","align"],props:{options:[{label:ae("edl.styleConfig.top"),value:"start"},{label:ae("edl.styleConfig.bottom"),value:"end"},{label:ae("edl.styleConfig.center"),value:"center"},{label:ae("edl.styleConfig.baselineAlign"),value:"baseline"},{label:ae("edl.styleConfig.stretch"),value:"stretch"},{label:ae("edl.styleConfig.auto"),value:"auto"}]}},{key:"subModule.gap",type:"InputNumber",label:ae("edl.component.featureComponent.space"),name:["layout","gap"]}]}},{type:"Collapse",label:ae("edl.component.containerComponent.submoduleSet"),props:{items:[{label:ae("edl.component.containerComponent.emptyText"),name:["subModule","emptyText"],type:"ColorPicker"},{label:ae("edl.propertyConfig.editorPage.backgroundColor"),name:["subModule","backgroundColor"],type:"ColorPicker"},{label:ae("edl.component.containerComponent.submoduleWidth"),type:"function",render:()=>e.jsx(x.Item,{label:ae("edl.component.containerComponent.submoduleWidth"),name:["subModule","width"],children:e.jsx(Et,{})},"subModule.width")},{label:ae("edl.component.containerComponent.submoduleHeight"),type:"function",render:()=>e.jsx(x.Item,{label:ae("edl.component.containerComponent.submoduleHeight"),name:["subModule","height"],children:e.jsx(Et,{})},"subModule.height")}]}}],config:{props:{free:!1,title:"",x:0,y:0,visible:!0,titleFontSize:"20px",titleColor:"#000000",layout:{gap:8,wrap:!1,vertical:!1,justify:"start",align:"center"},subModule:{backgroundColor:"#fff",emptyText:"暂无设计信息",width:"100px",height:"100px"}},style:{padding:"0px",backgroundColor:"#fff",width:"100%",height:"500px",boxShadow:""},events:[],api:{sourceType:"json",sourceDataType:zt.array,source:[{name:"value",value:"1"},{name:"value",value:"2"},{name:"value",value:"3"},{name:"value",value:"4"}]}},events:[{value:"onLoad",name:ae("edl.propertyConfig.basicCard.onload")},{value:"onUpdate",name:ae("edl.propertyConfig.basicCard.onUpdate")}],methods:[{name:"update",title:ae("edl.component.componentSchema.updateData")}]},ts="/app/assets/png/icon-CG3yaE2E.png",ls="/app/assets/png/header-DCWcZvSN.png",os=Dt.div`
  background-color: #fff;
  &.bigScreen {
    background-color: unset;
    .card-body {
      background: linear-gradient(180deg, rgba(0, 0, 0, 0.2), #198fff20);
      backdrop-filter: blur(21px); /* 标准属性 */
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .header {
      background: url(${ls}) no-repeat left top / 100% 100%;
    }
    .card_title {
      &:before {
        display: inline-block;
        content: "";
        width: 22px;
        height: 22px;
        background: url(${ts}) no-repeat center center / 100% 100%;
        vertical-align: middle;
        margin-right: 10px;
      }
    }
  }
  .header {
    position: relative;
    /* padding: 2px 0 2px 8px; */
    padding: 2px 10px 2px 8px;
    height: 42px;
    .action {
      display: flex;
      justify-content: flex-end;
      align-items: flex-start;
      position: absolute;
      height: fit-content;
      right: 10px;
      top: 16px;
      z-index: 2;
      min-width: 30%;
      width: fit-content;
    }
  }
`;function as(l){return l.reduce((n,t)=>(n[t.key]=t.value,n),{})}const ns=l=>{const{eventItem:n,meta2d:t}=l,{params:o,value:r}=n,s=a.useRef(),[i,c]=a.useState(null),p=(b,g)=>{const y=b.filter(m=>m.type==="text/css").map(m=>m.fileUrl)[0],d=b.filter(m=>m.type==="text/javascript").map(m=>m.fileUrl)[0];y&&Rl(g,y),d&&Qt(d,g,void 0).then(m=>{c(()=>m)}).catch(m=>{console.log("topo load modal module fail",m)})};return a.useEffect(()=>{try{const{componentDetail:b}=JSON.parse(o),g=JSON.parse(b);p(g,r)}catch(b){console.log("error",b)}},[o,r]),a.useEffect(()=>{if(s.current){const b=g=>{const{pen:y,params:d}=g,m={},f=(y.form||[]).map(u=>u.dataIds);m.dataIds=f;try{const{customParams:u}=JSON.parse(d)||{};Array.isArray(u)?m.customParams=as(u):m.customParams=JSON.parse(u||"{}")}catch(u){console.log("解析额外参数失败",u),m.customParams={}}console.log("topo modal info",m),s.current&&s.current.open(m)};return t.on(r,b),()=>{t.off(r,b)}}},[t,r,s.current,i]),i?e.jsx(i,{ref:s}):null};function rs(l){const n=[];return l.forEach(t=>{n.some(o=>o.value===t.value)||n.push(t)}),n}const ss=({meta2dInstance:l})=>{const[n,t]=a.useState([]),[o,r]=a.useState(l),s=i=>{if(!i)return;r(i);const c=i.store.data.pens;if(Array.isArray(c)&&c.length){const p=[];c.forEach(y=>{const{events:d}=y;Array.isArray(d)&&d.length&&p.push(...d)});const b=p.filter(y=>y.action===Ea.Emit&&y.value&&y.params),g=rs(b);t([...g])}};return a.useEffect(()=>(Dl.on("PEN_EVENTS_CHANGE",s),()=>{Dl.off("PEN_EVENTS_CHANGE",s)}),[]),a.useEffect(()=>{s(l)},[l]),e.jsx(e.Fragment,{children:Array.isArray(n)&&n.length&&o?n.map(i=>e.jsx(ns,{meta2d:o,eventItem:i},i.value)):null})};function is(l){var n,t,o,r,s;if(!(l.id&&l.id.includes("-moving"))){const i=(o=(t=(n=l==null?void 0:l.calculative)==null?void 0:n.canvas)==null?void 0:t.externalElements)==null?void 0:o.parentElement,c=i==null?void 0:i.querySelectorAll('[id*="-moving"]');c==null||c.forEach(p=>{p.remove()})}(s=(r=l==null?void 0:l.calculative)==null?void 0:r.singleton)!=null&&s.div&&Xl(l,l.calculative.singleton.div)}function ps(l){var n;l.calculative&&l.calculative.singleton&&l.calculative.singleton.div&&((n=l.calculative.singleton.mountRoot)==null||n.unmount(),l.calculative.singleton.div.remove(),delete l.calculative.singleton.div,delete l.calculative.singleton.mountRoot)}function cs(l,n){var o,r,s;const t=new Path2D;if(l.onDestroy||(l.onDestroy=ps,l.onMove=is),l.calculative||(l.calculative={}),l.calculative.singleton||(l.calculative.singleton={}),l.calculative.singleton.div)return Xl(l,l.calculative.singleton.div),t;if(!l.calculative.singleton.div){const i=l.calculative.worldRect,c=document.createElement("div");c.style.position="absolute",c.style.outline="none",c.style.width=i.width+"px",c.style.height=i.height+"px",c.style.background="transparent",c.style.pointerEvents="auto",c.style.overflow="hidden",c.id=l.id;const p=Da.createRoot(c);p.render(e.jsx(n,{pen:l,canvas:l.calculative.canvas})),l.calculative.singleton.div=c,l.calculative.singleton.mountRoot=p,(s=(r=(o=l.calculative.canvas)==null?void 0:o.externalElements)==null?void 0:r.parentElement)==null||s.appendChild(c),Xl(l,c)}return t}function ds(l,n){Na({[l]:t=>cs(t,n)})}function ms(l){const[n,t]=a.useState(1),o=a.useRef(null),r=()=>{console.log("handleClick=====123=1==="),t(n+1)};return a.useEffect(()=>(o.current=setInterval(()=>{t(s=>s+1)},1e3),()=>{clearInterval(o.current)}),[]),e.jsxs("div",{className:"react-component",style:{backgroundColor:"red",height:"100%"},children:[e.jsx("div",{children:"我是一个自定义react组件"}),e.jsx("div",{style:{color:"blue"},children:n}),e.jsx("button",{type:"button",onClick:r,children:"点击增加"})]})}const us={title:"",titleI18n:void 0,category:yn.SCENE,tags:[],logoInfo:null,layout:1,theme:2,breadcrumb:to.ENABLE,isVirtualData:0,type:0,international:hn.DISABLE,statusFunction:[]};function bs(){const{t:l}=gl(),[n]=x.useForm(),t=async()=>{const o=await n.validateFields().catch(r=>{console.log("form validate fail",r)});console.log("准备提交=====",o)};return $l(()=>{console.log("FormCustomComp 组件挂载")}),Yo(()=>{console.log("FormCustomComp 组件卸载了")}),e.jsxs(x,{form:n,initialValues:us,layout:"vertical",className:"max-h-500px overflow-x-hidden overflow-y-auto",children:[e.jsx(x.Item,{name:"projectId",label:"Project Id",hidden:!0,children:e.jsx(O,{})}),e.jsx(x.Item,{name:"layout",label:l("apl.layout"),rules:[{required:!0,message:l("common.pleaseSelect",{addSpaceAfterEn:!0})+l("apl.layout",{lowerCase:!0})}],children:e.jsx(he.Group,{children:gn.map(o=>e.jsx(he,{value:o.value,children:e.jsx("img",{style:{width:150},src:o.src,alt:o.label})},o.value))})}),e.jsx(x.Item,{name:"theme",label:l("apl.theme"),rules:[{required:!0,message:l("common.pleaseSelect",{addSpaceAfterEn:!0})+l("apl.theme",{lowerCase:!0})}],children:e.jsx(he.Group,{children:Cn.map(o=>e.jsx(he,{value:o.value,children:l(o.label)},o.value))})}),e.jsx(x.Item,{hidden:!0,name:"statusFunction",label:l("apl.statusFunction"),children:e.jsx(eo.Group,{children:vn.map(o=>e.jsx(eo,{value:o.value,children:l(o.label)},o.value))})}),e.jsx(x.Item,{name:"breadcrumb",label:l("apl.breadcrumb"),rules:[{required:!0,message:l("common.pleaseSelect",{addSpaceAfterEn:!0})+l("apl.breadcrumb",{lowerCase:!0})}],children:e.jsx(Qe,{checkedChildren:l("common.open"),unCheckedChildren:l("common.close"),onChange:o=>{n.setFieldsValue({breadcrumb:o?to.ENABLE:to.DISABLE})}})}),e.jsx(x.Item,{children:e.jsx(ee,{type:"primary",htmlType:"submit",onClick:t,children:l("common.submit")})})]})}function fs({pen:l}){const[n,t]=a.useState(l),[o,r]=a.useState(),{customCompData:s,customCompConfig:i}=n||{},{carouselProps:c,rowNum:p,containerStyle:b,cardTitleContainerStyle:g,cardTitleStyle:y,rowContainerStyle:d,rowLabelStyle:m,rowValueStyle:f}=o||{};console.log("customCompData=======",s);const[u,h]=a.useState([]);a.useEffect(()=>{h([{id:"1",name:"1#01 这是标题数据",status:"正常",infoList:[{id:"1",label:"la1",value:"0.95kWh"},{id:"2",label:"lb1",value:"0.95kWh"},{id:"3",label:"lc1",value:"0.95kWh"},{id:"4",label:"la1",value:"0.95kWh"},{id:"5",label:"剩余电量",value:"0.95kWh"},{id:"6",label:"充电功率",value:"0.95kWh"}]},{id:"2",name:"2#01 这是标题数据",status:"异常",infoList:[{id:"1",label:"la1",value:"0.95kWh"},{id:"2",label:"lb1",value:"0.95kWh"},{id:"3",label:"lc1",value:"0.95kWh"},{id:"4",label:"la1",value:"0.95kWh"}]}])},[]);const C=()=>{t({...l})};return a.useEffect(()=>{if(i&&i.trim())try{r(JSON.parse(i))}catch(w){console.log("自定义组件配置解析失败",w)}},[i]),a.useEffect(()=>(Dl.on(`${l.id}`,C),()=>{Dl.off(`${l.id}`,C)}),[C,l.id]),e.jsx(Oo,{...c,children:u.map(w=>{const{id:S,name:v,status:I,infoList:j}=w;return e.jsx(a.Fragment,{children:e.jsxs("div",{style:{...b},children:[e.jsxs("div",{style:g,children:[e.jsx("span",{style:y,children:v||"--"}),e.jsx("span",{children:I})]}),e.jsx(Oe,{gutter:16,children:j.map(k=>{const{id:T,label:A,value:F}=k;return e.jsxs(ne,{span:Math.floor(24/(p||2)),style:d,children:[e.jsx("div",{style:m,children:A}),e.jsx("div",{style:f,children:F})]},T)})})]},S)},S)})})}const ys=[{name:"表单",icon:"l-rect",id:1,component:bs,data:{name:"formCustomComp",x:100,y:100,width:200,height:200}},{name:"计时器",icon:"l-rect",id:2,component:ms,data:{name:"myComp",x:100,y:100,width:200,height:200}},{name:"数据展示",icon:"l-rect",id:3,component:fs,data:{name:"dataViewContainer",x:100,y:100,width:600,height:400,customCompConfig:`
      {
        "carouselProps": {
          "autoplay": true,
          "autoplaySpeed": 1000
        },
        "rowNum": 2,
        "containerStyle": {
          "height": "200px",
          "padding": "10px",
          "background": "pink",
          "overflow": "auto"
        },
        "cardTitleContainerStyle": {
          "height": "30px",
          "display": "flex",
          "alignItems": "center",
          "justifyContent": "space-between"
        },
        "cardTitleStyle": {
          "fontSize": "20px",
          "color": "yellow",
          "whiteSpace": "nowrap",
          "overflow": "hidden",
          "textOverflow": "ellipsis",
          "fontWeight": 800
        },
        "rowContainerStyle": {
          "display": "flex",
          "alignItems": "center",
          "justifyContent": "space-between"
        },
        "rowLabelStyle": {
          "fontSize": 18,
          "color": "blue",
          "width": "60px",
          "whiteSpace": "nowrap",
          "overflow": "hidden",
          "textOverflow": "ellipsis",
          "fontWeight": 500
        },
        "rowValueStyle": {
          "fontSize": 18,
          "color": "skyblue",
          "fontWeight": 500
        }
      }`}}],hs={color:"#444444",grid:!1,gridColor:"#e2e2e2",gridSize:25,rule:!1,ruleColor:"#888888",activeColor:"#278df8"},gs=window.$translation,Cs=({id:l,type:n,config:t},o)=>{const{props:r,style:s}=t,[i,c]=a.useState(r.visible!==void 0?r.visible:!0),[p,b]=a.useState(),{topoJson:g}=r,y=`${l}Topo`;return a.useEffect(()=>{if(l){if(!g)return;const d=new Pa(y,hs);d.register($a()),d.registerAnchors(Ma()),d.register(Va()),d.registerCanvasDraw(Ra()),d.register(Wa()),d.register(Ba()),d.registerCanvasDraw(La()),d.registerCanvasDraw(Ha()),d.registerCanvasDraw(za()),d.register(Ya()),d.registerCanvasDraw(Oa()),d.registerAnchors(Qa()),ys.forEach(f=>{const{component:u,data:h}=f||{};h.name&&ds(h.name,u)}),b(d);let m;try{m=JSON.parse(g),m.websocket=xn(),m.locked=1,d==null||d.open(m),d.fitView(!0),m.websocketPayload&&(d.websocket.onopen=()=>{d.websocket.readyState===WebSocket.OPEN&&d.websocket.send(JSON.stringify(m.websocketPayload))})}catch{window.$message.error(gs("edl.component.containerComponent.jsonFail"))}}},[g,l]),Yo(()=>{var d,m,f;try{(d=p==null?void 0:p.destroy)==null||d.call(p),(m=p==null?void 0:p.closeHttp)==null||m.call(p),(f=p==null?void 0:p.closeWebsocket)==null||f.call(p)}catch(u){console.log(u)}}),a.useImperativeHandle(o,()=>({show(){c(!0)},hide(){c(!1)}})),a.useEffect(()=>{c(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),i&&e.jsxs(os,{style:s,children:[r.title&&e.jsx("header",{className:"flex items-center justify-between header",children:e.jsx("span",{style:{color:r.color},className:"mr-20px font-size-20px font-bold color-white card_title",children:r.title})}),e.jsx("main",{id:y,className:`card-body overflow-hidden ${r.title?"h-[calc(100%-42px)]":"h-full"}`}),p&&g?e.jsx(ss,{meta2dInstance:p}):null]})},Mp=a.forwardRef(Cs),vs=oo()((l,n)=>({topoJson:"",topoSelections:{mode:jl.FILE,pen:void 0,pensArr:[]},setTopoJson:t=>{l({topoJson:t})},setTopoSelections:t=>{if(!t){l({topoSelections:{mode:jl.FILE,pen:void 0,pensArr:[]}});return}if(t.length===1){l({topoSelections:{mode:jl.PEN,pen:t[0],pensArr:t}});return}t.length>1&&l({topoSelections:{mode:jl.PEN,pen:t[0],pensArr:t}})},isPen:()=>n().topoSelections.pensArr.length===1,isPens:()=>n().topoSelections.pensArr.length>1}));function xs({form:l}){const{setPageBuildType:n,buildType:t,selectedElement:o}=window.usePageStore(c=>{const{selectPageItem:p,setPageBuildType:b,selectedElement:g}=c,y=c.page[(p==null?void 0:p.id)||""]||{};return{setPageBuildType:b,buildType:y.buildType||"web",selectedElement:g}}),r=window.$translation,{setTopoJson:s}=vs(c=>({setTopoJson:c.setTopoJson})),i=a.useCallback(()=>{s(l.getFieldValue("topoJson")),n("topo"),localStorage.setItem("selectedElement",JSON.stringify(o))},[t]);return e.jsx(ee,{type:"primary",onClick:i,children:r("common.edit")})}function ws({form:l}){const{editElement:n,selectedElement:t}=window.usePageStore(s=>({selectedElement:s.selectedElement,editElement:s.editElement})),o=window.$translation,r=s=>{if(!(s.type==="application/json"||s.name.endsWith(".json")))return window.$message.error(o("resource.file_format_error")),!1;if(!(s.size/1024/1024<5))return window.$message.error(o("resource.fileNameUploadLimitSize",{fileName:s.name,size:5})),!1;const p=new FileReader;return p.onload=b=>{var g;if(l.setFieldValue("topoJson",(g=b.target)==null?void 0:g.result),t!=null&&t.id){const y=l.getFieldsValue();n({id:t.id,type:"props",props:y})}},p.readAsText(s),!1};return e.jsx(Pl,{maxCount:1,beforeUpload:r,accept:".json",children:e.jsx(ee,{icon:e.jsx(no,{}),children:o("common.selectFile")})})}const Nt=window.$translation,Vp={attrs:[{type:"Title",label:Nt("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Variable",label:Nt("common.title"),name:"title"},{type:"ColorPicker",label:Nt("edl.propertyConfig.basicCard.titleColor"),name:"color"},{type:"function",label:Nt("common.edit"),key:"edit",render(l){return e.jsx(x.Item,{name:["script"],label:Nt("common.edit"),children:e.jsx(xs,{form:l})},"edit")}},{type:"function",label:Nt("edl.component.containerComponent.uploadJson"),key:"upload",render(l){return e.jsx(x.Item,{label:Nt("edl.component.containerComponent.uploadJson"),children:e.jsx(ws,{form:l})},"upload")}},{type:"TextArea",label:"topoJson",name:"topoJson",props:{disabled:!0}}],config:{props:{color:"#333",title:Nt("common.title"),topoJson:"",x:0,y:0,visible:!0},style:{height:"300px",width:"500px",borderRadius:"4px",backgroudColor:"#ffffff00"}},events:[]},Ss="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKsAAAAoCAYAAACBzApvAAAABHNCSVQICAgIfAhkiAAABclJREFUeF7tnE12EzkUhcs9YQiThsxwhow6rACzApIVtLMCYAXtrKDTK8CsAFgBzgoIExi2e5bTDBqGPenqe40cqlxS6T2p/FP20zl1kuPS79WnJ9WTqgZFIJRlOcStZ7hOcZ3guheKm/j7NdLNcb3F9W4wGHyN5YM6sQ6vInVhXpexvLT3P/98NC5+Kn71pvu3OH/09YZtaQTUmfo9D5RHDV6jvvzbWXA6/Y4M2YehcI1yX1ZvIh37mel2LSzqOlitlYP0N/w+3mCNCeolKnTRVibqxjoR1lg4Rl7zWCTN/c8PjmaI/8SbpiwuHv19M/HdQ53/we+xgT5FnJeSASups0KnpyiT7VoEpPsTf4aSMrYQ56wGq7MCMcu1znrSwlBAr5VF/Ua4/15QgVonCOJHo2TAWkYz/x6hte3CPJbQceDQ4MTCKqzSusbyXcf9i1tYHahv1lGKMs9gp+05rJRphoH6VKlXIzp02l9Y3dT/Aa2OTVe5OkrTezvtAGClPlMAey4Vyhdv32Hl1DrKEWgNac/RadNqvgcCK5vcaLtG372F1T0B0qruWpgD1uNdgfXT/QdvUR96R5rhP3gDvtzUBtYyEvRNXQcmr7szYOWzwt1dA8HV53yAhtHNE3KtbLvej6tuna1a1ntHw/JOeTooB/WlUlnMQ6BSvAxYCQ7bP9d2QgasL1DWLrqu/kK9TgjrDP/4XTJNla7w06Tq7tAI6WCbKMq7QFmMvwjbhFXTzmrcDFiZTZKHIBXW1DYqBmWtP7XlEVbpNHUFcEbaAnzxFQPk0GGlfFx+nGl0N1iL4gyicbcpOygsZG2AKNIlr/eyG7eSgcIYtBX9B7TnFC0KBut3Z/1MpJYgkrATDdYfWoo9BAarwSoYgs0owkEpyZsPXDQY0XMEBut2YH2Nzhkve/KAlwFLCQjsMTRpPfRjsHYP6wTCt+1f011xuiuuK4npCzxMSh9gpUVEPQQGa8ewSnumGk9hWVOyz03jdcsIlwEfXeG/CCvRuiVrsBqsMY68rj0hrPRfc7lDqyndQeKRQu+5XYPVYF0rrPRhAzIeftZsfXvdiQarwbp2WFkAQKOFlRwwZ3Svh8BgNVg3AqsDVnNeY440PENw6yEwWA3WjcHqgOVuof+UV7MmfEfp8fJng9Vg3TSsPN01w6X2EBis/YKVrqBWx3mMvJX7klNpWd4A3yEhQDdUeggWW7IGa8ewQtBT9yARepWGsNE9M61MbyP8v/EXBqXupwBwkk2B4Im2BA8B3+GiTuoXBpUDuBZdqJHXFy0tV3NEsOuDLJziYhar9raAYlOg67omAyfsxCCsbv06dgNb0q8c5PTbSta7nekkbOdew1rAWlXfwD04y1qZVTQeAgnUjGOwSpTCSJRYVoO1IiY003gIJN1gsEpUMlhrKrUuAyrWVeshiHWFwRpTyK3DuK3I7cXWYMuAujwJHoI2ffcW1i5fa6GF4DegYuEbYL31FhzqA9aqSAkegpDOvYNV+q74HC2ubevFSAvdh9jc+x4L0temR4P1h2LKMwR7A6voQce1lmDzqZRpUgKnffpXR8LE/Hwl4y+CwVpXDXrkegh6Z1n51uQuftiAPbPYkTFYw0M700PQO1iHkILf5dy18A0VGq6cJqJFPqgdrFinANYcD0G/YHXTa+50EtM05X5jt8OWAX4ZMzwEvYQ1Z3SmgBhL8xEWteHWMlhblwPatwyYWf9gddaVywHNO0Ax4FLv88TUqDr925pVJmWCh6CfsDpgt21heQCDr197j/eZZY1DqwS2v7BWLNgY/09wPYzL00kMfiOAXyectuW2RVjnAi1qbraKlhI/tmi7Vaq0O35JLWNvytY+KSrN3xdvI6euInAs/aJcIvDqMhAAXvxKHpcfouAOFo9aIvMT7xNRZsJIbseID6GhQCA52BrtEFg6ej3GSMtDKp0GVzb70Let3alOboDQDRoK7OsXoVlT0vD/AXeK+hDOCmaFAAAAAElFTkSuQmCC",Is="/app/assets/png/header-Duc8UuGr.png",js=Dt.div`
  position: relative;
  height: 100vh;
  font-family: Alibaba PuHuiTi;
  .top {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 70px;
    z-index: 9;
    background: url(${Is}) no-repeat center center / 900px 70px;
    .top-content {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
  }
  .pos-center {
    display: flex;
    align-items: center;
  }
  .baseLayout {
    display: flex;
    position: absolute;
    top: 92px;
    width: 400px;
    z-index: 3;
    gap: 20px;
  }
  .title {
    display: grid;
    place-items: center;
    height: 70px;
    .title-text {
      font-size: 34px;
      background: linear-gradient(180deg, #ffffff 0%, #b3eaff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
    }
  }
  .header-right {
    font-family: Microsoft YaHei;
    color: #ffffff;
    font-size: 16px;
    justify-content: flex-end;
    padding-right: 20px;
  }
  .side {
    height: calc(100vh - 112px);
    flex-direction: column;
  }
  .left {
    left: 20px;
  }
  .right {
    right: 20px;
  }
  .center {
    position: absolute;
    inset: 0;
    z-index: 1;
    background: linear-gradient(0deg, rgba(13, 36, 54, 0) 0%, #000000 100%);
  }
  .bottom {
    display: flex;
    align-items: center;
    position: absolute;
    bottom: 20px;
    left: 460px;
    right: 460px;
    height: 300px;
    gap: 20px;
  }
  .empty {
    display: grid;
    place-items: center;
    font-size: 16px;
    color: #333;
  }
`,Ts=({id:l,type:n,config:t,bigScreenElements:o,onClickLogo:r},s)=>{var te,P;const{mode:i}=window.usePageStore(it(J=>({mode:J.mode}))),c=window.$translation,p=a.useRef(null),[b,{toggleFullscreen:g}]=Qo(p),[y,d]=a.useState(at().format("YYYY.MM.DD HH:mm:ss")),[m,f]=Uo({weather:"晴",temperature:"28℃"});a.useEffect(()=>{const J=setInterval(()=>{d(at().format("YYYY.MM.DD HH:mm:ss"))},1e3);return()=>{clearInterval(J)}},[]);const[u,h]=a.useState(!1),{props:C}=t,[w,S]=a.useState(C.visible!==void 0?C.visible:!0),{modules:v=[]}=C,I=Gt(l,t,"left"),j=Gt(l,t,"right"),k=Gt(l,t,"bottom"),T=Gt(l,t,"center"),{center:A=[],left:F=[],right:E=[],bottom:D=[]}=o,M=window.AppsRender;a.useImperativeHandle(s,()=>({show(){S(!0)},hide(){S(!1)},hideCard(){h(!0)},showCard(){h(!1)}}));const q=fo();return a.useEffect(()=>{S(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),w&&e.jsx("div",{className:i==="edit"?"border-green position-relative border-2 border-dashed":"position-relative",ref:p,children:e.jsxs(js,{children:[!u&&e.jsx("header",{className:"top",children:e.jsxs(Oe,{justify:"space-between",align:"stretch",gutter:20,children:[e.jsx(ne,{span:6,children:e.jsx("div",{onClick:()=>{r&&r()},className:"pos-center h-full pl-20px",children:e.jsx(St,{src:Ss,width:86,preview:!1})})}),e.jsx(ne,{span:12,children:e.jsx("div",{className:"title pos-center",children:e.jsx("div",{className:"h-full title-text pos-center ys",children:C.title})})}),e.jsx(ne,{span:6,children:e.jsxs(xe,{align:"center",size:12,className:"h-full w-full header-right",children:[e.jsx("span",{children:y}),e.jsx("span",{children:m.weather}),e.jsx("span",{children:m.temperature}),e.jsx("span",{className:`iconfont icon-${b?"huanyuan":"quanping"}`,onClick:g})]})})]})}),v.includes("left")&&!u&&e.jsx("div",{ref:I,style:C.left,className:`${q} side baseLayout left h-[calc(100%-72px)] ${F.length?"":"empty"}`,children:F.length>0?e.jsx(M,{elements:F}):i==="edit"?c("edl.component.containerComponent.dragDesc"):""}),v.includes("right")&&!u&&e.jsx("div",{ref:j,style:C.right,className:`${q}  side baseLayout right h-[calc(100%-72px)] ${E.length?"":"empty"}`,children:E.length>0?e.jsx(M,{elements:E}):i==="edit"?c("edl.component.containerComponent.dragDesc"):""}),v.includes("content")&&e.jsx("div",{ref:T,className:`${q} center ${A.length?"":"empty"}`,children:A.length?e.jsx(M,{elements:A}):i==="edit"?c("edl.component.containerComponent.dragDesc"):""}),v.includes("bottom")&&!u&&e.jsx("div",{style:{...C.bottom,left:(((te=C.left)==null?void 0:te.width)||420)+40,right:(((P=C.right)==null?void 0:P.width)||420)+40},ref:k,className:`${q}  bottom ${D.length?"":"empty"}`,children:D.length>0?e.jsx(M,{elements:D}):i==="edit"?c("edl.component.containerComponent.dragDesc"):""})]})})},Rp=a.memo(a.forwardRef(Ts));function Ul({name:l,keyName:n,label:t}){const o=window.$translation;return e.jsx(x.Item,{name:l,label:t,children:e.jsx(Et,{placeholder:o("common.pleaseInput")})},n)}const Ke=window.$translation,Wp={attrs:[{type:"Title",label:Ke("edl.propertyConfig.basicConfig"),key:"basic"},{type:"Input",label:Ke("edl.propertyConfig.basicCard.appName"),name:"title"},{type:"CheckboxGroup",label:Ke("edl.propertyConfig.basicCard.modules.title"),name:"modules",props:{options:[{label:Ke("edl.propertyConfig.basicCard.modules.left"),value:"left"},{label:Ke("edl.propertyConfig.basicCard.modules.right"),value:"right"},{label:Ke("edl.propertyConfig.basicCard.modules.top"),value:"top"},{label:Ke("edl.propertyConfig.basicCard.modules.bottom"),value:"bottom"},{label:Ke("edl.propertyConfig.basicCard.modules.center"),value:"content"}]}},{type:"function",label:Ke("edl.propertyConfig.basicCard.modules.leftWidth"),name:["left","width"],render(){return e.jsx(Ul,{label:Ke("edl.propertyConfig.basicCard.modules.leftWidth"),keyName:"leftWidth",name:["left","width"]})}},{type:"function",label:Ke("edl.propertyConfig.basicCard.modules.rightWidth"),name:["right","width"],props:{min:0},render(){return e.jsx(Ul,{label:Ke("edl.propertyConfig.basicCard.modules.rightWidth"),keyName:"rightWidth",name:["right","width"]})}},{type:"function",label:Ke("edl.propertyConfig.basicCard.modules.bottomHeight"),name:["bottom","height"],props:{min:0},render(){return e.jsx(Ul,{label:Ke("edl.propertyConfig.basicCard.modules.bottomHeight"),keyName:"bottomHeight",name:["bottom","height"]})}}],config:{props:{title:"实验中心智慧配电",modules:["left","right","top","bottom","content"],left:{width:400},right:{width:400},bottom:{height:200},x:0,y:0},style:{backgroundColor:"#fff",padding:"0"},events:[],api:{}},events:[{value:"onClickLogo",name:Ke("edl.propertyConfig.basicCard.clickLogo")}],methods:[{name:"hideCard",title:Ke("edl.propertyConfig.basicCard.hideCard")},{name:"showCard",title:Ke("edl.propertyConfig.basicCard.showCard")}]},pa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKsAAAAoCAYAAACBzApvAAAABHNCSVQICAgIfAhkiAAABclJREFUeF7tnE12EzkUhcs9YQiThsxwhow6rACzApIVtLMCYAXtrKDTK8CsAFgBzgoIExi2e5bTDBqGPenqe40cqlxS6T2p/FP20zl1kuPS79WnJ9WTqgZFIJRlOcStZ7hOcZ3guheKm/j7NdLNcb3F9W4wGHyN5YM6sQ6vInVhXpexvLT3P/98NC5+Kn71pvu3OH/09YZtaQTUmfo9D5RHDV6jvvzbWXA6/Y4M2YehcI1yX1ZvIh37mel2LSzqOlitlYP0N/w+3mCNCeolKnTRVibqxjoR1lg4Rl7zWCTN/c8PjmaI/8SbpiwuHv19M/HdQ53/we+xgT5FnJeSASups0KnpyiT7VoEpPsTf4aSMrYQ56wGq7MCMcu1znrSwlBAr5VF/Ua4/15QgVonCOJHo2TAWkYz/x6hte3CPJbQceDQ4MTCKqzSusbyXcf9i1tYHahv1lGKMs9gp+05rJRphoH6VKlXIzp02l9Y3dT/Aa2OTVe5OkrTezvtAGClPlMAey4Vyhdv32Hl1DrKEWgNac/RadNqvgcCK5vcaLtG372F1T0B0qruWpgD1uNdgfXT/QdvUR96R5rhP3gDvtzUBtYyEvRNXQcmr7szYOWzwt1dA8HV53yAhtHNE3KtbLvej6tuna1a1ntHw/JOeTooB/WlUlnMQ6BSvAxYCQ7bP9d2QgasL1DWLrqu/kK9TgjrDP/4XTJNla7w06Tq7tAI6WCbKMq7QFmMvwjbhFXTzmrcDFiZTZKHIBXW1DYqBmWtP7XlEVbpNHUFcEbaAnzxFQPk0GGlfFx+nGl0N1iL4gyicbcpOygsZG2AKNIlr/eyG7eSgcIYtBX9B7TnFC0KBut3Z/1MpJYgkrATDdYfWoo9BAarwSoYgs0owkEpyZsPXDQY0XMEBut2YH2Nzhkve/KAlwFLCQjsMTRpPfRjsHYP6wTCt+1f011xuiuuK4npCzxMSh9gpUVEPQQGa8ewSnumGk9hWVOyz03jdcsIlwEfXeG/CCvRuiVrsBqsMY68rj0hrPRfc7lDqyndQeKRQu+5XYPVYF0rrPRhAzIeftZsfXvdiQarwbp2WFkAQKOFlRwwZ3Svh8BgNVg3AqsDVnNeY440PENw6yEwWA3WjcHqgOVuof+UV7MmfEfp8fJng9Vg3TSsPN01w6X2EBis/YKVrqBWx3mMvJX7klNpWd4A3yEhQDdUeggWW7IGa8ewQtBT9yARepWGsNE9M61MbyP8v/EXBqXupwBwkk2B4Im2BA8B3+GiTuoXBpUDuBZdqJHXFy0tV3NEsOuDLJziYhar9raAYlOg67omAyfsxCCsbv06dgNb0q8c5PTbSta7nekkbOdew1rAWlXfwD04y1qZVTQeAgnUjGOwSpTCSJRYVoO1IiY003gIJN1gsEpUMlhrKrUuAyrWVeshiHWFwRpTyK3DuK3I7cXWYMuAujwJHoI2ffcW1i5fa6GF4DegYuEbYL31FhzqA9aqSAkegpDOvYNV+q74HC2ubevFSAvdh9jc+x4L0temR4P1h2LKMwR7A6voQce1lmDzqZRpUgKnffpXR8LE/Hwl4y+CwVpXDXrkegh6Z1n51uQuftiAPbPYkTFYw0M700PQO1iHkILf5dy18A0VGq6cJqJFPqgdrFinANYcD0G/YHXTa+50EtM05X5jt8OWAX4ZMzwEvYQ1Z3SmgBhL8xEWteHWMlhblwPatwyYWf9gddaVywHNO0Ax4FLv88TUqDr925pVJmWCh6CfsDpgt21heQCDr197j/eZZY1DqwS2v7BWLNgY/09wPYzL00kMfiOAXyectuW2RVjnAi1qbraKlhI/tmi7Vaq0O35JLWNvytY+KSrN3xdvI6euInAs/aJcIvDqMhAAXvxKHpcfouAOFo9aIvMT7xNRZsJIbseID6GhQCA52BrtEFg6ej3GSMtDKp0GVzb70Let3alOboDQDRoK7OsXoVlT0vD/AXeK+hDOCmaFAAAAAElFTkSuQmCC",ca="/app/assets/png/logo2-CBcZgrit.png",ks="/app/assets/gif/header5-GBYgEUqL.gif",As=Dt.div`
  position: relative;
  .top {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 70px;
    z-index: 9;
    background: url(${ks}) no-repeat center center / 100% 70px;
    .top-content {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
  }
  @keyframes widthAnimate {
    0% {
      width: 0px;
    }
    100% {
      width: 570px;
    }
  }
  .pos-center {
    display: flex;
    align-items: center;
  }
  .baseLayout {
    display: flex;
    position: absolute;
    top: 92px;
    width: 400px;
    z-index: 3;
    gap: 20px;
  }
  .title {
    display: grid;
    place-items: center;
    height: 70px;
    .title-text {
      font-size: 34px;
      /* background: linear-gradient(180deg, #ffffff 0%, #b3eaff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent; */
      display: grid;
      place-items: center;
      overflow: hidden;
      width: 0;
      animation: widthAnimate 4s linear 2s 1 normal forwards;
      white-space: nowrap;
      color: #ffffff;
    }
  }
  .header-right {
    font-family: Microsoft YaHei;
    color: #ffffff;
    font-size: 16px;
    justify-content: flex-end;
    padding-right: 20px;
  }
  .side {
    flex-direction: column;
  }
  .left {
    left: 20px;
  }
  .right {
    right: 20px;
  }
  .center {
    position: absolute;
    inset: 0;
    z-index: 1;
    background: linear-gradient(0deg, rgba(13, 36, 54, 0) 0%, #000000 100%);
  }
  .bottom {
    display: flex;
    align-items: center;
    position: absolute;
    bottom: 20px;
    left: 460px;
    right: 460px;
    height: 300px;
    gap: 20px;
    z-index: 3;
  }
  .empty {
    display: grid;
    place-items: center;
    font-size: 16px;
    color: #333;
  }
`,Fs=({id:l,type:n,config:t,elements:o,onClickLogo:r},s)=>{var P,J;const{mode:i}=window.usePageStore(it(se=>({mode:se.mode}))),c=window.$translation,p=a.useRef(null),[b,{toggleFullscreen:g}]=Qo(p),[y,d]=a.useState(at().format("YYYY.MM.DD HH:mm:ss"));Uo({weather:"晴",temperature:"28℃"}),a.useEffect(()=>{const se=setInterval(()=>{d(at().format("YYYY.MM.DD HH:mm:ss"))},1e3);return()=>{clearInterval(se)}},[]);const[m,f]=a.useState(!1),{props:u}=t,{showLogoText:h,logoSrc:C}=u,[w,S]=a.useState(u.visible!==void 0?u.visible:!0),{modules:v=[]}=u,I=Ze(l,t,"left"),j=Ze(l,t,"right"),k=Ze(l,t,"bottom"),T=Ze(l,t,"center"),{center:A=[],left:F=[],right:E=[],bottom:D=[]}=a.useMemo(()=>{const se=[],je=[],pe=[],ut=[];return o==null||o.forEach(He=>{const{pos:qe}=He;qe==="center"?se.push(He):qe==="left"?je.push(He):qe==="right"?pe.push(He):qe==="bottom"&&ut.push(He)}),{center:se,left:je,right:pe,bottom:ut}},[o]),M=window.AppsRender;a.useImperativeHandle(s,()=>({show(){S(!0)},hide(){S(!1)},hideCard(){f(!0)},showCard(){f(!1)}}));const q=fo(),te=a.useMemo(()=>C||(h?ca:pa),[C?"":h,C]);return a.useEffect(()=>{S(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),w&&e.jsxs(As,{style:t.style,ref:p,children:[!m&&e.jsx("header",{className:"top",children:e.jsxs(Oe,{justify:"space-between",align:"stretch",gutter:20,children:[e.jsx(ne,{span:6,children:e.jsx(Xe,{align:"center",gap:8,className:"pos-center h-full pl-20px",children:e.jsx(St,{src:te,onClick:()=>{r&&r()},width:C?86:h?129:86,preview:!1})})}),e.jsx(ne,{span:12,children:e.jsx("div",{className:"title pos-center",children:e.jsx("div",{className:"h-full title-text ys",children:u.title})})}),e.jsx(ne,{span:6,children:e.jsxs(xe,{align:"center",size:12,className:"h-full w-full header-right",children:[e.jsx("span",{children:y}),e.jsx(Te,{name:b?"huanyuan":"quanping",onClick:g})]})})]})}),v.includes("left")&&!m&&e.jsx("div",{ref:I,style:u.left,className:`${q} side baseLayout left h-[calc(100%-72px)] ${F.length?"":"empty"}`,children:F.length>0?e.jsx(M,{elements:F}):i==="edit"?c("edl.component.containerComponent.dragDesc"):""}),v.includes("right")&&!m&&e.jsx("div",{ref:j,style:u.right,className:`${q}  side baseLayout right h-[calc(100%-72px)] ${E.length?"":"empty"}`,children:E.length>0?e.jsx(M,{elements:E}):i==="edit"?c("edl.component.containerComponent.dragDesc"):""}),v.includes("content")&&e.jsx("div",{ref:T,className:`${q} center ${A.length?"":"empty"}`,children:A.length?e.jsx(M,{elements:A}):i==="edit"?c("edl.component.containerComponent.dragDesc"):""}),v.includes("bottom")&&!m&&e.jsx("div",{style:{...u.bottom,left:(((P=u.left)==null?void 0:P.width)||420)+40,right:(((J=u.right)==null?void 0:J.width)||420)+40},ref:k,className:`${q}  bottom ${D.length?"":"empty"}`,children:D.length>0?e.jsx(M,{elements:D}):i==="edit"?c("edl.component.containerComponent.dragDesc"):""})]})},Bp=a.memo(a.forwardRef(Fs)),Es=window.$translation,Ds=(l,n,t)=>{const{title:o,value:r}=l;if(o&&r)return e.jsxs(Xe,{gap:10,align:"center",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center justify-center",children:e.jsx(St,{width:n,height:t,className:"object-contain",src:r,preview:!1})}),e.jsx("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:o})]})};function xl({onChange:l,value:n="",type:t="icon",controlHeight:o=64,labelImgWidth:r=30,labelImgHeight:s=30}){const{icons:i,images:c}=window.usePageStore(d=>({icons:d.icons,images:d.images})),p=a.useMemo(()=>{let d=[];return t==="icon"?d=i:t==="image"?d=c:t==="all"&&(d=[...i,...c]),d.map(m=>({label:e.jsxs(Xe,{gap:10,align:"center",children:[e.jsx("div",{className:"w-[30px] h-[30px] flex-shrink-0",children:e.jsx(St,{width:"100%",height:"100%",className:"object-contain",src:m.fileUrl,preview:!1})}),e.jsx("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:m.name})]}),value:m.fileUrl,title:m.name}))},[i,c,t]),[b,g]=a.useState(n),y=a.useCallback(d=>{g(d),l&&l(d)},[b,l]);return a.useEffect(()=>{g(n||void 0)},[n]),e.jsx(Xt,{theme:{token:{controlHeight:o}},children:e.jsx(W,{style:{width:"100%"},placeholder:Es("common.pleaseSelect"),onChange:y,value:b,options:p,allowClear:!0,labelRender:d=>Ds(d,r,s)})})}function ql({name:l,keyName:n,label:t}){const o=window.$translation;return e.jsx(x.Item,{name:l,label:t,children:e.jsx(Et,{placeholder:o("common.pleaseInput")})},n)}const $e=window.$translation,Lp={attrs:[{type:"Title",label:$e("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Input",label:$e("edl.propertyConfig.basicCard.appName"),name:"title"},{type:"Collapse",key:"Logo",label:$e("edl.propertyConfig.basicCard.logoSet"),props:{items:[{type:"Switch",label:$e("edl.propertyConfig.basicCard.showLogoText"),name:"showLogoText"},{type:"function",key:"logoSet",render(){return e.jsx(x.Item,{label:$e("edl.component.containerComponent.selectLogo"),name:"logoSrc",children:e.jsx(xl,{type:"image"})},"icon")}}]}},{type:"CheckboxGroup",label:$e("edl.propertyConfig.basicCard.modules.title"),name:"modules",props:{options:[{label:$e("edl.propertyConfig.basicCard.modules.left"),value:"left"},{label:$e("edl.propertyConfig.basicCard.modules.right"),value:"right"},{label:$e("edl.propertyConfig.basicCard.modules.top"),value:"top"},{label:$e("edl.propertyConfig.basicCard.modules.bottom"),value:"bottom"},{label:$e("edl.propertyConfig.basicCard.modules.center"),value:"content"}]}},{type:"function",label:$e("edl.propertyConfig.basicCard.modules.leftWidth"),name:["left","width"],render(){return e.jsx(ql,{label:$e("edl.propertyConfig.basicCard.modules.leftWidth"),keyName:"leftWidth",name:["left","width"]})}},{type:"function",label:$e("edl.propertyConfig.basicCard.modules.rightWidth"),name:["right","width"],props:{min:0},render(){return e.jsx(ql,{label:$e("edl.propertyConfig.basicCard.modules.rightWidth"),keyName:"rightWidth",name:["right","width"]})}},{type:"function",label:$e("edl.propertyConfig.basicCard.modules.bottomHeight"),name:["bottom","height"],props:{min:0},render(){return e.jsx(ql,{label:$e("edl.propertyConfig.basicCard.modules.bottomHeight"),keyName:"bottomHeight",name:["bottom","height"]})}}],config:{props:{title:"实验中心智慧配电",visible:!0,logoText:"泰无界",showLogoText:!1,modules:["left","right","top","bottom","content"],left:{width:400},right:{width:400},bottom:{height:200},x:0,y:0},style:{backgroundColor:"",padding:"0",width:1920,height:1080},events:[],api:{}},events:[{value:"onClickLogo",name:$e("edl.propertyConfig.basicCard.clickLogo")}],methods:[{name:"hideCard",title:$e("edl.propertyConfig.basicCard.hideCard")},{name:"showCard",title:$e("edl.propertyConfig.basicCard.showCard")}]},Ns=l=>{const{addChildElements:n,addBusinessComponentToChildElements:t}=window.usePageStore(o=>({addChildElements:o.addChildElements,addBusinessComponentToChildElements:o.addBusinessComponentToChildElements}));return async(o,r,s,i)=>{if(o.createType===oa.FILE_UPLOAD){const{detail:c}=o;let p;try{p=JSON.parse(c)}catch{p=[],window.$message.error("组件文件缺失");return}const b=[],g=[];if(p.forEach(h=>{h.type==="text/javascript"?b.push(h.fileUrl):h.type==="text/css"&&g.push(h.fileUrl)}),b.length===0){window.$message.error("组件文件缺失");return}const{config:y,events:d,methods:m=[]}=await Qt(b[0],o.cmptEnName,!0),f=io(o.cmptEnName),u={remoteUrl:b[0],remoteCssUrl:g[0],type:o.cmptEnName,name:o.cmptName,config:{...y,props:{...y.props,x:r,y:s}},events:d,methods:m};n({...u,elements:[],parentId:l,id:f},i)}else{const{detail:c}=o;let p;try{p=JSON.parse(c)}catch{p={}}const{elements:b,elementsMap:g,variableData:y,variables:d}=bo(p);t({parentId:l,elements:b.map(m=>({...m,parentId:l})),elementsMap:g,variableData:y,variables:d},i)}}},da=l=>{const n=Ns(l),{addChildElements:t}=window.usePageStore(o=>({mode:o.mode,addChildElements:o.addChildElements}));return(o,r,s)=>{const i=r.getClientOffset(),c=document.querySelector(`[data-id="${l}"]`),p=la(c),b=(i==null?void 0:i.x)-p.left,g=(i==null?void 0:i.y)-p.top;if(o.origin==="base"){const{config:y,events:d,methods:m=[]}=window.$Components[o.type+"Config"]||{};t({type:o.type,name:o.name,parentId:l,id:o.id,config:{...y,props:{...y.props,x:b,y:g}},events:d,methods:m},s)}else n(o,b,g,s)}},Ps=a.memo(({icon:l,active:n,name:t,onClick:o})=>{const{token:r}=qo.useToken();return e.jsxs(Xe,{className:"w-100%",vertical:!0,align:"center",gap:8,onClick:o,style:{cursor:"pointer"},children:[l&&e.jsx("div",{className:"h-120px w-120px flex items-center justify-center",style:{borderRadius:"0 24px 0 24px",border:`1px solid ${n?r.colorPrimary:"transparent"}`,background:n?`linear-gradient( 180deg, rgba(92,181,49,0) 0%, ${r.colorPrimary} 100%)`:"transparent"},children:e.jsx(Te,{name:l,size:64})}),e.jsx("div",{className:"w-100%",style:{wordWrap:"break-word",textAlign:"center",color:n?r.colorTextLightSolid:r.colorTextPlaceholder},children:t})]})}),$s=({id:l,type:n,config:t,elements:o,onClickLogo:r},s)=>{const i=window.AppsRender,{mode:c}=window.usePageStore(it(D=>({mode:D.mode}))),p=window.$translation,{props:b}=t,{showLogoText:g,logoSrc:y,tabs:d,visible:m}=b,{Header:f,Sider:u,Content:h}=zl,[C,w]=a.useState(b.visible!==void 0?b.visible:!0),S=da(l);a.useImperativeHandle(s,()=>({show(){w(!0)},hide(){w(!1)}})),a.useEffect(()=>{w(m!==void 0?m:!0)},[m]);const v={token:{colorPrimary:"#5CB531",colorBgContainer:"#3A3936",colorPrimaryActive:"#6ED940",colorPrimaryHover:"#4CA02A"},components:{Layout:{bodyBg:"#282723",headerBg:"#3A3936",siderBg:"#282723",headerColor:"#999999"},Menu:{darkItemBg:"#35322E",darkItemColor:"#BBBBBB",darkItemHoverBg:"rgba(92,181,49,0.05)",itemBg:"#35322E",itemColor:"#BBBBBB",itemHoverBg:"rgba(92,181,49,0.05)"},Table:{headerBg:"#4E4D4B",headerColor:"#FFFFFF",rowHoverBg:"rgba(92,181,49,0.05)"},Segmented:{itemActiveBg:"#6ED940",itemSelectedBg:"#5CB531",itemSelectedColor:"#fff",trackBg:"#35322E"}}},[I,j]=a.useState(at().format("YYYY-MM-DD HH:mm:ss")),[k,T]=a.useState(0),A=a.useMemo(()=>(o==null?void 0:o.filter(D=>D.pos===k.toString()))||[],[o,k]);a.useEffect(()=>{const D=setInterval(()=>{j(at().format("YYYY-MM-DD HH:mm:ss"))},1e3);return()=>{clearInterval(D)}},[]);const F=a.useMemo(()=>y||(g?ca:pa),[y?"":g,y]),[,E]=Cl({accept:"MENU_ITEM",drop(D,M){M.didDrop()||S(D,M,k.toString())},collect:D=>({isOver:D.isOver(),canDrop:D.canDrop()})});return C&&e.jsx(Xt,{theme:v,children:e.jsx("div",{className:"hmi-container",style:t.style,children:e.jsxs(zl,{className:"w-100% h-100%",children:[e.jsxs(f,{className:"h-80px w-100% flex justify-between p-inline-40px items-center",children:[e.jsx(St,{src:F,width:y?124:g?129:86,preview:!1,onClick:()=>{r==null||r()}}),e.jsx("div",{className:"text-22px",children:I})]}),e.jsxs(zl,{style:{height:"calc(100% - 80px)"},children:[e.jsx(u,{width:175,className:"overflow-x-auto",children:e.jsx(Xe,{className:"w-100% p-block-60px p-inline-20px",vertical:!0,gap:60,align:"center",children:d.map((D,M)=>e.jsx(Ps,{active:k===M,onClick:()=>T(M),name:D.name,icon:D.icon},D.name+M.toString()))})}),e.jsx(h,{style:{width:"calc(100% - 175px)"},children:e.jsx("div",{className:"w-100% h-100% p-20px pl-0!",ref:E,children:A.length>0?e.jsx(i,{elements:A}):c==="edit"?p("edl.component.containerComponent.dragDesc"):""})})]})]})})})},Hp=a.forwardRef($s),Ms=a.memo(()=>{const l=window.$translation;return window.usePageStore(n=>({removeElementsByPos:n.removeElementsByPos})),e.jsx(x.Item,{label:l("edl.propertyConfig.basicHmiContainer.tabMenu"),children:e.jsx(x.List,{name:"tabs",children:(n,{add:t,remove:o})=>e.jsx(xe,{direction:"vertical",children:n.map(({key:r,name:s,...i})=>e.jsxs("div",{children:[e.jsx(x.Item,{...i,name:[s,"icon"],children:e.jsx(bl,{placeholder:l("edl.propertyConfig.basicHmiContainer.icon")})}),e.jsxs(xe,{style:{width:"100%"},align:"center",children:[e.jsx("div",{style:{width:"200px"},children:e.jsx(x.Item,{...i,name:[s,"name"],children:e.jsx(O,{placeholder:l("edl.propertyConfig.basicHmiContainer.name")})})}),e.jsxs(x.Item,{children:[e.jsx(Te,{name:"tianjia",onClick:()=>t({name:"",icon:void 0},s+1)}),s>0&&e.jsx(Te,{name:"jianqu",onClick:()=>{o(s)}})]})]},r),e.jsx(Jo,{})]},r))})})})}),qt=window.$translation,zp={attrs:[{type:"Title",label:qt("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Collapse",key:"logo",label:qt("edl.propertyConfig.basicCard.logoSet"),props:{items:[{type:"Switch",label:qt("edl.propertyConfig.basicCard.showLogoText"),name:"showLogoText"},{type:"function",key:"logoSet",render(){return e.jsx(x.Item,{label:qt("edl.component.containerComponent.selectLogo"),name:"logoSrc",children:e.jsx(xl,{type:"image"})},"icon")}}]}},{type:"Title",label:qt("edl.propertyConfig.basicHmiContainer.pageConfig"),key:"pageConfig"},{type:"function",render:()=>e.jsx(Ms,{},"page-setting")}],config:{props:{x:0,y:0,visible:!0,showLogoText:!1,logoSrc:"",tabs:[{name:"",icon:""}]},style:{width:"1440px",height:"900px",padding:0},events:[],api:{}},events:[{value:"onClickLogo",name:qt("edl.propertyConfig.basicCard.clickLogo")}],methods:[]},Vs=({id:l,type:n,config:t,onChange:o,onBlur:r},s)=>{const i=a.useContext(ke),{props:c}=t,[p,b]=a.useState(c.visible!==void 0?c.visible:!0),[g,y]=a.useState(!1);a.useEffect(()=>{var h;const f=(h=t.props.formItem)==null?void 0:h.name,u=t.props.defaultValue;f&&!We(u)&&(i==null||i.setFieldValue(f,u))},[t.props.defaultValue]),a.useEffect(()=>{y(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]);const d=f=>{o==null||o({[t.props.formItem.name]:f})},m=f=>{r==null||r({[t.props.formItem.name]:f})};return a.useImperativeHandle(s,()=>({show(){b(!0)},hide(){b(!1)},enable(){y(!1)},disable(){y(!0)}})),a.useEffect(()=>{b(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),p&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(O,{...t.props.formWrap,disabled:g,variant:t.props.formWrap.variant||void 0,style:t.style,onChange:f=>d(f.target.value),onBlur:f=>m(f.target.value)})})},Yp=a.forwardRef(Vs),Ue=a.memo(({form:l,labelSpan:n})=>{const t=window.$translation,o=[{key:"required",label:t("edl.component.componentSchema.requireValidation")},{key:"length",label:t("edl.component.componentSchema.lengthValidation")},{key:"phone",label:t("edl.component.componentSchema.phoneValidation")},{key:"email",label:t("edl.component.componentSchema.emailValidation")},{key:"idCard",label:t("edl.component.componentSchema.idCardValidation")},{key:"site",label:t("edl.component.componentSchema.urlValidation")},{key:"word",label:t("edl.component.componentSchema.alphabetValidation")},{key:"number",label:t("edl.component.componentSchema.numberValidation")},{key:"chinese",label:t("edl.component.componentSchema.chineseValidation")},{key:"wordAndNumber",label:t("edl.component.componentSchema.letterNumberValidation")},{key:"numberMoney",label:t("edl.component.componentSchema.amountValidation")},{key:"floatMoney",label:t("edl.component.componentSchema.amountDecimalValidation")},{key:"pattern",label:t("edl.component.componentSchema.regexValidation")}];return e.jsx(e.Fragment,{children:e.jsx(x.List,{name:["formItem","rules"],children:(r,{add:s,remove:i})=>e.jsxs(e.Fragment,{children:[r.map(({key:c,name:p})=>e.jsx(x.Item,{noStyle:!0,children:e.jsxs("div",{style:{position:"relative",backgroundColor:"#f5f5f5",paddingBlock:10,marginBottom:10},children:[l.getFieldValue(["formItem","rules",p,"required"])&&e.jsx(x.Item,{labelCol:{span:n||8},wrapperCol:{span:10},name:[p,"required"],label:t("edl.component.componentSchema.requireRule"),children:e.jsx(Qe,{})}),l.getFieldValue(["formItem","rules",p,"min"])&&e.jsxs(e.Fragment,{children:[e.jsx(x.Item,{labelCol:{span:n||8},wrapperCol:{span:14},name:[p,"min"],label:t("edl.component.componentSchema.minLength"),children:e.jsx(It,{placeholder:t("edl.component.componentSchema.minLength")})}),e.jsx(x.Item,{labelCol:{span:n||8},wrapperCol:{span:14},name:[p,"max"],label:t("edl.component.componentSchema.maxLength"),children:e.jsx(It,{placeholder:t("edl.component.componentSchema.maxLength")})})]}),l.getFieldValue(["formItem","rules",p,"key"])&&e.jsx(x.Item,{labelCol:{span:n||8},wrapperCol:{span:14},name:[p,"pattern"],label:t("edl.component.componentSchema.validaRule"),children:e.jsx(O,{placeholder:"eg: ^[0-9]+$"})}),e.jsx(x.Item,{labelCol:{span:n||8},wrapperCol:{span:14},name:[p,"message"],label:t("edl.component.componentSchema.errorTips"),children:e.jsx(O,{placeholder:t("edl.component.componentSchema.errorTips"),style:{width:"100%"}})}),e.jsx(ao,{onClick:()=>i(p),style:{position:"absolute",top:10,right:8,color:"red"}})]})},"rules"+c)),e.jsx(kl,{menu:{items:o,onClick:({key:c})=>{c==="required"?s({required:!0,message:t("common.pleaseInput")},r.length):c==="length"?s({min:1,max:20,message:t("common.length",{min:1,max:20})},r.length):c==="phone"?s({key:"phone",pattern:"^1[3456789]\\d{9}$",message:t("edl.component.componentSchema.phoneTips")},r.length):c==="email"?s({key:"email",pattern:"^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+\\.[a-zA-Z0-9_-]+$",message:t("edl.component.componentSchema.emailTips")},r.length):c==="idCard"?s({key:"idCard",pattern:"^[1-9]\\d{5}(18|19|20)\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$",message:t("edl.component.componentSchema.idCardTips")},r.length):c==="site"?s({key:"site",pattern:"^https?:\\/\\/.*(\\.).*$",message:t("edl.component.componentSchema.siteTips")},r.length):c==="word"?s({key:"word",pattern:"^[a-zA-Z]+$",message:t("edl.component.componentSchema.englishWordsTips")},r.length):c==="number"?s({key:"number",pattern:"^[0-9]+$",message:t("edl.component.componentSchema.numberTips")},r.length):c==="chinese"?s({key:"chinese",pattern:"^[一-龥]+$",message:t("edl.component.componentSchema.chineseTips")},r.length):c==="wordAndNumber"?s({key:"wordAndNumber",pattern:"^[a-zA-Z0-9]+$",message:t("edl.component.componentSchema.letterNumberTips")},r.length):c==="numberMoney"?s({key:"numberMoney",pattern:"^(0|[1-9]\\d+)$",message:t("edl.component.componentSchema.amountTips")},r.length):c==="floatMoney"?s({key:"floatMoney",pattern:"^(0|[1-9]\\d+(\\.\\d{2})?)$",message:t("edl.component.componentSchema.amountDecimalTips")},r.length):c==="pattern"&&s({key:"pattern",pattern:"",message:t("common.pleaseInput")},r.length)}},children:e.jsxs("a",{onClick:c=>c.preventDefault(),style:{display:"block",textAlign:"center"},children:[e.jsx(st,{})," ",t("edl.component.componentSchema.addRule")]})})]})})})}),G=window.$translation,Op={attrs:[{type:"Title",label:G("edl.propertyConfig.basicChart.labelConfig"),key:"formItem"},...$,{type:"Input",label:G("common.title"),name:["formItem","label"],props:{placeholder:`${G("common.pleaseInput")}${G("common.title")}`}},{type:"Input",label:G("edl.component.componentSchema.field"),name:["formItem","name"],props:{placeholder:G("common.pleaseInput")}},{type:"Variable",label:G("edl.component.componentSchema.defaultValue"),name:["defaultValue"],props:{placeholder:G("common.pleaseInput")}},{type:"Switch",label:G("edl.propertyConfig.basicInput.hidden"),name:["formItem","hidden"]},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:G("edl.component.componentSchema.formDesc"),props:{placeholder:G("edl.component.componentSchema.formTooltip")}},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:G("edl.component.componentSchema.formTooltip"),props:{placeholder:G("edl.component.componentSchema.placeholder")}},{type:"Title",label:G("edl.component.componentSchema.formConfig"),key:"formWrap"},{type:"Input",label:G("edl.propertyConfig.basicInput.placeholder"),name:["formWrap","placeholder"],props:{placeholder:G("edl.propertyConfig.basicInput.placeholder")}},{type:"InputNumber",label:G("edl.propertyConfig.basicInput.maxLength"),name:["formWrap","maxLength"],props:{placeholder:G("edl.propertyConfig.basicInput.maxLength")}},{type:"Switch",label:G("edl.propertyConfig.basicInput.showClear"),name:["formWrap","allowClear"]},{type:"Switch",label:G("edl.propertyConfig.basicInput.showCount"),name:["formWrap","showCount"]},{type:"Switch",label:G("edl.propertyConfig.basicButton.disable"),name:["formWrap","disabled"]},{type:"Select",label:G("edl.propertyConfig.basicInput.borderStyle"),name:["formWrap","variant"],props:{options:[{value:"",label:G("common.none")},{value:"outlined",label:G("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:G("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:G("edl.propertyConfig.basicForm.layout.fill")}]}},{type:"Title",label:G("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:G("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:G("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:G("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:G("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:G("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:G("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:G("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:G("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:G("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,formItem:{label:G("edl.propertyConfig.basicInput.input"),name:"input"},formWrap:{placeholder:G("common.pleaseInput"),allowClear:!0},defaultValue:"",visible:!0},style:{},api:{}},events:[{value:"onChange",name:G("edl.propertyConfig.basicInput.onChange")},{value:"onBlur",name:G("edl.propertyConfig.basicInput.onBlur")}]},Rs=({id:l,type:n,config:t,onChange:o,onBlur:r},s)=>{const{props:i}=t,c=a.useContext(ke),[p,b]=a.useState(i.visible!==void 0?i.visible:!0),[g,y]=a.useState(!1);a.useEffect(()=>{var h;const f=(h=t.props.formItem)==null?void 0:h.name,u=t.props.defaultValue;f&&!We(u)&&(c==null||c.setFieldValue(f,u))},[t.props.defaultValue]),a.useEffect(()=>{y(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]);const d=f=>{o==null||o({[t.props.formItem.name]:f})},m=f=>{r==null||r({[t.props.formItem.name]:f})};return a.useImperativeHandle(s,()=>({show(){b(!0)},hide(){b(!1)},enable(){y(!1)},disable(){y(!0)}})),a.useEffect(()=>{b(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),p&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(O.Password,{...t.props.formWrap,disabled:g,variant:t.props.formWrap.variant||void 0,style:t.style,onChange:f=>d(f.target.value),onBlur:f=>m(f.target.value)})})},Qp=a.forwardRef(Rs),le=window.$translation,Up={attrs:[{type:"Title",label:le("edl.propertyConfig.basicChart.labelConfig"),key:"formItem"},...$,{type:"Input",label:le("common.title"),name:["formItem","label"],props:{placeholder:`${le("common.pleaseInput")}${le("common.title")}`}},{type:"Input",label:le("edl.component.componentSchema.field"),name:["formItem","name"],props:{placeholder:le("common.pleaseInput")}},{type:"Variable",label:le("edl.component.componentSchema.defaultValue"),name:["defaultValue"],props:{placeholder:le("common.pleaseInput")}},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:le("edl.component.componentSchema.formDesc"),props:{placeholder:le("edl.component.componentSchema.formTooltip")}},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:le("edl.component.componentSchema.formTooltip"),props:{placeholder:le("edl.component.componentSchema.placeholder")}},{type:"Title",label:le("edl.component.componentSchema.formConfig"),key:"formWrap"},{type:"Input",label:le("edl.propertyConfig.basicInput.placeholder"),name:["formWrap","placeholder"],props:{placeholder:le("edl.propertyConfig.basicInput.placeholder")}},{type:"InputNumber",label:le("edl.propertyConfig.basicInput.maxLength"),name:["formWrap","maxLength"],props:{placeholder:le("edl.propertyConfig.basicInput.maxLength")}},{type:"Switch",label:le("edl.propertyConfig.basicInput.showClear"),name:["formWrap","allowClear"]},{type:"Switch",label:le("edl.propertyConfig.basicInput.showCount"),name:["formWrap","showCount"]},{type:"Switch",label:le("edl.propertyConfig.basicButton.disable"),name:["formWrap","disabled"]},{type:"Select",label:le("edl.propertyConfig.basicInput.borderStyle"),name:["formWrap","variant"],props:{options:[{value:"",label:le("common.none")},{value:"outlined",label:le("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:le("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:le("edl.propertyConfig.basicForm.layout.fill")}]}},{type:"Title",label:le("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:le("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:le("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:le("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:le("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:le("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:le("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:le("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:le("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:le("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,formItem:{label:le("edl.propertyConfig.basicInput.input"),name:"input"},formWrap:{placeholder:le("common.pleaseInput"),allowClear:!0},defaultValue:"",visible:!0},style:{}},events:[{value:"onChange",name:le("edl.propertyConfig.basicInput.onChange")},{value:"onBlur",name:"onBlur事件"}]},Ws=({id:l,type:n,config:t,onChange:o},r)=>{const{props:s}=t,i=a.useContext(ke),[c,p]=a.useState(s.visible!==void 0?s.visible:!0),[b,g]=a.useState(!1);a.useEffect(()=>{var f;const d=(f=t.props.formItem)==null?void 0:f.name,m=t.props.defaultValue;d&&!We(m)&&(i==null||i.setFieldValue(d,Number(m)))},[t.props.defaultValue]),a.useEffect(()=>{g(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]),a.useImperativeHandle(r,()=>({show(){p(!0)},hide(){p(!1)},enable(){g(!1)},disable(){g(!0)}}));const y=d=>{o==null||o({[t.props.formItem.name]:d||""})};return a.useEffect(()=>{p(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),c&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(It,{...t.props.formWrap,disabled:b,variant:t.props.formWrap.variant||void 0,style:t.style,onChange:y})})},qp=a.forwardRef(Ws),ge=window.$translation,Jp={attrs:[{type:"Title",label:ge("edl.propertyConfig.basicChart.labelConfig")},...$,{type:"Input",label:ge("common.title"),name:["formItem","label"]},{type:"Input",label:ge("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Variable",label:ge("edl.component.componentSchema.defaultValue"),name:["defaultValue"]},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:ge("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:ge("edl.component.componentSchema.formTooltip")},{type:"Title",label:ge("edl.component.componentSchema.formConfig")},{type:"Input",label:ge("edl.propertyConfig.basicInput.placeholder"),name:["formWrap","placeholder"]},{type:"InputNumber",label:ge("edl.propertyConfig.basicInput.maxLength"),name:["formWrap","maxLength"]},{type:"InputNumber",label:ge("common.minLength"),name:["formWrap","minLength"]},{type:"Switch",label:ge("edl.propertyConfig.basicButton.disable"),name:["formWrap","disabled"]},{type:"Select",label:ge("edl.propertyConfig.basicInput.borderStyle"),name:["formWrap","variant"],props:{options:[{value:"",label:ge("common.none")},{value:"outlined",label:ge("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:ge("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:ge("edl.propertyConfig.basicForm.layout.fill")}]}},{type:"Title",label:ge("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:ge("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:ge("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:ge("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:ge("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:ge("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:ge("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:ge("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:ge("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:ge("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,formItem:{label:ge("edl.component.dataEntryComponent.numberBox"),name:"number"},formWrap:{placeholder:ge("common.pleaseInput")},visible:!0},style:{}},events:[{value:"onChange",name:ge("edl.propertyConfig.basicInput.onChange")}]},Bs=({id:l,type:n,config:t,onChange:o},r)=>{const{props:s}=t,i=a.useContext(ke),[c,p]=a.useState(s.visible!==void 0?s.visible:!0),[b,g]=a.useState(!1);a.useEffect(()=>{var f;const d=(f=t.props.formItem)==null?void 0:f.name,m=t.props.defaultValue;d&&!We(m)&&(i==null||i.setFieldValue(d,m))},[t.props.defaultValue]),a.useEffect(()=>{g(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]);const y=d=>{o==null||o({[t.props.formItem.name]:d})};return a.useImperativeHandle(r,()=>({show(){p(!0)},hide(){p(!1)},enable(){g(!1)},disable(){g(!0)}})),a.useEffect(()=>{p(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),c&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(O.OTP,{...t.props.formWrap,disabled:b,variant:t.props.formWrap.variant||void 0,style:t.style,onChange:y})})},Kp=a.forwardRef(Bs),ue=window.$translation,Gp={attrs:[{type:"Title",label:ue("edl.propertyConfig.basicChart.labelConfig"),key:"formItem"},...$,{type:"Input",label:ue("common.title"),name:["formItem","label"],props:{placeholder:`${ue("common.pleaseInput")}${ue("common.title")}`}},{type:"Input",label:ue("edl.component.componentSchema.field"),name:["formItem","name"],props:{placeholder:ue("common.pleaseInput")}},{type:"Variable",label:ue("edl.component.componentSchema.defaultValue"),name:["defaultValue"],props:{placeholder:ue("common.pleaseInput")}},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:ue("edl.component.componentSchema.formDesc"),props:{placeholder:ue("edl.component.componentSchema.formTooltip")}},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:ue("edl.component.componentSchema.formTooltip"),props:{placeholder:ue("edl.component.componentSchema.placeholder")}},{type:"Title",label:ue("edl.component.componentSchema.formConfig"),key:"formWrap"},{type:"Input",label:"元素数量",name:["formWrap","length"],props:{placeholder:"元素数量"}},{type:"Switch",label:ue("edl.propertyConfig.basicButton.disable"),name:["formWrap","disabled"]},{type:"Input",label:"展示值",name:["formWrap","mask"],props:{placeholder:"展示值"}},{type:"Select",label:ue("edl.propertyConfig.basicInput.borderStyle"),name:["formWrap","variant"],props:{options:[{value:"",label:ue("common.none")},{value:"outlined",label:ue("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:ue("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:ue("edl.propertyConfig.basicForm.layout.fill")}]}},{type:"Title",label:ue("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:ue("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:ue("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:ue("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:ue("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:ue("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:ue("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:ue("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:ue("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:ue("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,formItem:{label:"密码框",name:"inputOpt"},formWrap:{},defaultValue:"",visible:!0},style:{}},events:[{value:"onChange",name:ue("edl.propertyConfig.basicInput.onChange")}]},Ls=({config:l,onChange:n},t)=>{const{props:o}=l,r=a.useContext(ke),[s,i]=a.useState(o.visible!==void 0?o.visible:!0),[c,p]=a.useState(!1);a.useEffect(()=>{var d;const g=(d=l.props.formItem)==null?void 0:d.name,y=l.props.defaultValue;g&&!We(y)&&(r==null||r.setFieldValue(g,y))},[l.props.defaultValue]),a.useEffect(()=>{p(l.props.formWrap.disabled||!1)},[l.props.formWrap.disabled]),a.useImperativeHandle(t,()=>({show(){i(!0)},hide(){i(!1)},enable(){p(!1)},disable(){p(!0)}}));const b=g=>{n&&n({[l.props.formItem.name]:g})};return a.useEffect(()=>{i(l.props.visible!==void 0?l.props.visible:!0)},[l.props.visible]),s&&e.jsx(x.Item,{style:l.style,...l.props.formItem,children:e.jsx(O.TextArea,{...l.props.formWrap,disabled:c,variant:l.props.formWrap.variant||void 0,onChange:g=>b(g.target.value)})})},Zp=a.forwardRef(Ls),de=window.$translation,_p={attrs:[{type:"Title",label:de("edl.propertyConfig.basicChart.labelConfig")},...$,{type:"Input",label:de("common.title"),name:["formItem","label"]},{type:"Input",label:de("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Variable",label:de("edl.component.componentSchema.defaultValue"),name:["defaultValue"]},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:de("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:de("edl.component.componentSchema.formTooltip")},{type:"Title",label:de("edl.component.componentSchema.formConfig")},{type:"InputNumber",label:de("edl.propertyConfig.basicInput.maxLength"),name:["formWrap","maxLength"]},{type:"Switch",label:de("edl.propertyConfig.basicInput.showClear"),name:["formWrap","allowClear"]},{type:"Switch",label:de("edl.propertyConfig.basicTextArea.autoFit"),name:["formWrap","autoSize"]},{type:"Switch",label:de("edl.propertyConfig.basicInput.showCount"),name:["formWrap","showCount"]},{type:"Switch",label:de("edl.propertyConfig.basicForm.disabled"),name:["formWrap","disabled"]},{type:"Select",label:de("edl.propertyConfig.basicInput.borderStyle"),name:["formWrap","variant"],props:{options:[{value:"",label:de("common.none")},{value:"outlined",label:de("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:de("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:de("edl.propertyConfig.basicForm.layout.fill")}]}},{type:"Title",label:de("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:de("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:de("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:de("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:de("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:de("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:de("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:de("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:de("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:de("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,formItem:{label:de("edl.propertyConfig.basicTextArea.multiLine"),name:"textarea"},visible:!0,formWrap:{placeholder:de("common.pleaseInput"),allowClear:!0}},style:{}},events:[{value:"onChange",name:de("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"update",title:de("edl.component.componentSchema.updateData")}]},Hs=({id:l,type:n,config:t,onChange:o},r)=>{const s=a.useContext(ke),{props:i}=t,[c,p]=a.useState(i.visible!==void 0?i.visible:!0),[b,g]=a.useState(!1);a.useEffect(()=>{var f;const d=(f=t.props.formItem)==null?void 0:f.name,m=t.props.defaultValue;if(d&&!We(m)){const u=wn(m);s==null||s.setFieldValue(d,u)}},[t.props.defaultValue]),a.useEffect(()=>{g(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]),a.useImperativeHandle(r,()=>({show(){p(!0)},hide(){p(!1)},enable(){g(!1)},disable(){g(!0)}}));const y=d=>{o==null||o({[t.props.formItem.name]:d.format(t.props.formWrap.format)})};return a.useEffect(()=>{p(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),c&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(Vl,{...t.props.formWrap,disabled:b,variant:t.props.formWrap.variant||void 0,onChange:y})})},Xp=a.forwardRef(Hs),L=window.$translation,ec={attrs:[{type:"Title",label:L("edl.propertyConfig.basicChart.labelConfig"),key:"title1"},...$,{type:"Input",label:L("common.title"),name:["formItem","label"]},{type:"Input",label:L("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Select",label:L("edl.component.componentSchema.defaultValue"),name:["defaultValue"],props:{allowClear:!0,options:[{value:"today",label:L("edl.propertyConfig.basicDate.today")},{value:"yestoday",label:L("edl.propertyConfig.basicDate.yesterday")},{value:"last7",label:L("edl.propertyConfig.basicDate.lastWeek")},{value:"last30",label:L("edl.propertyConfig.basicDate.lastMonth")},{value:"last90",label:L("edl.propertyConfig.basicDate.lastThreeMonths")}]}},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:L("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:L("edl.component.componentSchema.formTooltip")},{type:"Title",label:L("edl.component.componentSchema.formConfig"),key:"title2"},{type:"Select",label:L("edl.propertyConfig.basicDate.dateType"),name:["formWrap","picker"],props:{options:[{value:"date",label:L("edl.propertyConfig.basicDate.date")},{value:"year",label:L("edl.propertyConfig.basicDate.year")},{value:"quarter",label:L("edl.propertyConfig.basicDate.quarter")},{value:"month",label:L("edl.propertyConfig.basicDate.month")},{value:"week",label:L("edl.propertyConfig.basicDate.week")},{value:"time",label:L("edl.propertyConfig.basicDate.time")}]}},{type:"Select",label:L("edl.propertyConfig.basicDate.dataFormat"),name:["formWrap","format"],props:{options:[{value:"YYYY-MM-DD",label:L("edl.propertyConfig.basicText.textFormat.YYYYMMDD")},{value:"YYYY-MM-DD HH:mm:ss",label:L("edl.propertyConfig.basicText.textFormat.YYYYMMDDHHmmss")},{value:"YYYY",label:L("edl.propertyConfig.basicDate.Y")},{value:"YYYY-MM",label:L("edl.propertyConfig.basicDate.YM")},{value:"YYYY-qQ",label:L("edl.propertyConfig.basicDate.quarter")},{value:"YYYY-wo",label:L("edl.propertyConfig.basicDate.week")},{value:"HH:mm:ss",label:L("edl.propertyConfig.basicDate.HHMMSS")},{value:"hh:mm:ss",label:L("edl.propertyConfig.basicDate.HHMMSS12")},{value:"h:mm A",label:L("edl.propertyConfig.basicDate.HHMMPM")}]}},{type:"Switch",label:L("edl.propertyConfig.basicDate.HHMMPM"),name:["formWrap","showNow"]},{type:"Switch",label:L("edl.propertyConfig.basicDate.showTime"),name:["formWrap","showTime"]},{type:"Switch",label:L("edl.propertyConfig.basicButton.disable"),name:["formWrap","disabled"]},{type:"Switch",label:L("edl.propertyConfig.basicInput.showClear"),name:["formWrap","allowClear"]},{type:"Select",label:L("edl.propertyConfig.basicInput.borderStyle"),name:["formWrap","variant"],props:{options:[{value:"",label:L("common.none")},{value:"outlined",label:L("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:L("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:L("edl.propertyConfig.basicForm.layout.fill")}]}},{type:"Title",label:L("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:L("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:L("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:L("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:L("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:L("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:L("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:L("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:L("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:L("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,visible:!0,formItem:{label:L("edl.propertyConfig.basicDate.date"),name:"datepicker"},formWrap:{placeholder:L("common.pleaseSelect"),allowClear:!0,showNow:!0,picker:"date",format:"YYYY-MM-DD"}},style:{}},events:[{value:"onChange",name:L("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"update",title:L("edl.component.componentSchema.updateData")}]},zs=({id:l,type:n,config:t,onChange:o},r)=>{const{props:s}=t,{RangePicker:i}=Vl,c=a.useContext(ke),[p,b]=a.useState(s.visible!==void 0?s.visible:!0),[g,y]=a.useState(!1);a.useEffect(()=>{var u;const m=(u=t.props.formItem)==null?void 0:u.name,f=t.props.defaultValue;if(m&&!We(f)){const h=Sn(f);c==null||c.setFieldValue(m,h)}},[t.props.defaultValue]),a.useEffect(()=>{y(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]),a.useImperativeHandle(r,()=>({show(){b(!0)},hide(){b(!1)},enable(){y(!1)},disable(){y(!0)}}));const d=m=>{const f={},{startField:u,endField:h,formItem:{name:C},formWrap:{format:w}}=t.props,[S,v]=(m==null?void 0:m.map(I=>I==null?void 0:I.format(w)))||[void 0,void 0];u&&h?(f[u]=S,f[h]=v,delete f[C]):f[C]=[S,v],o==null||o(f)};return a.useEffect(()=>{b(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),p&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(i,{...t.props.formWrap,disabled:g,variant:t.props.formWrap.variant||void 0,style:t.style,onChange:d})})},tc=a.forwardRef(zs),N=window.$translation,lc={attrs:[{type:"Title",label:N("edl.propertyConfig.basicChart.labelConfig"),key:"title1"},...$,{type:"Input",label:N("common.title"),name:["formItem","label"]},{type:"Input",label:N("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Select",label:N("edl.component.componentSchema.defaultValue"),name:["defaultValue"],props:{allowClear:!0,options:[{value:"today",label:N("edl.propertyConfig.basicDate.today")},{value:"curWeek",label:N("edl.propertyConfig.basicDate.curWeek")},{value:"curMonth",label:N("edl.propertyConfig.basicDate.curMonth")},{value:"curQuarter",label:N("edl.propertyConfig.basicDate.curQuarter")},{value:"curYear",label:N("edl.propertyConfig.basicDate.curYear")},{value:"yestoday",label:N("edl.propertyConfig.basicDate.yesterday")},{value:"lastWeek",label:N("edl.propertyConfig.basicDate.lastWeek")},{value:"lastMonth",label:N("edl.propertyConfig.basicDate.lastMonth")},{value:"last3Month",label:N("edl.propertyConfig.basicDate.lastThreeMonths")},{value:"lastYear",label:N("edl.propertyConfig.basicDate.lastYear")}]}},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:N("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:N("edl.component.componentSchema.formTooltip")},{type:"Title",label:N("edl.propertyConfig.basicDate.fieldBreak"),key:"FieldExport"},{type:"Input",label:N("edl.propertyConfig.basicDate.startField"),name:["startField"],tooltip:N("edl.propertyConfig.basicDate.startFieldTips"),props:{placeholder:N("common.pleaseInput")}},{type:"Input",label:N("edl.propertyConfig.basicDate.endField"),name:["endField"],tooltip:N("edl.propertyConfig.basicDate.endFieldTips"),props:{placeholder:N("common.pleaseInput")}},{type:"Title",label:N("edl.component.componentSchema.formConfig"),key:"title2"},{type:"Select",label:N("edl.propertyConfig.basicDate.dateType"),name:["formWrap","picker"],props:{options:[{value:"date",label:N("edl.propertyConfig.basicDate.date")},{value:"year",label:N("edl.propertyConfig.basicDate.year")},{value:"quarter",label:N("edl.propertyConfig.basicDate.quarter")},{value:"month",label:N("edl.propertyConfig.basicDate.month")},{value:"week",label:N("edl.propertyConfig.basicDate.week")},{value:"time",label:N("edl.propertyConfig.basicDate.time")}]}},{type:"Select",label:N("edl.propertyConfig.basicDate.dataFormat"),name:["formWrap","format"],props:{options:[{value:"YYYY-MM-DD",label:N("edl.propertyConfig.basicText.textType.YYYYMMDD")},{value:"YYYY-MM-DD HH:mm:ss",label:N("edl.propertyConfig.basicText.textType.YYYYMMDDHHmmss")},{value:"YYYY",label:N("edl.propertyConfig.basicDate.Y")},{value:"YYYY-MM",label:N("edl.propertyConfig.basicDate.YM")},{value:"YYYY-qQ",label:N("edl.propertyConfig.basicDate.quarter")},{value:"YYYY-wo",label:N("edl.propertyConfig.basicDate.week")},{value:"HH:mm:ss",label:N("edl.propertyConfig.basicDate.HHMMSS")},{value:"hh:mm:ss",label:N("edl.propertyConfig.basicDate.HHMMSS12")},{value:"h:mm A",label:N("edl.propertyConfig.basicDate.HHMMPM")}]}},{type:"Switch",label:N("edl.propertyConfig.basicDate.HHMMPM"),name:["formWrap","showNow"]},{type:"Switch",label:N("edl.propertyConfig.basicDate.showTime"),name:["formWrap","showTime"]},{type:"Switch",label:N("edl.propertyConfig.basicButton.disable"),name:["formWrap","disabled"]},{type:"Switch",label:N("edl.propertyConfig.basicInput.showClear"),name:["formWrap","allowClear"]},{type:"Select",label:N("edl.propertyConfig.basicInput.borderStyle"),name:["formWrap","variant"],props:{options:[{value:"",label:N("common.none")},{value:"outlined",label:N("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:N("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:N("edl.propertyConfig.basicForm.layout.fill")}]}},{type:"Title",label:N("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:N("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:N("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:N("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:N("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:N("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:N("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:N("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:N("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:N("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,visible:!0,formItem:{label:N("edl.propertyConfig.basicDate.date"),name:"datepickerrange"},formWrap:{placeholder:[N("edl.propertyConfig.basicDate.startDate"),N("edl.propertyConfig.basicDate.endDate")],allowClear:!0,picker:"date",format:"YYYY-MM-DD"}},style:{}},events:[{value:"onChange",name:N("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"update",title:N("edl.component.componentSchema.updateData")}]},Ys=({id:l,type:n,config:t,onChange:o},r)=>{const{setVisible:s,loading:i,visible:c,getDataList:p,data:b}=Ie(t),[g,y]=a.useState(!1),d=a.useContext(ke);a.useEffect(()=>{var C;const u=(C=t.props.formItem)==null?void 0:C.name,h=t.props.defaultValue;u&&!We(h)&&(d==null||d.setFieldValue(u,h))},[t.props.defaultValue]),a.useEffect(()=>{y(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]);const m=a.useMemo(()=>{if(!Array.isArray(b))return console.error("[radio]","data数据格式错误，请检查"),[];let u=[];return t.props.field.label==="label"&&t.props.field.value==="value"?(u=b,(typeof b[0]=="string"||typeof b[0]=="number")&&(u=b.map(h=>({label:h,value:h})))):u=b.map(h=>{const C=h[t.props.field.label||"label"],w=h[t.props.field.value||"value"];return{label:ht(C)?C:"-",value:ht(w)?w:""}}),u},[b]);a.useImperativeHandle(r,()=>({show(){s(!0)},hide(){s(!1)},enable(){y(!1)},disable(){y(!0)},update:u=>{p(u)}}));const f=u=>{o==null||o({[t.props.formItem.name]:u})};return a.useEffect(()=>{s(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),c&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(he.Group,{...t.props.formWrap,disabled:g,options:m,style:t.style,onChange:u=>f(u.target.value)})})},oc=a.forwardRef(Ys),be=window.$translation,ac={attrs:[{type:"Title",label:be("edl.propertyConfig.basicChart.labelConfig"),key:"title"},...$,{type:"Input",label:be("common.title"),name:["formItem","label"]},{type:"Input",label:be("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Variable",label:be("edl.component.componentSchema.defaultValue"),name:["defaultValue"]},{type:"Select",label:be("edl.propertyConfig.basicButton.btnType"),name:["formWrap","optionType"],props:{options:[{value:"default",label:be("common.default")},{value:"button",label:be("edl.component.featureComponent.btn")}]}},{type:"Select",label:be("edl.propertyConfig.basicButton.btnStyle"),name:["formWrap","buttonStyle"],tooltip:be("edl.propertyConfig.basicRadio.btnTips"),props:{options:[{value:"outline",label:be("edl.propertyConfig.basicRadio.dashed")},{value:"solid",label:be("edl.propertyConfig.basicRadio.solid")}]}},{type:"Switch",label:be("edl.propertyConfig.basicForm.disabled"),name:["formWrap","disabled"]},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:be("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:be("edl.component.componentSchema.formTooltip")},{type:"Title",label:be("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:be("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:be("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:be("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:be("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:be("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:be("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:be("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:be("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:be("edl.propertyConfig.basicSelect.optionMode.fieldMapping"),key:"fieldMap"},{type:"Input",label:"label",name:["field","label"]},{type:"Input",label:"value",name:["field","value"]},{type:"Title",label:be("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,formItem:{label:be("edl.propertyConfig.basicRadio.radio"),name:"radio"},formWrap:{optionType:"default",buttonStyle:"solid"},field:{label:"label",value:"value"},visible:!0},style:{},api:{sourceType:"json",source:[{label:be("edl.propertyConfig.basicSelect.optionMode.option1"),value:1},{label:be("edl.propertyConfig.basicSelect.optionMode.option2"),value:2}]}},events:[{value:"onChange",name:be("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"update",title:be("edl.component.componentSchema.updateData")}]},Os=({id:l,type:n,config:t,onChange:o},r)=>{const s=a.useContext(ke),{setVisible:i,visible:c,getDataList:p,data:b}=Ie(t),[g,y]=a.useState(!1);a.useEffect(()=>{var h;const f=(h=t.props.formItem)==null?void 0:h.name,u=t.props.defaultValue;f&&!We(u)&&(s==null||s.setFieldValue(f,u))},[t.props.defaultValue]),a.useEffect(()=>{y(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]);const d=a.useMemo(()=>{if(!Array.isArray(b))return console.error("[select]","data数据格式错误，请检查"),[];let f=[];return t.props.field.label==="label"&&t.props.field.value==="value"?(f=b,(typeof b[0]=="string"||typeof b[0]=="number")&&(f=b.map(u=>({label:u,value:u})))):f=b.map(u=>{const h=u[t.props.field.label||"label"],C=u[t.props.field.value||"value"];return{label:ht(h)?h:"-",value:ht(C)?C:""}}),f},[b]);a.useImperativeHandle(r,()=>({show(){i(!0)},hide(){i(!1)},enable(){y(!1)},disable(){y(!0)},update:f=>{p(f)}}));const m=f=>{o&&o({[t.props.formItem.name]:f})};return a.useEffect(()=>{i(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),c&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(W,{...t.props.formWrap,disabled:g,variant:t.props.formWrap.variant||void 0,options:d,onChange:f=>m(f)})})},nc=a.forwardRef(Os),Z=window.$translation,rc={attrs:[...$,{type:"Title",label:Z("edl.propertyConfig.basicChart.labelConfig"),key:"title1"},{type:"Input",label:Z("common.title"),name:["formItem","label"]},{type:"Input",label:Z("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Variable",label:Z("edl.component.componentSchema.defaultValue"),name:["defaultValue"]},{type:"Title",label:Z("edl.component.componentSchema.formConfig"),key:"title2"},{type:"Switch",label:Z("edl.propertyConfig.basicInput.showClear"),name:["formWrap","allowClear"]},{type:"Switch",label:Z("edl.propertyConfig.basicSelect.searchable"),name:["formWrap","showSearch"]},{type:"Select",label:Z("edl.propertyConfig.basicSelect.optionMode.label"),name:["formWrap","mode"],props:{options:[{value:"",label:Z("edl.propertyConfig.basicSelect.optionMode.singleMode")},{value:"multiple",label:Z("edl.propertyConfig.basicSelect.optionMode.multipleMode")},{value:"tags",label:Z("edl.propertyConfig.basicSelect.optionMode.tagMode")}]}},{type:"InputNumber",label:Z("edl.propertyConfig.basicSelect.optionMode.maxTagCount"),name:["formWrap","maxTagCount"]},{type:"Input",label:Z("edl.propertyConfig.basicSelect.optionMode.defaultTips"),name:["formWrap","placeholder"]},{type:"Switch",label:Z("edl.propertyConfig.basicForm.disabled"),name:["formWrap","disabled"]},{type:"Switch",label:Z("edl.propertyConfig.basicSelect.optionMode.includeLabel"),name:["formWrap","labelInValue"],tooltip:Z("edl.propertyConfig.basicSelect.optionMode.labelTips")},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:Z("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:Z("edl.component.componentSchema.formTooltip")},{type:"Select",label:Z("edl.propertyConfig.basicInput.borderStyle"),name:["formWrap","variant"],props:{options:[{value:"",label:Z("common.none")},{value:"outlined",label:Z("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:Z("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:Z("edl.propertyConfig.basicForm.layout.fill")}]}},{type:"Title",label:Z("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:Z("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:Z("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:Z("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:Z("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:Z("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:Z("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:Z("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:Z("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:Z("edl.propertyConfig.basicSelect.optionMode.fieldMapping"),key:"fieldMap"},{type:"Input",label:"label",name:["field","label"]},{type:"Input",label:"value",name:["field","value"]},{type:"Title",label:Z("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,formItem:{label:Z("edl.component.dataEntryComponent.dropDownBox"),name:"select"},formWrap:{placeholder:Z("common.pleaseSelect"),allowClear:!0,mode:""},field:{label:"label",value:"value"},visible:!0},style:{minWidth:120},api:{sourceType:"json",source:[{label:Z("edl.propertyConfig.basicSelect.optionMode.option1"),value:1},{label:Z("edl.propertyConfig.basicSelect.optionMode.option2"),value:2}]}},events:[{value:"onChange",name:Z("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"update",title:Z("edl.component.componentSchema.updateData")}]},Qs=({id:l,type:n,config:t,onChange:o},r)=>{const{props:s}=t,i=a.useContext(ke),[c,p]=a.useState(s.visible!==void 0?s.visible:!0),[b,g]=a.useState(!1);a.useEffect(()=>{var f;const d=(f=t.props.formItem)==null?void 0:f.name,m=t.props.defaultValue;d&&!We(m)&&(i==null||i.setFieldValue(d,m))},[t.props.defaultValue]),a.useEffect(()=>{g(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]),a.useImperativeHandle(r,()=>({show(){p(!0)},hide(){p(!1)},enable(){g(!1)},disable(){g(!0)}}));const y=d=>{o&&o({[t.props.formItem.name]:d})};return a.useEffect(()=>{p(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),c&&e.jsx(x.Item,{...t.props.formItem,valuePropName:"checked",children:e.jsx(Qe,{...t.props.formWrap,disabled:b,style:t.style,onChange:y})})},sc=a.forwardRef(Qs),dt=window.$translation,ic={attrs:[{type:"Title",label:dt("edl.propertyConfig.basicChart.labelConfig"),key:"title1"},...$,{type:"Input",label:dt("common.title"),name:["formItem","label"]},{type:"Input",label:dt("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Switch",label:dt("edl.component.componentSchema.defaultValue"),name:["defaultValue"]},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:dt("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:dt("edl.component.componentSchema.formTooltip")},{type:"Title",label:dt("edl.component.componentSchema.formConfig"),key:"title2"},{type:"Switch",label:dt("edl.propertyConfig.basicForm.disabled"),name:["formWrap","disabled"]},{type:"Input",label:dt("edl.propertyConfig.basicSwitch.onText"),name:["formWrap","checkedChildren"]},{type:"Input",label:dt("edl.propertyConfig.basicSwitch.offText"),name:["formWrap","unCheckedChildren"]},{type:"Switch",label:dt("common.loading"),name:["formWrap","loading"]}],config:{props:{x:0,y:0,formItem:{label:dt("edl.component.featureComponent.switch"),name:"switch"},formWrap:{},visible:!0},style:{}},events:[{value:"onChange",name:dt("edl.propertyConfig.basicInput.onChange")}]},Us=({id:l,type:n,config:t},o)=>{const{props:r}=t,[s,i]=a.useState(r.visible!==void 0?r.visible:!0),[c,p]=a.useState(!1),b=({config:g,value:y,disabled:d,onChange:m})=>{const[f,u]=a.useState([]),[h,C]=a.useState(!1);a.useEffect(()=>{var j,k;if(typeof y=="string")u([{name:(k=(j=y.split("/").pop())==null?void 0:j.split("."))==null?void 0:k[0],url:y,status:"done"}]);else if(Array.isArray(y))if(g.props.structure==="url"){const T=y.map(A=>({name:A.split("/").pop().split(".")[0],url:A,status:"done"}));u(T)}else u(y);else u([])},[y]);const w=j=>g.props.formWrap.accept.includes(j.type)?j.size>g.props.formWrap.limitSize*1024?(window.$message.error("图片超出最大限制"),!1):!0:(window.$message.error("不支持该文件格式，请重新选择"),!1),S=j=>{const k=(f||[]).filter(T=>T.url!==j.url);u(k),g.props.formWrap.maxCount===1?m(null):g.props.structure==="url"?m(k.map(T=>T.url)):m(k)},v=j=>{C(!0),ea.uploadImg({file:j.file}).then(k=>{const{name:T,url:A=""}=k;if(C(!1),A){const F={uid:j.file.uid,name:T,url:A,status:"done"},E=[...f,F];g.props.formWrap.maxCount===1?g.props.structure==="url"?m(A):m(F):g.props.structure==="url"?m(E.map(D=>D.url)):m(E),u(E)}}).catch(()=>{C(!1),window.$message.error("图片上传失败")})},I=()=>{const{listType:j,maxCount:k}=g.props.formWrap,T=e.jsxs("div",{children:[h?e.jsx(Mo,{}):e.jsx(st,{}),e.jsx("div",{style:{marginTop:8},children:g.props.text})]});return["text","picture"].includes(j)?f.length>=k?null:e.jsx(ee,{icon:e.jsx(no,{}),children:g.props.text}):f.length>=k?null:T};return e.jsx(Pl,{...g.props.formWrap,disabled:d,fileList:f,style:g.style,beforeUpload:w,onRemove:S,customRequest:v,children:I()})};return a.useImperativeHandle(o,()=>({show(){i(!0)},hide(){i(!1)},enable(){p(!1)},disable(){p(!0)}})),a.useEffect(()=>{i(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),s&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(b,{config:t,disabled:c})})},pc=a.forwardRef(Us),Me=window.$translation,cc={attrs:[{type:"Title",label:Me("edl.propertyConfig.basicChart.labelConfig"),key:"title1"},...$,{type:"Input",label:Me("common.title"),name:["formItem","label"]},{type:"Input",label:Me("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:Me("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:Me("edl.component.componentSchema.formTooltip")},{type:"Title",label:Me("edl.propertyConfig.basicUpload.uploadConfig"),key:"title2"},{type:"Select",label:Me("edl.propertyConfig.basicUpload.fileType"),name:["formWrap","accept"],props:{mode:"multiple",options:[{value:"image/jpeg",label:"image/jpeg"},{value:"image/png",label:"image/png"},{value:"image/gif",label:"image/gif"},{value:"video/mp4",label:"video/mp4"},{value:"text/csv",label:"text/csv"},{value:"text/html",label:"text/html"},{value:"application/zip",label:"application/zip"},{value:"application/pdf",label:"application/pdf"},{value:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",label:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",label:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{value:"application/vnd.openxmlformats-officedocument.presentationml.presentation",label:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}]}},{type:"InputNumber",label:Me("edl.propertyConfig.basicUpload.fileSize"),name:["formWrap","limitSize"],props:{placeholder:Me("edl.propertyConfig.basicUpload.unitK")}},{type:"Select",label:Me("edl.propertyConfig.basicUpload.listType"),name:["formWrap","listType"],props:{options:[{value:"text",label:"text"},{value:"picture",label:"picture"},{value:"picture-card",label:"picture-card"},{value:"picture-circle",label:"picture-circle"}]}},{type:"Switch",label:Me("edl.propertyConfig.basicButton.disable"),name:["formWrap","disabled"]},{type:"InputNumber",label:Me("edl.propertyConfig.basicUpload.maxCount"),name:["formWrap","maxCount"]},{type:"Switch",label:Me("edl.propertyConfig.basicUpload.uploadList"),name:["formWrap","showUploadList"]},{type:"Input",label:Me("edl.propertyConfig.basicUpload.showText"),name:["text"]},{type:"Select",label:Me("edl.propertyConfig.basicUpload.uploadStructure"),name:"structure",props:{options:[{value:"url",label:Me("edl.propertyConfig.basicUpload.fileAddress")},{value:"object",label:Me("edl.propertyConfig.basicUpload.fileObj")}]}},{type:"Title",label:Me("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,formItem:{label:Me("edl.component.dataEntryComponent.upload"),name:"upload"},formWrap:{accept:["image/jpeg","image/png"],listType:"picture-card",maxCount:1,limitSize:1024,showUploadList:!0},text:"Upload",visible:!0,structure:"url"},style:{},events:[],api:{},source:[]},events:[{value:"handleClick",name:Me("edl.propertyConfig.basicUpload.uploadEvent")}]},qs=window.$translation,Js=l=>{const n=l.value||"";let t=n;if(We(n))return e.jsx("span",{style:l.style,children:`\${${l.name}}`});if(l.showType==="text"&&(l.dateType&&(t=at(n).format(l.dateType)),l.numberType&&(t=jt(n,l.numberType)),n!=null&&n.format&&(t=at(n).format())),l.script)try{t=new Function("value",`return (${l.script})(value);`)(t)}catch(o){console.error(`${qs("edl.propertyConfig.basicText.parseFail")}`,o),window.$message.error(JSON.stringify(o))}if(t=t==null?void 0:t.toString(),l.showType==="text")return e.jsx("span",{style:l.style,children:t});if(l.showType==="href")return e.jsx("a",{href:t,target:"_blank",style:l.style,rel:"noreferrer",children:t});if(l.showType==="image")return e.jsx(St,{src:t,style:l.style})},Ks=({id:l,type:n,config:t},o)=>{const{props:r}=t,s=a.useContext(ke),[i,c]=a.useState(r.visible!==void 0?r.visible:!0);return a.useEffect(()=>{var g;const p=(g=t.props.formItem)==null?void 0:g.name,b=t.props.defaultValue;p&&!We(b)&&(s==null||s.setFieldValue(p,b))},[t.props.defaultValue]),a.useImperativeHandle(o,()=>({show(){c(!0)},hide(){c(!1)}})),a.useEffect(()=>{c(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),i&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(Js,{...t.props.formWrap,name:t.props.formItem.name,style:t.style})})},dc=a.forwardRef(Ks),tt=window.$translation,Gs=()=>{const[l,n]=a.useState("text"),t=o=>{n(o)};return e.jsxs(e.Fragment,{children:[e.jsx(x.Item,{label:tt("edl.propertyConfig.basicStaticTerm.nullDisplay"),name:["formWrap","emptyType"],children:e.jsxs(W,{children:[e.jsx(W.Option,{value:"",children:tt("edl.propertyConfig.basicStaticTerm.defaultNoDisplay")}),e.jsx(W.Option,{value:"-",children:"-"}),e.jsx(W.Option,{value:"/",children:"/"}),e.jsx(W.Option,{value:"0",children:"0"})]})}),e.jsx(x.Item,{label:"展示类型",name:["formWrap","showType"],children:e.jsxs(W,{onChange:t,children:[e.jsx(W.Option,{value:"text",children:tt("edl.component.featureComponent.text")}),e.jsx(W.Option,{value:"href",children:tt("edl.component.featureComponent.link")}),e.jsx(W.Option,{value:"image",children:tt("edl.component.dataShowComponent.image")})]})}),l==="text"&&e.jsxs(e.Fragment,{children:[e.jsx(x.Item,{label:"日期格式",name:["formWrap","dateType"],children:e.jsxs(W,{children:[e.jsx(W.Option,{value:"",children:tt("common.none")}),e.jsx(W.Option,{value:"YYYY-MM-DD HH:mm:ss",children:tt("edl.propertyConfig.basicText.textFormat.YYYYMMDDHHmmss")}),e.jsxs(W.Option,{value:"YYYY-MM-DD",children:[" ",tt("edl.propertyConfig.basicText.textFormat.YYYYMMDD")]}),e.jsx(W.Option,{value:"HH:mm:ss",children:tt("edl.propertyConfig.basicText.textFormat.HHmmss")})]})}),e.jsx(x.Item,{label:"数字格式",name:["formWrap","numberType"],children:e.jsxs(W,{children:[e.jsx(W.Option,{value:"",children:tt("common.none")}),e.jsx(W.Option,{value:"currency",children:tt("edl.propertyConfig.basicText.textFormat.money")}),e.jsx(W.Option,{value:"decimal",children:tt("edl.propertyConfig.basicText.textFormat.number")}),e.jsx(W.Option,{value:"percent",children:tt("edl.propertyConfig.basicText.textFormat.percent")})]})})]}),e.jsx(x.Item,{label:tt("edl.propertyConfig.custom"),tooltip:tt("edl.propertyConfig.basicText.parseFail")}),e.jsx(x.Item,{name:["formWrap","script"],noStyle:!0,children:e.jsx(hl,{})})]})},ze=window.$translation,mc={attrs:[{type:"Title",label:ze("edl.propertyConfig.basicChart.labelConfig"),key:"formItem"},...$,{type:"Input",label:ze("common.title"),name:["formItem","label"]},{type:"Input",label:ze("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Variable",label:ze("edl.component.componentSchema.defaultValue"),name:["defaultValue"]},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:ze("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:ze("edl.component.componentSchema.formTooltip")},{type:"Title",label:ze("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:ze("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:ze("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:ze("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:ze("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:ze("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:ze("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:ze("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:ze("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:ze("edl.propertyConfig.basicStaticTerm.config"),key:"formWrap"},{type:"function",render:l=>(l.setFieldValue(["formWrap","script"],`function render(value){
    return value;
}`),e.jsx(Gs,{},"StaticSetting"))}],config:{props:{x:0,y:0,formItem:{label:ze("edl.propertyConfig.basicUpload.showText"),name:"label"},visible:!0,formWrap:{emptyType:"-",showType:"text",dateType:"",numberType:"",script:""},defaultValue:""},style:{height:"100px"}},events:[],methods:[{name:"update",title:ze("edl.component.componentSchema.updateData")}]},Zs=({id:l,type:n,config:t,elements:o},r)=>{const s=window.$translation,{props:i}=t,c=a.useContext(ke),[p,b]=a.useState(i.visible!==void 0?i.visible:!0);a.useEffect(()=>{var u;const m=(u=t.props.formItem)==null?void 0:u.name,f=t.props.defaultValue;m&&!We(f)&&(c==null||c.setFieldValue(m,f))},[t.props.defaultValue]);const g=Ze(l);a.useImperativeHandle(r,()=>({show(){b(!0)},hide(){b(!1)}}));const y=t.props.formItem,d=window.AppsRender;return a.useEffect(()=>{b(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),p&&e.jsx(x.Item,{...y,name:y.name||void 0,children:e.jsx("span",{ref:g,style:t.style,children:o!=null&&o.length?e.jsx(d,{elements:o||[]}):e.jsx("div",{className:"slots",style:{height:80,lineHeight:"80px"},children:s("edl.component.containerComponent.dragDesc")})})})},uc=a.forwardRef(Zs),Le=window.$translation,bc={attrs:[{type:"Title",label:Le("edl.propertyConfig.basicChart.labelConfig"),key:"formItem"},...$,{type:"Input",label:Le("common.title"),name:["formItem","label"],props:{placeholder:`${Le("common.pleaseInput")}${Le("common.title")}`}},{type:"Input",label:Le("edl.component.componentSchema.field"),name:["formItem","name"],props:{placeholder:`${Le("common.pleaseInput")}${Le("edl.component.componentSchema.field")}`}},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:Le("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:Le("edl.component.componentSchema.formTooltip")},{type:"Title",label:Le("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:Le("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:Le("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:Le("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:Le("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:Le("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:Le("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:Le("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:Le("edl.propertyConfig.basicForm.layout.offset")}}],config:{props:{x:0,y:0,formItem:{label:Le("edl.component.dataEntryComponent.formItems")},formWrap:{},defaultValue:"",visible:!0},style:{}},events:[]},_s=({id:l,type:n,config:t,onChange:o},r)=>{const{setVisible:s,loading:i,visible:c,getDataList:p,data:b}=Ie(t),[g,y]=a.useState(!1),d=a.useContext(ke);window.usePageStore(u=>{const{page:h,selectPageItem:C}=u;return(h[(C==null?void 0:C.id)||""]||{}).variableData||{}}),a.useEffect(()=>{var C;const u=(C=t.props.formItem)==null?void 0:C.name,h=t.props.defaultValue||[];u&&!We(h)&&(d==null||d.setFieldValue(u,h))},[t.props.defaultValue]),a.useEffect(()=>{y(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]);const m=a.useMemo(()=>{if(!Array.isArray(b))return console.error("[checkbox]","data数据格式错误，请检查"),[];let u=[];return t.props.field.label==="label"&&t.props.field.value==="value"?typeof b[0]=="string"||typeof b[0]=="number"?u=b.map(h=>({label:h,value:h})):u=b:u=b.map(h=>{const C=h[t.props.field.label||"label"],w=h[t.props.field.value||"value"];return{label:ht(C)?C:"-",value:ht(w)?w:""}}),u},[b]);a.useImperativeHandle(r,()=>({show(){s(!0)},hide(){s(!1)},enable(){y(!1)},disable(){y(!0)},update:u=>{p(u)}}));const f=u=>{o==null||o({[t.props.formItem.name]:u})};return a.useEffect(()=>{s(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),c&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(eo.Group,{...t.props.formWrap,disabled:g,options:m,style:t.style,onChange:u=>f(u)})})},fc=a.forwardRef(_s),Se=window.$translation,yc={attrs:[{type:"Title",label:Se("edl.propertyConfig.basicChart.labelConfig"),key:"title"},...$,{type:"Input",label:Se("common.title"),name:["formItem","label"]},{type:"Input",label:Se("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Variable",label:Se("edl.component.componentSchema.defaultValue"),name:["defaultValue"],tooltip:Se("edl.propertyConfig.basicCheckbox.checkTips")},{type:"Switch",label:Se("edl.propertyConfig.basicForm.disabled"),name:["formWrap","disabled"]},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:Se("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:Se("edl.component.componentSchema.formTooltip")},{type:"Title",label:Se("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:Se("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:Se("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:Se("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:Se("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:Se("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:Se("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:Se("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:Se("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:Se("edl.propertyConfig.basicSelect.optionMode.fieldMapping"),key:"fieldMap"},{type:"Input",label:"label",name:["field","label"]},{type:"Input",label:"value",name:["field","value"]},{type:"Title",label:Se("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,visible:!0,formItem:{label:Se("edl.propertyConfig.basicCheckbox.checkbox"),name:"checkbox"},formWrap:{},field:{label:"label",value:"value"}},style:{},api:{sourceType:"json",source:[{label:Se("edl.propertyConfig.basicSelect.optionMode.option1"),value:1},{label:Se("edl.propertyConfig.basicSelect.optionMode.option2"),value:2}]}},events:[{value:"onChange",name:Se("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"update",title:Se("edl.component.componentSchema.updateData")}]},Xs=({id:l,type:n,config:t,onChange:o},r)=>{const{props:s}=t,i=a.useContext(ke),[c,p]=a.useState(s.visible!==void 0?s.visible:!0),[b,g]=a.useState(t.props.formWrap.disabled);a.useEffect(()=>{var f;const d=(f=t.props.formItem)==null?void 0:f.name,m=t.props.defaultValue;if(d&&!We(m)){const u=at(m,"HH:mm:ss");u.isValid()&&(i==null||i.setFieldValue(d,u))}},[t.props.defaultValue]),a.useEffect(()=>{g(t.props.formWrap.disabled)},[t.props.formWrap.disabled]),a.useImperativeHandle(r,()=>({show(){p(!0)},hide(){p(!1)},enable(){g(!1)},disable(){g(!0)}}));const y=d=>{o==null||o({[t.props.formItem.name]:d.format(t.props.formWrap.format||"HH:mm:ss")})};return a.useEffect(()=>{p(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),c&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(Ko,{...t.props.formWrap,disabled:b,variant:t.props.formWrap.variant||void 0,style:t.style,onChange:y})})},hc=a.forwardRef(Xs),B=window.$translation,gc={attrs:[{type:"Title",label:B("edl.propertyConfig.basicChart.labelConfig"),key:"title1"},...$,{type:"Input",label:B("common.title"),name:["formItem","label"]},{type:"Input",label:B("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Variable",label:B("edl.component.componentSchema.defaultValue"),name:["defaultValue"],props:{placeholder:"eg: 15:36:00"}},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:B("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:B("edl.component.componentSchema.formTooltip")},{type:"Title",label:B("edl.component.componentSchema.formConfig"),key:"title2"},{type:"Select",label:B("edl.propertyConfig.basicTimePicker.format"),name:["formWrap","format"],props:{options:[{value:"HH:mm:ss",label:B("edl.propertyConfig.basicText.HHmmss")},{value:"HH:mm",label:B("edl.propertyConfig.basicTimePicker.HHMM")},{value:"HHmmss",label:B("edl.propertyConfig.basicTimePicker.HHMMSS")},{value:"HHmm",label:B("edl.propertyConfig.basicTimePicker.HHmm")},{value:"HH",label:B("edl.propertyConfig.basicTimePicker.hour")},{value:"mm",label:B("edl.propertyConfig.basicTimePicker.minute")},{value:"ss",label:B("edl.propertyConfig.basicTimePicker.second")}]}},{type:"Input",label:B("edl.propertyConfig.basicInput.placeholder"),name:["formWrap","placeholder"],props:{placeholder:B("common.pleaseInput")}},{type:"Switch",label:B("edl.propertyConfig.basicInput.showClear"),name:["formWrap","allowClear"]},{type:"Switch",label:B("edl.propertyConfig.basicTimePicker.scrollValue"),tooltip:B("edl.propertyConfig.basicTimePicker.scrollTips"),name:["formWrap","changeOnScroll"]},{type:"Switch",label:B("edl.propertyConfig.basicButton.disable"),name:["formWrap","disabled"]},{type:"Switch",label:B("edl.propertyConfig.basicTimePicker.readonly"),name:["formWrap","inputReadOnly"]},{type:"InputNumber",label:B("edl.propertyConfig.basicTimePicker.step.hour"),name:["formWrap","hourStep"],tooltip:B("edl.propertyConfig.basicTimePicker.step.hourGap")},{type:"InputNumber",label:B("edl.propertyConfig.basicTimePicker.step.minute"),name:["formWrap","minuteStep"],tooltip:B("edl.propertyConfig.basicTimePicker.step.minuteGap")},{type:"InputNumber",label:B("edl.propertyConfig.basicTimePicker.step.second"),name:["formWrap","secondStep"],tooltip:B("edl.propertyConfig.basicTimePicker.step.secondGap")},{type:"Switch",label:B("edl.propertyConfig.basicTimePicker.showConfirm"),name:["formWrap","needConfirm"],tooltip:B("edl.propertyConfig.basicTimePicker.confirmTips")},{type:"Switch",label:B("edl.propertyConfig.basicTimePicker.showCurrent"),name:["formWrap","showNow"],tooltip:B("edl.propertyConfig.basicTimePicker.currentTips")},{type:"Switch",label:B("edl.propertyConfig.basicTimePicker.format12"),name:["formWrap","use12Hours"],tooltip:B("edl.propertyConfig.basicTimePicker.formatTips")},{type:"Select",label:B("edl.propertyConfig.basicInput.borderStyle"),name:["formWrap","variant"],props:{options:[{value:"",label:B("common.none")},{value:"outlined",label:B("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:B("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:B("edl.propertyConfig.basicForm.layout.fill")}]}},{type:"Title",label:B("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:B("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:B("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:B("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:B("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:B("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:B("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:B("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:B("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:B("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,formItem:{label:B("edl.propertyConfig.basicDate.time"),name:"timepicker"},visible:!0,formWrap:{placeholder:B("common.pleaseSelect"),allowClear:!0,format:"HH:mm:ss",changeOnScroll:!1,hourStep:1,minuteStep:1,secondStep:1,showNow:!0,use12Hours:!1,needConfirm:!0}},style:{}},events:[{value:"onChange",name:B("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"update",title:B("edl.component.componentSchema.updateData")}]},ei=({config:l,onChange:n},t)=>{const{props:o}=l,r=a.useContext(ke),[s,i]=a.useState(o.visible!==void 0?o.visible:!0),[c,p]=a.useState(l.props.formWrap.disabled);a.useEffect(()=>{var d;const g=(d=l.props.formItem)==null?void 0:d.name,y=l.props.defaultValue;if(g&&!We(y)){const m=l.props.formWrap.format||"HH:mm:ss",f=y.split(",").map(u=>at(u,m));r==null||r.setFieldValue(g,f)}},[l.props.defaultValue]),a.useEffect(()=>{p(l.props.formWrap.disabled)},[l.props.formWrap.disabled]),a.useImperativeHandle(t,()=>({show(){i(!0)},hide(){i(!1)},enable(){p(!1)},disable(){p(!0)}}));const b=g=>{const y={},{startField:d,endField:m,formItem:{name:f},formWrap:{format:u}}=l.props,[h,C]=g.map(w=>w==null?void 0:w.format(u));d&&m?(y[d]=h,y[m]=C,delete y[f]):y[f]=[h,C],n==null||n(y)};return a.useEffect(()=>{i(l.props.visible!==void 0?l.props.visible:!0)},[l.props.visible]),s&&e.jsx(x.Item,{...l.props.formItem,children:e.jsx(Ko.RangePicker,{...l.props.formWrap,disabled:c,variant:l.props.formWrap.variant||void 0,style:l.style,onChange:b})})},Cc=a.forwardRef(ei),R=window.$translation,vc={attrs:[{type:"Title",label:R("edl.propertyConfig.basicChart.labelConfig"),key:"title1"},...$,{type:"Input",label:R("common.title"),name:["formItem","label"]},{type:"Input",label:R("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Variable",label:R("edl.component.componentSchema.defaultValue"),name:["defaultValue"],tooltip:R("edl.component.componentSchema.valuesSeparatedByCommas"),props:{placeholder:"eg: 10:36:00,12:20:00"}},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:R("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:R("edl.component.componentSchema.formTooltip")},{type:"Title",label:R("edl.propertyConfig.basicDate.fieldBreak"),key:"FieldExport"},{type:"Input",label:R("edl.propertyConfig.basicDate.startField"),name:["startField"],tooltip:R("edl.propertyConfig.basicDate.startFieldTips"),props:{placeholder:R("common.pleaseInput")}},{type:"Input",label:R("edl.propertyConfig.basicDate.endField"),name:["endField"],tooltip:R("edl.propertyConfig.basicDate.endFieldTips"),props:{placeholder:R("common.pleaseInput")}},{type:"Title",label:R("edl.component.componentSchema.formConfig"),key:"title2"},{type:"Select",label:R("edl.propertyConfig.basicTimePicker.format"),name:["formWrap","format"],props:{options:[{value:"HH:mm:ss",label:R("edl.propertyConfig.basicText.HHmmss")},{value:"HH:mm",label:R("edl.propertyConfig.basicTimePicker.HHMM")},{value:"HHmmss",label:R("edl.propertyConfig.basicTimePicker.HHMMSS")},{value:"HHmm",label:R("edl.propertyConfig.basicTimePicker.HHmm")},{value:"HH",label:R("edl.propertyConfig.basicTimePicker.hour")},{value:"mm",label:R("edl.propertyConfig.basicTimePicker.minute")},{value:"ss",label:R("edl.propertyConfig.basicTimePicker.second")}]}},{type:"Input",label:R("edl.propertyConfig.basicInput.placeholder"),name:["formWrap","placeholder"],props:{placeholder:R("common.pleaseInput")}},{type:"Switch",label:R("edl.propertyConfig.basicInput.showClear"),name:["formWrap","allowClear"]},{type:"Switch",label:R("edl.propertyConfig.basicTimePicker.scrollValue"),tooltip:R("edl.propertyConfig.basicTimePicker.scrollTips"),name:["formWrap","changeOnScroll"]},{type:"Switch",label:R("edl.propertyConfig.basicButton.disable"),name:["formWrap","disabled"]},{type:"Switch",label:R("edl.propertyConfig.basicTimePicker.readonly"),name:["formWrap","inputReadOnly"]},{type:"InputNumber",label:R("edl.propertyConfig.basicTimePicker.step.hour"),name:["formWrap","hourStep"],tooltip:R("edl.propertyConfig.basicTimePicker.step.hourGap")},{type:"InputNumber",label:R("edl.propertyConfig.basicTimePicker.step.minute"),name:["formWrap","minuteStep"],tooltip:R("edl.propertyConfig.basicTimePicker.step.minuteGap")},{type:"InputNumber",label:R("edl.propertyConfig.basicTimePicker.step.second"),name:["formWrap","secondStep"],tooltip:R("edl.propertyConfig.basicTimePicker.step.secondGap")},{type:"Switch",label:R("edl.propertyConfig.basicTimePicker.showConfirm"),name:["formWrap","needConfirm"],tooltip:R("edl.propertyConfig.basicTimePicker.confirmTips")},{type:"Switch",label:R("edl.propertyConfig.basicTimePicker.showCurrent"),name:["formWrap","showNow"],tooltip:R("edl.propertyConfig.basicTimePicker.currentTips")},{type:"Switch",label:R("edl.propertyConfig.basicTimePicker.format12"),name:["formWrap","use12Hours"],tooltip:R("edl.propertyConfig.basicTimePicker.formatTips")},{type:"Select",label:R("edl.propertyConfig.basicInput.borderStyle"),name:["formWrap","variant"],props:{options:[{value:"",label:R("common.none")},{value:"outlined",label:R("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:R("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:R("edl.propertyConfig.basicForm.layout.fill")}]}},{type:"Title",label:R("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:R("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:R("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:R("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:R("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:R("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:R("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:R("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:R("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:R("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,formItem:{label:R("edl.propertyConfig.basicDate.time"),name:"timepickerrange"},visible:!0,formWrap:{placeholder:R("common.pleaseSelect"),allowClear:!0,format:"HH:mm:ss",changeOnScroll:!1,hourStep:1,minuteStep:1,secondStep:1,showNow:!0,use12Hours:!1,needConfirm:!0}},style:{}},events:[{value:"onChange",name:R("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"update",title:R("edl.component.componentSchema.updateData")}]},ti=({id:l,type:n,config:t,onChange:o},r)=>{var h,C;const{setVisible:s,loading:i,visible:c,getDataList:p,data:b}=Ie(t),[g,y]=a.useState(!1),d=a.useContext(ke),{dataProps:m}=t.props;a.useEffect(()=>{var v;const w=(v=t.props.formItem)==null?void 0:v.name,S=t.props.defaultValue;w&&!We(S)&&(d==null||d.setFieldValue(w,S))},[t.props.defaultValue]),a.useEffect(()=>{var w;y(((w=t.props.formWrap)==null?void 0:w.disabled)||!1)},[(h=t.props.formWrap)==null?void 0:h.disabled]);const f=a.useMemo(()=>Array.isArray(b)?b.map(w=>{if(m){if(typeof w=="string"||typeof w=="number")return{label:w,value:w};if(typeof w=="object"&&w!==null)return{label:w[m.label],value:w[m.value]}}return w}):(console.error("[segmentd]","data数据格式错误，请检查"),[]),[b,m]);a.useImperativeHandle(r,()=>({show(){s(!0)},hide(){s(!1)},enable(){y(!1)},disable(){y(!0)},update:w=>{p(w)}}));const u=w=>{o&&o({[t.props.formItem.name]:w})};return a.useEffect(()=>{s(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),c&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(Go,{disabled:g,block:(C=t.props.formWrap)==null?void 0:C.block,options:f,onChange:u,defaultValue:t.props.defaultValue})})},xc=a.forwardRef(ti),fe=window.$translation,wc={attrs:[...$,{type:"Collapse",label:fe("edl.propertyConfig.basicChart.labelConfig"),key:"title1",props:{items:[{type:"Input",label:fe("common.title"),name:["formItem","label"]},{type:"Input",label:fe("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Variable",label:fe("edl.component.componentSchema.defaultValue"),name:["defaultValue"]},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:fe("edl.component.componentSchema.formTooltip")}]}},{type:"Collapse",label:fe("edl.component.componentSchema.field",{addSpaceAfterEn:!0})+fe("common.setting"),key:"fieldSet",props:{items:[{type:"Input",label:fe("edl.component.componentSchema.nameFieldSet"),name:["dataProps","label"]},{type:"Input",label:fe("edl.component.componentSchema.valueFieldSet"),name:["dataProps","value"]}]}},{type:"Collapse",label:fe("edl.component.componentSchema.formConfig"),key:"title2",props:{items:[{type:"Switch",label:fe("edl.propertyConfig.basicTextArea.autoFit"),name:["formWrap","block"]},{type:"Switch",label:fe("edl.propertyConfig.basicForm.disabled"),name:["formWrap","disabled"]}]}},{type:"Collapse",label:fe("edl.component.componentSchema.layout"),key:"FormLayout",props:{items:[{type:"InputNumber",label:fe("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:fe("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:fe("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:fe("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:fe("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:fe("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:fe("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:fe("edl.propertyConfig.basicForm.layout.offset")}}]}},{type:"Title",label:fe("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,formItem:{label:fe("edl.component.featureComponent.segmented"),name:"segmented"},defaultValue:fe("edl.propertyConfig.basicSegment.weekly"),formWrap:{},dataProps:{label:"label",value:"value"},visible:!0},style:{},api:{sourceType:"json",source:[fe("edl.propertyConfig.basicSegment.daily"),fe("edl.propertyConfig.basicSegment.weekly"),fe("edl.propertyConfig.basicSegment.monthly"),fe("edl.propertyConfig.basicSegment.yearly")]}},events:[{value:"onChange",name:fe("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"update",title:fe("edl.component.componentSchema.updateData")}]},li=({id:l,type:n,config:t,onChange:o},r)=>{const s=a.useContext(ke),[i,c]=a.useState(!1),{setVisible:p,loading:b,visible:g,getDataList:y,data:d}=Ie(t);a.useEffect(()=>{var C;const u=(C=t.props.formItem)==null?void 0:C.name,h=t.props.defaultValue;u&&!We(h)&&(s==null||s.setFieldValue(u,h))},[t.props.defaultValue]),a.useEffect(()=>{c(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]);const m=a.useMemo(()=>Array.isArray(d)?d:(console.error("[select]","data数据格式错误，请检查"),[]),[d]);a.useImperativeHandle(r,()=>({show(){p(!0)},hide(){p(!1)},enable(){c(!1)},disable(){c(!0)},update:u=>{y(u)}}));const f=u=>{o&&o({[t.props.formItem.name]:u})};return a.useEffect(()=>{p(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),g&&e.jsx(x.Item,{style:{...t.style},...t.props.formItem,children:e.jsx(Al,{...t.props.formWrap,disabled:i,variant:t.props.formWrap.variant||void 0,options:m,onChange:u=>f(u)})})},Sc=a.forwardRef(li),U=window.$translation,Ic={attrs:[...$,{type:"Collapse",label:U("edl.propertyConfig.basicChart.labelConfig"),key:"title1",props:{items:[{type:"Input",label:U("common.title"),name:["formItem","label"]},{type:"Input",label:U("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Variable",label:U("edl.component.componentSchema.defaultValue"),name:["defaultValue"]},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:U("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:U("edl.component.componentSchema.formTooltip")}]}},{type:"Collapse",label:U("edl.component.componentSchema.formConfig"),key:"title2",props:{items:[{type:"Switch",label:U("edl.propertyConfig.basicCascadeSelection.supportMultip"),name:["formWrap","multiple"]},{type:"Switch",label:U("edl.propertyConfig.basicInput.showClear"),name:["formWrap","allowClear"]},{type:"Switch",label:U("edl.propertyConfig.basicForm.disabled"),name:["formWrap","disabled"]},{type:"Input",label:U("edl.propertyConfig.basicSelect.optionMode.defaultTips"),name:["formWrap","placeholder"]},{type:"Select",label:U("edl.propertyConfig.basicCascadeSelection.fillMethod"),name:["formWrap","showCheckedStrategy"],tooltip:U("edl.propertyConfig.basicCascadeSelection.fillTips"),props:{options:[{value:Al.SHOW_CHILD,label:U("edl.propertyConfig.basicCascadeSelection.onlyChild")},{value:Al.SHOW_PARENT,label:U("edl.propertyConfig.basicCascadeSelection.onlyParent")}]}},{type:"Select",label:U("edl.propertyConfig.basicCascadeSelection.presetPos"),name:["formWrap","placement"],props:{options:[{value:"bottomLeft",label:"bottomLeft"},{value:"bottomRight",label:"bottomRight"},{value:"topLeft",label:"topLeft"},{value:"topRight",label:"topRight"}]}},{type:"Switch",label:U("edl.propertyConfig.basicCascadeSelection.showSearch"),name:["formWrap","showSearch"]},{type:"Select",label:U("edl.propertyConfig.basicCascadeSelection.expandMethod"),name:["formWrap","expandTrigger"],tooltip:U("edl.propertyConfig.basicCascadeSelection.subMenuExpandMethod"),props:{options:[{value:"click",label:U("edl.propertyConfig.basicCascadeSelection.clickExpand")},{value:"hover",label:U("edl.propertyConfig.basicCascadeSelection.hoverExpand")}]}},{type:"InputNumber",label:U("edl.propertyConfig.basicSelect.optionMode.maxTagCount"),name:["formWrap","maxTagCount"],tooltip:U("edl.propertyConfig.basicCascadeSelection.tagTips"),props:{placeholder:U("common.pleaseInput")}},{type:"Select",label:U("edl.propertyConfig.basicInput.borderStyle"),name:["formWrap","variant"],props:{options:[{value:"",label:U("common.none")},{value:"outlined",label:U("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:U("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:U("edl.propertyConfig.basicForm.layout.fill")}]}}]}},{type:"Collapse",label:U("edl.component.componentSchema.layout"),key:"FormLayout",props:{items:[{type:"InputNumber",label:U("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:U("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:U("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:U("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:U("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:U("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:U("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:U("edl.propertyConfig.basicForm.layout.offset")}}]}},{type:"Collapse",label:U("edl.propertyConfig.basicSelect.optionMode.fieldMapping"),key:"fieldMap",props:{items:[{type:"Input",label:"label",name:["formWrap","fieldNames","label"]},{type:"Input",label:"value",name:["formWrap","fieldNames","value"]},{type:"Input",label:"children",name:["formWrap","fieldNames","children"]}]}},{type:"Title",label:U("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,visible:!0,formItem:{label:U("edl.component.dataEntryComponent.cascadeSelection"),name:"cascader"},formWrap:{placeholder:U("common.pleaseSelect"),allowClear:!0,showCheckedStrategy:Al.SHOW_PARENT,showSearch:!1,placement:"bottomLeft",fieldNames:{label:"label",value:"value",children:"children"}}},style:{},api:{sourceType:"json",source:[{value:"zhejiang",label:"Zhejiang",children:[{value:"hangzhou",label:"Hangzhou",children:[{value:"xihu",label:"West Lake"}]}]},{value:"jiangsu",label:"Jiangsu",children:[{value:"nanjing",label:"Nanjing",children:[{value:"zhonghuamen",label:"Zhong Hua Men"}]}]}]}},events:[{value:"onChange",name:U("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"update",title:U("edl.component.componentSchema.updateData")}]},oi=({id:l,type:n,config:t,onChange:o},r)=>{const{props:s}=t,i=a.useContext(ke),[c,p]=a.useState(s.visible!==void 0?s.visible:!0),[b,g]=a.useState(!1);a.useEffect(()=>{var f;const d=(f=t.props.formItem)==null?void 0:f.name,m=t.props.defaultValue;d&&!We(m)&&(i==null||i.setFieldValue(d,m))},[t.props.defaultValue]),a.useEffect(()=>{g(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]);const y=d=>{o==null||o({[t.props.formItem.name]:d})};return a.useImperativeHandle(r,()=>({show(){p(!0)},hide(){p(!1)},enable(){g(!1)},disable(){g(!0)}})),a.useEffect(()=>{p(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),c&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(Ua,{...t.props.formWrap,disabled:b,style:t.style,onChange:d=>y(d)})})},jc=a.forwardRef(oi),we=window.$translation,Tc={attrs:[{type:"Title",label:we("edl.propertyConfig.basicChart.labelConfig"),key:"formItem"},...$,{type:"Input",label:we("common.title"),name:["formItem","label"],props:{placeholder:`${we("common.pleaseInput")}${we("common.title")}`}},{type:"Input",label:we("edl.component.componentSchema.field"),name:["formItem","name"],props:{placeholder:we("common.pleaseInput")}},{type:"Variable",label:we("edl.component.componentSchema.defaultValue"),name:["defaultValue"],props:{placeholder:we("common.pleaseInput")}},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:we("edl.component.componentSchema.formDesc"),props:{placeholder:we("edl.component.componentSchema.formTooltip")}},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:we("edl.component.componentSchema.formTooltip"),props:{placeholder:we("edl.component.componentSchema.placeholder")}},{type:"Title",label:we("edl.component.componentSchema.formConfig"),key:"formWrap"},{type:"InputNumber",label:"最小值",name:["formWrap","min"]},{type:"InputNumber",label:"最大值",name:["formWrap","max"]},{type:"InputNumber",label:"步长",name:["formWrap","step"]},{type:"Switch",label:"双滑块",name:["formWrap","range"]},{type:"Switch",label:"反向坐标",name:["formWrap","reverse"]},{type:"Switch",label:we("edl.propertyConfig.basicButton.disable"),name:["formWrap","disabled"]},{type:"Switch",label:"方向",name:["formWrap","vertical"],tooltip:"默认水平方向"},{type:"Title",label:we("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:we("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:we("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:we("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:we("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:we("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:we("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:we("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:we("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:we("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,defaultValue:5,formItem:{label:"滑动条",name:"slider"},formWrap:{min:0,max:10,step:1,range:!1,reverse:!1,vertical:!1},visible:!0},style:{}},events:[{value:"onChange",name:we("edl.propertyConfig.basicInput.onChange")}]},ai=({id:l,type:n,config:t,onChange:o},r)=>{const s=a.useContext(ke),{setVisible:i,loading:c,visible:p,getDataList:b,data:g}=Ie(t),[y,d]=a.useState(!1);a.useEffect(()=>{var C;const u=(C=t.props.formItem)==null?void 0:C.name,h=t.props.defaultValue;u&&!We(h)&&(s==null||s.setFieldValue(u,h))},[t.props.defaultValue]),a.useEffect(()=>{d(t.props.formWrap.disabled||!1)},[t.props.formWrap.disabled]);const m=a.useMemo(()=>Array.isArray(g)?g:(console.error("[TreeSelect]","data数据格式错误，请检查"),[]),[g]);a.useImperativeHandle(r,()=>({show(){i(!0)},hide(){i(!1)},enable(){d(!1)},disable(){d(!0)},update:u=>{b(u)}}));const f=u=>{o&&o({[t.props.formItem.name]:u})};return a.useEffect(()=>{i(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),p&&e.jsx(x.Item,{...t.props.formItem,children:e.jsx(Fl,{...t.props.formWrap,disabled:y,variant:t.props.formWrap.variant||void 0,treeData:m,style:t.style,onChange:u=>f(u)})})},kc=a.forwardRef(ai),ye=window.$translation,Ac={attrs:[{type:"Title",label:ye("edl.propertyConfig.basicChart.labelConfig"),key:"title1"},...$,{type:"Input",label:ye("common.title"),name:["formItem","label"]},{type:"Input",label:ye("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Variable",label:ye("edl.component.componentSchema.defaultValue"),name:["defaultValue"]},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:ye("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:ye("edl.component.componentSchema.formTooltip")},{type:"Title",label:ye("edl.component.componentSchema.formConfig"),key:"title2"},{type:"Switch",label:ye("edl.propertyConfig.basicInput.showClear"),name:["formWrap","allowClear"]},{type:"Switch",label:ye("edl.propertyConfig.basicForm.disabled"),name:["formWrap","disabled"]},{type:"Switch",label:"labelInValue",name:["formWrap","labelInValue"]},{type:"InputNumber",label:ye("edl.propertyConfig.basicSelect.optionMode.maxTagCount"),name:["formWrap","maxTagCount"]},{type:"Switch",label:ye("edl.propertyConfig.basicCascadeSelection.supportMultip"),name:["formWrap","multiple"]},{type:"Switch",label:ye("edl.propertyConfig.basicSelect.optionMode.defaultTips"),name:["formWrap","placeholder"]},{type:"Select",label:"弹出位置",name:["formWrap","placement"],props:{options:[{value:"bottomLeft",label:"bottomLeft"},{value:"bottomRight",label:"bottomRight"},{value:"topLeft",label:"topLeft"},{value:"topRight",label:"topRight"}]}},{type:"Select",label:"节点回填",name:["formWrap","showCheckedStrategy"],tooltip:"节点为复选框时生效。",props:{options:[{value:Fl.SHOW_ALL,label:"显示所有"},{value:Fl.SHOW_PARENT,label:"显示父节点"},{value:Fl.SHOW_CHILD,label:"显示子节点"}]}},{type:"Switch",label:"支持搜索",name:["formWrap","showSearch"]},{type:"Switch",label:"显示复选框",name:["formWrap","treeCheckable"]},{type:"Switch",label:"父子联动",name:["formWrap","treeCheckStrictly"]},{type:"Switch",label:"简单格式",name:["formWrap","treeDataSimpleMode"],tooltip:'简单格式的 treeData，[{id:1, pId:0, value:1,title:"test"]'},{type:"Switch",label:"展开所有",name:["formWrap","treeDefaultExpandAll"]},{type:"Switch",label:"展示线条",name:["formWrap","treeLine"]},{type:"Select",label:ye("edl.propertyConfig.basicInput.borderStyle"),name:["formWrap","variant"],props:{options:[{value:"",label:ye("common.none")},{value:"outlined",label:ye("edl.propertyConfig.basicForm.layout.outerBorder")},{value:"borderless",label:ye("edl.propertyConfig.basicForm.layout.noBorder")},{value:"filled",label:ye("edl.propertyConfig.basicForm.layout.fill")}]}},{type:"Title",label:ye("edl.component.componentSchema.layout"),key:"FormLayout"},{type:"InputNumber",label:ye("edl.propertyConfig.basicInput.labelPlaceholder"),name:["formItem","labelCol","span"],props:{placeholder:ye("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:ye("edl.propertyConfig.basicForm.layout.labelOffset"),name:["formItem","labelCol","offset"],props:{placeholder:ye("edl.propertyConfig.basicForm.layout.offset")}},{type:"InputNumber",label:ye("edl.propertyConfig.basicForm.layout.itemSpan"),name:["formItem","wrapperCol","span"],props:{placeholder:ye("edl.propertyConfig.basicInput.placeColumn")}},{type:"InputNumber",label:ye("edl.propertyConfig.basicForm.layout.itemOffset"),name:["formItem","wrapperCol","offset"],props:{placeholder:ye("edl.propertyConfig.basicForm.layout.offset")}},{type:"Title",label:ye("edl.propertyConfig.basicSelect.optionMode.fieldMapping"),key:"fieldMap"},{type:"Input",label:"label",name:["formWrap","fieldNames","label"]},{type:"Input",label:"value",name:["formWrap","fieldNames","value"]},{type:"Input",label:"value",name:["formWrap","fieldNames","children"]},{type:"Title",label:ye("edl.component.componentSchema.validaRule"),key:"rules"},{type:"function",render:l=>e.jsx(Ue,{form:l},"rule-list")}],config:{props:{x:0,y:0,formItem:{label:"树选择",name:"treeSelect"},visible:!0,formWrap:{allowClear:!0,fieldNames:{label:"title",value:"value",children:"children"},labelInValue:!1,multiple:!1,placement:"bottomLeft"}},style:{minWidth:120},api:{sourceType:"json",source:[{value:"parent 1",title:"parent 1",children:[{value:"parent 1-0",title:"parent 1-0",children:[{value:"leaf1",title:"leaf1"},{value:"leaf2",title:"leaf2"}]},{value:"parent 1-1",title:"parent 1-1",children:[{value:"leaf3",title:e.jsx("b",{style:{color:"#08c"},children:"leaf3"})}]}]}]}},events:[{value:"onChange",name:ye("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"update",title:ye("edl.component.componentSchema.updateData")}]},ni=({id:l,type:n,config:t,elements:o},r)=>{const{props:s}=t,[i,c]=a.useState(s.visible!==void 0?s.visible:!0),p=a.useContext(ke),b=window.$translation;return a.useEffect(()=>{p==null||p.setFieldValue(t.props.formItem.name,[{}])},[]),a.useImperativeHandle(r,()=>({show(){c(!0)},hide(){c(!1)}})),a.useEffect(()=>{c(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),i&&e.jsx(x.List,{...t.props.formItem,children:(g,{add:y,remove:d})=>e.jsxs(e.Fragment,{children:[g.map(({key:m,name:f})=>e.jsxs(xe,{style:{display:"flex",width:"100%",marginBottom:8,padding:"0 10px"},align:"baseline",children:[e.jsx(xe,{align:"baseline",direction:t.props.formItem.direction,children:o!=null&&o.length?o==null?void 0:o.map(u=>e.jsx(uo,{item:{...u,name:String(f),config:u.config||{}}},u.id)):e.jsx("div",{className:"slots",style:{width:300,height:100,lineHeight:"100px"},children:b("edl.component.containerComponent.dragDesc")})},m),e.jsx(st,{onClick:()=>y({title:"-",dataIndex:f+1},f+1)}),e.jsx(Wt,{onClick:()=>d(f)})]},m)),e.jsx(x.Item,{children:e.jsx(ee,{type:"dashed",onClick:()=>y(),block:!0,icon:e.jsx(st,{}),children:b("buComp.assetManagement.create")})})]})})},Fc=a.forwardRef(ni),Jl=window.$translation,Ec={attrs:[{type:"Title",label:Jl("edl.component.componentSchema.formConfig"),key:"formWrap"},...$,{type:"Input",label:Jl("edl.component.componentSchema.field"),name:["formItem","name"],props:{placeholder:Jl("common.pleaseInput")}}],config:{props:{x:0,y:0,formItem:{name:"formList",direction:"horizontal"},visible:!0},style:{}},events:[]},ri=({config:l,form:n})=>{var b,g,y,d,m;const t=window.$translation,[o,r]=a.useState([]),s=a.useMemo(()=>{var u;const f={key:wt("key")};return(u=l.props.formWrap)==null||u.columns.map(h=>{ht(h.defaultValue)&&(h.type==="date"?typeof h.defaultValue=="string"?f[h.dataIndex]=at(h.defaultValue):f[h.dataIndex]=h.defaultValue:h.type==="select"?h.dataSource==="static"?f[h.dataIndex]=h.dataType==="text"?h.defaultValue:Number(h.defaultValue):f[h.dataIndex]=El(h.options.value):f[h.dataIndex]=h.defaultValue)}),f},[(b=l.props.formWrap)==null?void 0:b.columns]);a.useEffect(()=>{const f=n==null?void 0:n.getFieldValue(l.props.formItem.name);if(f)f.length!==o.length&&r(()=>[...f.map(u=>({...s,key:u.id||wt("key")}))]);else{const u={...s,key:wt("key")};n==null||n.setFieldValue(l.props.formItem.name,[u]),r(()=>[u])}},[n==null?void 0:n.getFieldValue((g=l.props.formItem)==null?void 0:g.name)]);const i=f=>{var h;if(!l.props.formItem.name)return window.$message.error("请配置name字段");const u=((h=n==null?void 0:n.getFieldsValue())==null?void 0:h[l.props.formItem.name])||[];u.splice(f+1,0,{...s,key:wt("key")}),n==null||n.setFieldValue(l.props.formItem.name,[...u]),r(()=>[...u.map(C=>({...C,key:C.key||C.id||wt("key")}))])},c=f=>{var h;const u=((h=n==null?void 0:n.getFieldsValue())==null?void 0:h[l.props.formItem.name])||[];u.splice(f,1),n==null||n.setFieldValue(l.props.formItem.name,[...u]),r(()=>[...u])},p=a.useMemo(()=>{var f;return{...l.props.formWrap,rowKey:"key",columns:(f=l.props.formWrap)==null?void 0:f.columns.map((u,h)=>{var w,S;const C=[];return(S=(w=u.formItem)==null?void 0:w.rules)==null||S.map(v=>{const I={...v};v.pattern&&(I.pattern=new RegExp(v.pattern)),C.push(I)}),{...u,key:u.dataIndex||h,render(v,I,j){if(u.type==="label")return v;if(u.type==="text")return e.jsx(x.Item,{style:{margin:0},name:[l.props.formItem.name,j,u.dataIndex],colon:!1,label:" ",rules:C,children:e.jsx(O,{placeholder:u.placeholder,style:{width:"100%"}})});if(u.type==="number")return e.jsx(x.Item,{style:{margin:0},name:[l.props.formItem.name,j,u.dataIndex],colon:!1,label:" ",rules:C,children:e.jsx(It,{placeholder:u.placeholder,style:{width:"100%"}})});if(u.type==="select"){let k=[];return u.dataSource==="dynamic"?(k=El(u.options.value)||[],Array.isArray(k)&&u.field.label&&u.field.value&&(k=k.map(T=>({label:T[u.field.label],value:T[u.field.value]})))):k=u.options||[],e.jsx(x.Item,{style:{margin:0},name:[l.props.formItem.name,j,u.dataIndex],colon:!1,label:" ",rules:C,children:e.jsx(W,{placeholder:u.placeholder,options:k||[],mode:u.mode,style:{width:"100%"}})})}if(u.type==="date")return e.jsx(x.Item,{style:{margin:0},name:[l.props.formItem.name,j,u.dataIndex],colon:!1,label:" ",rules:C,children:e.jsx(Vl,{placeholder:u.placeholder,format:u.format,style:{width:"100%"}})});if(u.type==="switch")return e.jsx(x.Item,{style:{margin:0},name:[l.props.formItem.name,j,u.dataIndex],colon:!1,label:" ",rules:C,children:e.jsx(Qe,{})})}}}).concat([{title:"操作",key:"action",align:"center",render(u,h,C){return e.jsxs(xe,{children:[e.jsx("a",{onClick:()=>i(C),children:"添加"}),e.jsx("a",{onClick:()=>c(C),children:"删除"})]})}}]),dataSource:o}},[o,(y=l.props.formWrap)==null?void 0:y.columns]);return e.jsxs(e.Fragment,{children:[e.jsx(Wo,{...p,pagination:!1,scroll:{x:(d=p.scroll)==null?void 0:d.x,y:(m=p.scroll)==null?void 0:m.y}}),e.jsx(ee,{type:"dashed",block:!0,icon:e.jsx(st,{}),style:{marginTop:10},onClick:()=>i(o.length),children:t("buComp.assetManagement.create")})]})},si=({config:l},n)=>{const{props:t}=l,[o,r]=a.useState(t.visible!==void 0?t.visible:!0),s=a.useContext(ke);return a.useImperativeHandle(n,()=>({show(){r(!0)},hide(){r(!1)}})),a.useEffect(()=>{r(l.props.visible!==void 0?l.props.visible:!0)},[l.props.visible]),o&&e.jsx(x.Item,{...l.props.formItem,children:e.jsx(ri,{config:l,form:s})})},Dc=a.memo(a.forwardRef(si)),re=window.$translation,ii=a.memo(l=>{const[n,t]=a.useState(!1),[o,r]=a.useState(0),[s]=x.useForm(),{selectedElement:i,elementsMap:c,editTableProps:p}=window.usePageStore(y=>{const{page:d,selectPageItem:m,selectedElement:f,editTableProps:u}=y,h=d[(m==null?void 0:m.id)||""]||{};return{selectedElement:f,elementsMap:h.elementsMap||{},editTableProps:u}});a.useImperativeHandle(l.columnRef,()=>({open(y){const d=c[i==null?void 0:i.id],{defaultValue:m,...f}=d.config.props.formWrap.columns[y];s.resetFields(),s.setFieldsValue({align:"center",fixed:"",type:"text",mode:"",dataSource:"static",dataType:"number",defaultValue:m,...f}),f.type==="date"&&m&&s.setFieldsValue({defaultValue:typeof m=="string"?at(m):m}),r(y),t(!0)}}));const b=()=>{s.validateFields().then(()=>{const y=s.getFieldsValue();y.dataType==="number"&&Array.isArray(y.options)&&y.options.map(d=>{d.value=isNaN(d.value)?d.value:Number(d.value)}),p({id:i==null?void 0:i.id,type:"formTable",index:o,props:{...y,key:y.dataIndex||o}}),l.update(y,o),t(!1)})},g=()=>{t(!1)};return e.jsx(Ot,{title:"列设置",open:n,onOk:b,onCancel:g,width:800,children:e.jsxs(x,{form:s,labelCol:{span:8},wrapperCol:{span:16},children:[e.jsxs(_l,{title:re("edl.propertyConfig.basicConfig"),size:"small",children:[e.jsxs(Oe,{children:[e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:re("common.title"),name:"title",rules:[{required:!0,message:re("common.pleaseInput")}],children:e.jsx(O,{})})}),e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:re("edl.propertyConfig.basicColumn.dataIndex"),name:"dataIndex",rules:[{required:!0,message:re("common.pleaseInput")}],children:e.jsx(O,{})})})]}),e.jsxs(Oe,{children:[e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:re("common.width"),name:"width",children:e.jsx(It,{placeholder:"eg: 100"})})}),e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:re("edl.propertyConfig.basicColumn.align"),name:"align",children:e.jsxs(he.Group,{buttonStyle:"solid",children:[e.jsx(he.Button,{value:"left",children:re("edl.propertyConfig.basicColumn.leftAlign")}),e.jsx(he.Button,{value:"center",children:re("edl.propertyConfig.basicColumn.centerAlign")}),e.jsx(he.Button,{value:"right",children:re("edl.propertyConfig.basicColumn.rightAlign")})]})})})]}),e.jsxs(Oe,{children:[e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:re("edl.propertyConfig.basicColumn.fixWay"),name:"fixed",children:e.jsxs(he.Group,{buttonStyle:"solid",children:[e.jsx(he.Button,{value:"",children:re("common.default")}),e.jsx(he.Button,{value:"left",children:re("edl.propertyConfig.basicColumn.leftFix")}),e.jsx(he.Button,{value:"right",children:re("edl.propertyConfig.basicColumn.rightFix")})]})})}),e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:re("edl.propertyConfig.basicColumn.columnType"),name:"type",children:e.jsxs(W,{children:[e.jsx(W.Option,{value:"label",children:re("edl.component.featureComponent.text")}),e.jsx(W.Option,{value:"text",children:re("edl.component.dataEntryComponent.textBox")}),e.jsx(W.Option,{value:"number",children:re("edl.component.dataEntryComponent.numberBox")}),e.jsx(W.Option,{value:"date",children:re("edl.component.dataEntryComponent.date")}),e.jsx(W.Option,{value:"select",children:re("edl.component.dataEntryComponent.dropDownBox")}),e.jsx(W.Option,{value:"switch",children:re("edl.component.dataEntryComponent.switch")})]})})})]})]}),e.jsx(x.Item,{noStyle:!0,shouldUpdate:!0,children:y=>{const d=y.getFieldValue("type");return d!=="label"&&e.jsxs(_l,{title:"表单配置",style:{marginTop:20},size:"small",children:[e.jsxs(x.Item,{label:"默认值",name:"defaultValue",labelCol:{span:4},children:[(d==="text"||d==="select")&&e.jsx(O,{placeholder:re("common.pleaseInput")}),d==="number"&&e.jsx(It,{placeholder:re("common.pleaseInput"),style:{width:"100%"}}),d==="date"&&e.jsx(Vl,{placeholder:"请选择日期",format:"YYYY-MM-DD"}),d==="switch"&&e.jsx(Qe,{})]}),d!=="switch"&&e.jsx(x.Item,{label:re("edl.component.componentSchema.placeholder"),name:"placeholder",labelCol:{span:4},children:e.jsx(O,{placeholder:re("common.pleaseInput")})}),d==="select"?e.jsxs(e.Fragment,{children:[e.jsx(x.Item,{label:"包含Label",name:["labelInValue"],labelCol:{span:4},tooltip:"提交时，选中的值包含Label和value",children:e.jsx(Qe,{})}),e.jsx(x.Item,{label:"选项模式",name:"mode",labelCol:{span:4},children:e.jsxs(he.Group,{buttonStyle:"solid",children:[e.jsx(he.Button,{value:"",children:"单选"}),e.jsx(he.Button,{value:"multiple",children:"多选"}),e.jsx(he.Button,{value:"tags",children:"标签"})]})}),e.jsx(x.Item,{label:"数据源类型",name:"dataSource",labelCol:{span:4},tooltip:"下拉框的数据来源，静态数据需要手动添加，动态数据可以选择绑定变量。",children:e.jsxs(he.Group,{buttonStyle:"solid",children:[e.jsx(he.Button,{value:"static",children:"静态数据"}),e.jsx(he.Button,{value:"dynamic",children:"动态数据"})]})}),e.jsx(x.Item,{name:["dataType"],label:"数据类型",labelCol:{span:4},tooltip:"下拉选项值(value)对应的类型，当前可选：文本和数字",children:e.jsx(W,{placeholder:re("common.pleaseSelect"),options:[{label:re("edl.variable.number"),value:"number"},{label:re("edl.component.featureComponent.text"),value:"text"}]})}),e.jsx(x.Item,{noStyle:!0,shouldUpdate:!0,children:m=>m.getFieldValue("dataSource")==="static"?e.jsx(x.Item,{label:re("edl.propertyConfig.basicColumn.option"),labelCol:{span:4},children:e.jsx(x.List,{name:["options"],children:(u,{add:h,remove:C})=>e.jsxs(e.Fragment,{children:[u.map(({key:w,name:S,...v})=>e.jsxs(xe,{style:{display:"flex"},align:"baseline",children:[e.jsx(x.Item,{...v,wrapperCol:{span:22},name:[S,"label"],children:e.jsx(O,{placeholder:re("common.pleaseInput")})}),e.jsx(x.Item,{...v,wrapperCol:{span:22},name:[S,"value"],shouldUpdate:!0,children:e.jsx(O,{placeholder:re("common.pleaseInput")})}),e.jsx(st,{onClick:()=>h({label:"",value:""},S+1)}),e.jsx(Wt,{onClick:()=>C(S)})]},w)),e.jsx(ee,{block:!0,type:"primary",onClick:()=>h({label:"",value:""}),children:re("buComp.assetManagement.create")})]})})}):e.jsxs(e.Fragment,{children:[e.jsx(x.Item,{name:["options"],label:"选项",labelCol:{span:4},children:e.jsx(Nl,{readOnly:!0,placeholder:"请选择一个动态变量"})}),e.jsx(x.Item,{label:"字段映射(label)",name:["field","label"],labelCol:{span:4},extra:"变量返回的数据可能不是[{label:'',value:''}]结构，因此需要做映射。",children:e.jsx(O,{placeholder:"请输入变量中对应的label字段"})}),e.jsx(x.Item,{label:"字段映射(value)",name:["field","value"],labelCol:{span:4},children:e.jsx(O,{placeholder:"请输入变量中对应的value字段"})})]})})]}):null,d==="date"&&e.jsx(x.Item,{label:"日期格式",name:"format",labelCol:{span:4},children:e.jsx(W,{options:[{label:re("edl.propertyConfig.basicText.textType.YYYYMMDD"),value:"YYYY-MM-DD"},{label:"年-月-日 23:59:59",value:"YYYY-MM-DD 23:59:59"}]})}),e.jsx(x.Item,{labelCol:{span:4},label:"表单验证",children:e.jsx(Ue,{form:y,labelSpan:5},"rule-list")})]})}})]})})}),pi=a.memo(({form:l})=>{const n=a.useRef(),t=r=>{var s;(s=n.current)==null||s.open(r)},o=(r,s)=>{l.setFieldValue(["formWrap","columns",s],r)};return e.jsxs(e.Fragment,{children:[e.jsx(x.List,{name:["formWrap","columns"],children:(r,{add:s,remove:i})=>e.jsx(e.Fragment,{children:r.map(({key:c,name:p,...b})=>e.jsxs(xe,{style:{display:"flex",marginBottom:8,padding:"0 10px"},align:"baseline",children:[e.jsx(x.Item,{...b,wrapperCol:{span:22},name:[p,"title"],children:e.jsx(O,{placeholder:"列名称"})}),e.jsx(x.Item,{...b,wrapperCol:{span:22},name:[p,"dataIndex"],children:e.jsx(O,{placeholder:"列字段",style:{width:"100%"}})}),e.jsx(Ml,{onClick:()=>t(p)}),e.jsx(st,{onClick:()=>s({title:`列${p+2}`,dataIndex:`Col-${p+2}`,type:"text"},p+1)}),e.jsx(Wt,{onClick:()=>i(p)})]},c))})}),e.jsx(ii,{columnRef:n,update:o})]})}),Ve=window.$translation,Nc={attrs:[{type:"Title",label:Ve("edl.propertyConfig.basicChart.labelConfig"),key:"title1"},...$,{type:"Input",label:Ve("common.title"),name:["formItem","label"]},{type:"Input",label:Ve("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Input",label:"Extra",name:["formItem","extra"],tooltip:Ve("edl.component.componentSchema.formDesc")},{type:"Input",label:"Tooltip",name:["formItem","tooltip"],tooltip:Ve("edl.component.componentSchema.formTooltip")},{type:"Title",label:Ve("edl.propertyConfig.basicTable.tableConfig")},{type:"Switch",label:Ve("edl.propertyConfig.basicTable.showBorder"),name:["formWrap","bordered"]},{type:"Select",label:Ve("edl.propertyConfig.basicTable.tableSize"),name:["formWrap","size"],props:{options:[{label:Ve("common.default"),value:"large"},{label:Ve("edl.propertyConfig.basicForm.medium"),value:"middle"},{label:Ve("edl.propertyConfig.basicTable.compact"),value:"small"}]}},{type:"InputNumber",label:Ve("edl.propertyConfig.basicTable.scrollxAxis"),name:["formWrap","scroll","x"],tooltip:Ve("edl.propertyConfig.basicTable.scrollxTips"),props:{placeholder:"eg: 1000"}},{type:"InputNumber",label:Ve("edl.propertyConfig.basicTable.scrollyAxis"),name:["formWrap","scroll","y"],tooltip:Ve("edl.propertyConfig.basicTable.scrollyTips"),props:{placeholder:"eg: 600"}},{type:"Title",label:Ve("edl.propertyConfig.basicTable.colSetting"),key:"columnConfig"},{type:"function",key:"TableSetting",render(l){return e.jsx(pi,{form:l},"TableSetting")}}],config:{props:{x:0,y:0,formItem:{label:"编辑用户",name:"userData"},visible:!0,formWrap:{field:"data",size:"large",bordered:!0,columns:[{title:"姓名",dataIndex:"name",key:"name",align:"center",type:"text",defaultValue:"",placeholder:Ve("common.pleaseInput")},{title:"年级",dataIndex:"grade",key:"grade",align:"center",type:"select",options:[{label:"一年级",value:1},{label:"二年级",value:2},{label:"三年级",value:3}],dataSource:"static",defaultValue:3,placeholder:Ve("common.pleaseSelect")},{title:"分数",dataIndex:"score",key:"score",align:"center",type:"number",defaultValue:"",placeholder:Ve("common.pleaseInput")},{title:"出生日期",dataIndex:"birthday",key:"birthday",type:"date",align:"center",format:"YYYY-MM-DD",defaultValue:"2020-08-08",placeholder:Ve("common.pleaseSelect")},{title:"共青团员",dataIndex:"isMember",key:"isMember",align:"center",type:"switch",defaultValue:!0}]}},style:{},events:[],api:{sourceType:"json",sourceField:"list",source:[]}},events:[],methods:[]},ci=({id:l,type:n,config:t,elements:o},r)=>{const s=window.$translation,{props:i}=t,[c,p]=a.useState(i.visible!==void 0?i.visible:!0),b=Ze(l);a.useImperativeHandle(r,()=>({show(){p(!0)},hide(){p(!1)}}));const{visible:g,...y}=t.props;return a.useEffect(()=>{p(g!==void 0?g:!0)},[g]),c&&e.jsx(xe,{style:{...t.style,width:t.style.width||400,height:t.style.height||250},...y,ref:b,children:o!=null&&o.length?o==null?void 0:o.map(d=>e.jsx(uo,{item:d},d.id)):e.jsx("div",{className:"slots",style:{width:300,height:100,lineHeight:"100px"},children:s("edl.component.containerComponent.dragDesc")})})},Pc=a.forwardRef(ci),lt=window.$translation,$c={attrs:[{type:"Title",label:lt("edl.propertyConfig.basicConfig"),key:"formItem"},...$,{type:"Select",label:lt("edl.propertyConfig.basicSpace.align"),name:"align",props:{options:[{label:lt("edl.styleConfig.flexStart"),value:"start"},{label:lt("edl.styleConfig.flexEnd"),value:"end"},{label:lt("edl.styleConfig.center"),value:"center"},{label:lt("edl.styleConfig.baselineAlign"),value:"baseline"}]}},{type:"Select",label:lt("edl.propertyConfig.basicSpace.spaceDirection"),name:"direction",props:{options:[{label:lt("edl.styleConfig.column"),value:"vertical"},{label:lt("edl.styleConfig.row"),value:"horizontal"}]}},{type:"Select",label:lt("edl.propertyConfig.basicSpace.spaceSize"),name:["size"],props:{options:[{label:lt("common.default"),value:"small"},{label:lt("edl.propertyConfig.basicForm.medium"),value:"middle"},{label:lt("edl.propertyConfig.basicForm.large"),value:"large"}]}},{type:"Switch",label:lt("edl.propertyConfig.basicSpace.autoWrap"),name:["wrap"],tooltip:lt("edl.propertyConfig.basicSpace.spaceTips")}],config:{props:{x:0,y:0,visible:!0,align:"center",direction:"horizontal",size:"middle",wrap:!1},style:{display:"flex",width:400,height:150},events:[],api:{},source:""},events:[]},di=({id:l,type:n,config:t,elements:o},r)=>{var f;const{props:s}=t,i=window.$translation,[c,p]=a.useState(s.visible!==void 0?s.visible:!0),b=Ze(l);a.useImperativeHandle(r,()=>({show(){p(!0)},hide(){p(!1)}}));const g=window.AppsRender,y=((f=t.props)==null?void 0:f.gutter)||0,{visible:d,...m}=t.props;return a.useEffect(()=>{p(d!==void 0?d:!0)},[d]),c&&e.jsx(Oe,{style:t.style,...m,gutter:y,ref:b,children:o!=null&&o.length?e.jsx(g,{elements:o}):e.jsx("div",{className:"slots",style:{height:100,lineHeight:"100px"},children:i("edl.component.containerComponent.dragDesc")})})},Mc=a.forwardRef(di),Ge=window.$translation,Vc={attrs:[{type:"Title",label:Ge("edl.propertyConfig.basicConfig"),key:"formItem"},...$,{type:"Select",label:Ge("edl.component.componentSchema.align"),name:"align",props:{options:[{label:Ge("edl.styleConfig.top"),value:"top"},{label:Ge("edl.styleConfig.center"),value:"middle"},{label:Ge("edl.styleConfig.bottom"),value:"bottom"},{label:Ge("edl.styleConfig.stretch"),value:"stretch"}]}},{type:"InputNumber",label:Ge("edl.component.componentSchema.gap"),name:"gutter",props:{placeholder:Ge("common.pleaseInput")}},{type:"Select",label:Ge("edl.component.componentSchema.justify"),name:"justify",props:{options:[{label:Ge("edl.styleConfig.flexStart"),value:"start"},{label:Ge("edl.styleConfig.flexEnd"),value:"end"},{label:Ge("edl.styleConfig.center"),value:"center"},{label:Ge("edl.styleConfig.spaceAround"),value:"space-around"},{label:Ge("edl.styleConfig.spaceBetween"),value:"space-between"},{label:Ge("edl.styleConfig.spaceEvenly"),value:"space-evenly"}]}},{type:"Switch",label:Ge("edl.propertyConfig.basicSpace.autoWrap"),name:["wrap"],tooltip:Ge("edl.component.componentSchema.rowTips")}],config:{props:{x:0,y:0,align:"top",gutter:0,justify:"start",wrap:!0,visible:!0},style:{},events:[],api:{},source:""},events:[]},mi=({id:l,type:n,config:t,elements:o},r)=>{const s=window.$translation,{props:i}=t,[c,p]=a.useState(i.visible!==void 0?i.visible:!0),b=Ze(l);a.useImperativeHandle(r,()=>({show(){p(!0)},hide(){p(!1)}}));const g=window.AppsRender,{visible:y,...d}=t.props;return a.useEffect(()=>{p(y!==void 0?y:!0)},[y]),c&&e.jsx(ne,{style:t.style,...d,ref:b,children:o!=null&&o.length?e.jsx(g,{elements:o}):e.jsx("div",{className:"slots",style:{height:100,lineHeight:"100px"},children:s("edl.component.containerComponent.dragDesc")})})},Rc=a.forwardRef(mi),ui=window.$translation,Wc={attrs:[{type:"Title",label:ui("edl.propertyConfig.basicConfig"),key:"formItem"},...$,{type:"InputNumber",label:"占位格数",name:"span",props:{placeholder:"输入占位格数"}},{type:"InputNumber",label:"偏移格数",name:"offset",props:{placeholder:"左侧偏移格数"}},{type:"InputNumber",label:"左拉格数",name:"pull",props:{placeholder:"左侧偏移格数"}},{type:"InputNumber",label:"右推格数",name:"push",props:{placeholder:"左侧偏移格数"}}],config:{props:{x:0,y:0,span:8,visible:!0},style:{},events:[],api:{},source:""},events:[]},bi=({id:l,type:n,config:t},o)=>{const{props:r}=t,[s,i]=a.useState(r.visible!==void 0?r.visible:!0);a.useImperativeHandle(o,()=>({show(){i(!0)},hide(){i(!1)}}));const{visible:c,...p}=t.props;return a.useEffect(()=>{i(c!==void 0?c:!0)},[c]),s&&e.jsx(Jo,{style:t.style,...p,children:t.props.text})},Bc=a.forwardRef(bi),Kl=window.$translation,Lc={attrs:[{type:"Title",label:Kl("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Switch",label:"显示虚线",name:["dashed"]},{type:"Input",label:Kl("edl.propertyConfig.basicUpload.showText"),name:["text"]},{type:"Switch",label:"普通文本",name:["plain"]},{type:"Select",label:"标题位置",name:["orientation"],props:{options:[{value:"left",label:"左边"},{value:"right",label:"右边"},{value:"center",label:"中间"}]}},{type:"Select",label:"显示类型",name:["type"],props:{options:[{value:"horizontal",label:"水平"},{value:"vertical",label:"垂直"}]}}],config:{props:{x:0,y:0,text:"",visible:!0},style:{},events:[]},events:[{value:"onClick",name:Kl("edl.propertyConfig.clickEvent")}],methods:[]},fi=({id:l,type:n,config:t},o)=>{const{setVisible:r,loading:s,visible:i,getDataList:c,data:p}=Ie(t),b=a.useRef();a.useImperativeHandle(o,()=>({show(){r(!0)},hide(){r(!1)},update:y=>{c(y)},downloadChart(){var y;(y=b.current)==null||y.getChart().downloadImage("图")}}));const g=a.useMemo(()=>Array.isArray(p)?p:[],[p]);return a.useEffect(()=>{r(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),i&&e.jsx(pt,{spinning:s,size:"large",wrapperClassName:"spin-loading",children:e.jsx(qa,{...t.props,label:t.props.label.show?t.props.label:!1,data:g,ref:b})})},Hc=a.forwardRef(fi),yi=l=>{const n=o=>{l.onChange(o.toHexString())},t=()=>{l.onChange("")};return e.jsx(Ja,{...l,format:"hex",showText:!0,allowClear:!0,value:l.value,onChange:n,onClear:t})},hi=window.$translation,el=a.memo(()=>e.jsx(x.Item,{label:hi("common.Color"),children:e.jsx(x.List,{name:["color"],children:(l,{add:n,remove:t})=>e.jsx(e.Fragment,{children:l.map(({key:o,name:r,...s})=>e.jsxs(xe,{style:{display:"flex",marginBottom:8,padding:"0 10px"},children:[e.jsx(x.Item,{noStyle:!0,...s,name:[r],children:e.jsx(yi,{style:{width:"100px"}})}),e.jsx(st,{onClick:()=>n("#f16622",r+1)}),r>0&&e.jsx(Wt,{onClick:()=>t(r)})]},o))})})})),Ae=window.$translation,Bl=["rgba(0, 133, 255, 1)","rgba(0, 254, 175, 1)","#FADB1E","#9ADB19","#28C084","#3CA2FF","#1861EB","#A24CF5","#F32AA3","#F11818"],ml={grid:{line:{style:{lineWidth:1,stroke:"#ffffff",strokeOpacity:.5}}},title:{style:{fontSize:12,fill:"#ffffff",fillOpacity:.95},text:"",position:"end"},label:{autoHide:!0,autoRotate:!0,style:{fill:"#bbbbbb",fontSize:12}}},gi=[{name:"00:00",value:40,type:"配电负荷"},{name:"06:00",value:45,type:"配电负荷"},{name:"12:00",value:65,type:"配电负荷"},{name:"18:00",value:56,type:"配电负荷"},{name:"23:00",value:74,type:"配电负荷"}],yo=[{type:"Collapse",label:Ae("edl.propertyConfig.basicChart.coordinate"),props:{items:[{type:"Input",label:Ae("edl.propertyConfig.basicChart.xAxisName"),name:["xAxis","title","text"]},{type:"Input",label:Ae("edl.propertyConfig.basicChart.yAxisName"),name:["yAxis","title","text"]},{type:"ColorPicker",label:Ae("edl.propertyConfig.basicChart.xAxisColor"),name:["xAxis","label","style","fill"]},{type:"InputNumber",label:Ae("edl.propertyConfig.basicChart.xAxisFontSize"),name:["xAxis","title","style","fontSize"]},{type:"ColorPicker",label:Ae("edl.propertyConfig.basicChart.yAxisColor"),name:["yAxis","label","style","fill"]},{type:"InputNumber",label:Ae("edl.propertyConfig.basicChart.yAxisFontSize"),name:["yAxis","title","style","fontSize"]}]}},{type:"Collapse",label:Ae("edl.propertyConfig.basicChart.tickLine"),props:{items:[{type:"InputNumber",label:Ae("edl.propertyConfig.basicChart.xAxisTickLineLength"),name:["xAxis","tickLine","length"]},{type:"InputNumber",label:Ae("edl.propertyConfig.basicChart.yAxisTickLineLength"),name:["yAxis","tickLine","length"]}]}},{type:"Collapse",label:Ae("edl.propertyConfig.basicChart.themeConfig"),props:{items:[{type:"Select",label:Ae("edl.propertyConfig.basicChart.theme"),name:"theme",props:{options:[{label:Ae("common.default"),value:"default"},{label:Ae("edl.propertyConfig.basicChart.dark"),value:"dark"}]}}]}}],Ll=[{type:"Collapse",label:Ae("edl.propertyConfig.basicChart.legendConfig"),props:{items:[{type:"Switch",label:Ae("edl.propertyConfig.basicChart.showLegend"),name:["legend","visible"]},{type:"ColorPicker",label:Ae("edl.propertyConfig.basicChart.legendColor"),name:["legend","itemName","style","fill"]},{type:"InputNumber",label:Ae("edl.propertyConfig.basicChart.legendFontSize"),name:["legend","itemName","style","fontSize"]},{type:"Select",label:Ae("edl.component.componentSchema.layout"),name:["legend","layout"],props:{options:[{label:Ae("edl.styleConfig.row"),value:"horizontal"},{label:Ae("edl.styleConfig.column"),value:"vertical"}]}},{type:"Select",label:Ae("edl.propertyConfig.basicChart.position"),name:["legend","position"],key:"legendPosition",props:{options:[{label:"top",value:"top"},{label:"top-left",value:"top-left"},{label:"top-right",value:"top-right"},{label:"left",value:"left"},{label:"left-top",value:"left-top"},{label:"left-bottom",value:"left-bottom"},{label:"right",value:"right"},{label:"right-top",value:"right-top"},{label:"right-bottom",value:"right-bottom"},{label:"bottom",value:"bottom"},{label:"bottom-left",value:"bottom-left"},{label:"bottom-right",value:"bottom-right"}]}}]}}],ho={tooltip:{customItems(l){return l.map(n=>({...n,value:n.data.unit?`${n.value} ${n.data.unit}`:n.value}))}}},ie=window.$translation,zc={attrs:[{type:"Title",label:ie("edl.propertyConfig.basicProperty")},...$,{type:"Input",label:ie("edl.propertyConfig.basicChart.sectorValue"),name:"angleField",props:{placeholder:ie("edl.propertyConfig.basicChart.sectorHolder")}},{type:"Input",label:ie("edl.propertyConfig.basicChart.colorField"),name:"colorField",props:{placeholder:ie("edl.propertyConfig.basicChart.colorHolder")}},{type:"Slider",label:ie("edl.propertyConfig.basicChart.radius"),name:"radius",props:{min:0,max:1,step:.1}},{type:"Slider",label:ie("edl.propertyConfig.basicChart.innerRadius"),name:"innerRadius",props:{min:0,max:1,step:.1}},{type:"InputNumber",label:ie("edl.propertyConfig.basicChart.chartPadding"),name:"padding"},{type:"Title",label:ie("edl.propertyConfig.basicChart.labelConfig"),key:"label"},{type:"Switch",label:ie("edl.propertyConfig.basicChart.labelShow"),name:["label","show"]},{type:"Select",label:ie("edl.propertyConfig.basicChart.labelPos"),name:["label","type"],props:{options:[{label:ie("edl.propertyConfig.basicChart.inner"),value:"inner"},{label:ie("edl.propertyConfig.basicChart.outer"),value:"outer"},{label:ie("edl.propertyConfig.basicChart.spider"),value:"spider"}]}},{type:"InputNumber",label:ie("common.fontSize"),name:["label","style","fontSize"],props:{placeholder:ie("edl.propertyConfig.basicChart.fzHolder")}},{type:"Select",label:ie("common.fontWeight"),name:["label","style","fontWeight"],props:{options:[{value:"normal",label:"normal"},{value:"bold",label:"bold"},{value:"lighter",label:"lighter"},{value:"bolder",label:"bolder"}]}},{type:"Input",label:ie("edl.propertyConfig.basicChart.labelRender"),name:["label","content"],props:{placeholder:ie("edl.propertyConfig.basicChart.renderTips")}},...Ne(Ll),{type:"Title",label:ie("edl.propertyConfig.basicChart.innerRing.config")},{type:"Switch",label:ie("edl.propertyConfig.basicChart.innerRing.title"),name:["statistic","title"]},{type:"Input",label:ie("edl.propertyConfig.basicChart.innerRing.content"),name:["statistic","content","content"]},{type:"InputNumber",label:ie("edl.propertyConfig.basicChart.innerRing.fontSize"),name:["statistic","content","style","fontSize"],props:{placeholder:ie("edl.propertyConfig.basicChart.fzHolder")}},{type:"ColorPicker",label:ie("edl.propertyConfig.basicChart.innerRing.color"),name:["statistic","content","style","color"]},{type:"Title",label:ie("edl.propertyConfig.basicChart.themeConfig")},{type:"Select",label:ie("edl.propertyConfig.basicChart.theme"),name:"theme",props:{options:[{label:ie("common.default"),value:"default"},{label:ie("edl.propertyConfig.basicChart.dark"),value:"dark"}]}},{type:"function",label:ie("edl.propertyConfig.basicChart.chartColor"),name:"color",render(){return e.jsx(el,{},"ColorSet")}}],config:{props:{x:0,y:0,visible:!0,angleField:"count",colorField:"name",radius:1,innerRadius:0,autoFit:!0,appendPadding:20,label:{type:"inner",offset:"-50%",content:"{value}",style:{textAlign:"center",fontSize:14}},statistic:{title:!1,content:{content:"",style:{fontSize:12,whiteSpace:"pre-wrap",overflow:"hidden",textOverflow:"ellipsis",color:"#FFFFFF"}}},interactions:[{type:"element-selected"},{type:"element-active"}],legend:{layout:"vertical",position:"right",itemName:{style:{fill:"#fff"}}},theme:"default",color:Bl},style:{},api:{sourceType:"json",source:[{name:"一般",count:10},{name:"轻微",count:18},{name:"严重",count:23},{name:"紧急",count:19}]}},events:[],methods:[{name:"update",title:ie("edl.component.componentSchema.updateData")},{name:"downloadChart",title:ie("edl.component.componentSchema.downloadChart")}]},Ci=({id:l,type:n,config:t},o)=>{const{setVisible:r,loading:s,visible:i,getDataList:c,data:p}=Ie(t),b=a.useRef(),[g,y]=a.useState(!1);a.useImperativeHandle(o,()=>({show(){r(!0)},hide(){r(!1)},update:u=>{c(u)},downloadChart(){var u;(u=b.current)==null||u.getChart().downloadImage("图")}}));const d=a.useRef(u=>{var T;const h=(T=b.current)==null?void 0:T.getChart();u.preventDefault(),u.preventDefault();const{deltaY:C}=u,w=C>0?.9:1.1,S=h.chart.controllers.find(A=>A.name==="slider"),{start:v,end:I}=S,j=v*w,k=I*w;y({start:j,end:k,formatter:()=>""})}),m=a.useMemo(()=>Array.isArray(p)?p:[],[p]),f=a.useMemo(()=>{var F,E,D,M,q,te,P,J,se,je,pe,ut,He;const{x:u,y:h,showLegend:C,showLabel:w,sliderZoom:S,brushZoom:v,wheelZoom:I,...j}=Ne(t.props);w||(j.label=!1),v?j.interactions=[{type:"brush"}]:j.interactions=void 0;const k=(F=b.current)==null?void 0:F.getChart();if(k){const qe=k.container;I?(qe.addEventListener("wheel",d.current),y({formatter:()=>""})):(qe.removeEventListener("wheel",d.current),y(S?{formatter:()=>""}:!1))}const T=(q=(M=(D=(E=t.props)==null?void 0:E.xAxis)==null?void 0:D.title)==null?void 0:M.style)==null?void 0:q.fontSize,A=(se=(J=(P=(te=t.props)==null?void 0:te.yAxis)==null?void 0:P.title)==null?void 0:J.style)==null?void 0:se.fontSize;return T&&((pe=(je=j.xAxis)==null?void 0:je.label)!=null&&pe.style)&&(j.xAxis.label.style.fontSize=T),A&&((He=(ut=j.yAxis)==null?void 0:ut.label)!=null&&He.style)&&(j.yAxis.label.style.fontSize=A),j},[t.props]);return a.useEffect(()=>{r(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),i&&e.jsx(pt,{spinning:s,size:"large",wrapperClassName:"spin-loading",children:e.jsx(Ka,{...f,showMarkers:!1,color:f.seriesField?f.color:f.color[0],data:m||[],ref:b,slider:g})})},Yc=a.forwardRef(Ci),oe=window.$translation,Oc={attrs:[...$,{type:"Collapse",label:oe("edl.propertyConfig.basicProperty"),props:{items:[{type:"Input",label:oe("edl.propertyConfig.basicChart.xAxisField"),name:"xField"},{type:"Input",label:oe("edl.propertyConfig.basicChart.yAxisField"),name:"yField"},{type:"Input",label:oe("edl.propertyConfig.basicChart.colorField"),name:"seriesField"},{type:"InputNumber",label:oe("edl.propertyConfig.basicChart.chartPadding"),name:"appendPadding"}]}},{type:"Collapse",label:oe("edl.propertyConfig.basicChart.chartStyle"),props:{items:[{type:"Switch",label:oe("edl.propertyConfig.basicChart.smooth"),name:"smooth"},{type:"Switch",label:oe("edl.propertyConfig.basicChart.lineContinue"),name:"connectNulls"},{type:"ColorPicker",label:oe("edl.propertyConfig.basicChart.fillColor"),name:["lineStyle","fill"]},{type:"Slider",label:oe("edl.propertyConfig.basicChart.opacity"),name:["lineStyle","fillOpacity"],props:{min:0,max:1,step:.1}},{type:"ColorPicker",label:oe("edl.propertyConfig.basicChart.chartStroke"),name:["lineStyle","stroke"]},{type:"InputNumber",label:oe("edl.propertyConfig.basicChart.strokeWidth"),name:["lineStyle","lineWidth"]}]}},{type:"Collapse",label:oe("edl.propertyConfig.basicChart.labelConfig"),props:{items:[{type:"Switch",label:oe("edl.propertyConfig.basicChart.showLabel"),name:["showLabel"]},{type:"Switch",label:oe("edl.propertyConfig.basicChart.autoHide"),name:["label","autoHide"]}]}},{type:"Collapse",label:oe("edl.propertyConfig.basicChart.pointConfig"),props:{items:[{type:"Select",label:oe("edl.propertyConfig.basicChart.pointShape"),name:["point","shape"],props:{options:[{label:oe("edl.propertyConfig.basicChart.circle"),value:"circle"},{label:oe("edl.propertyConfig.basicChart.square"),value:"square"},{label:oe("edl.propertyConfig.basicChart.vertLine"),value:"line"},{label:oe("edl.propertyConfig.basicChart.diamond"),value:"diamond"},{label:oe("edl.propertyConfig.basicChart.triangle"),value:"triangle"},{label:oe("edl.propertyConfig.basicChart.invertTriangle"),value:"triangle-down"},{label:oe("edl.propertyConfig.basicChart.hexagon"),value:"hexagon"},{label:oe("edl.propertyConfig.basicChart.bowTie"),value:"bowtie"},{label:oe("edl.propertyConfig.basicChart.cross"),value:"cross"},{label:oe("edl.propertyConfig.basicChart.iSymbol"),value:"tick"},{label:oe("edl.propertyConfig.basicChart.plus"),value:"plus"},{label:oe("edl.propertyConfig.basicChart.minus"),value:"hyphen"}]}},{type:"Slider",label:oe("edl.propertyConfig.basicChart.pointSize"),name:["point","size"],props:{min:0,max:50,step:1}},{type:"ColorPicker",label:oe("edl.propertyConfig.basicChart.pointColor"),name:["point","style","fill"]}]}},...Ne(Ll),...Ne(yo),{type:"function",label:oe("edl.propertyConfig.basicChart.chartColor"),name:"color",render(){return e.jsx(el,{},"ColorSet")}},{type:"Title",label:oe("edl.propertyConfig.basicChart.chartFunction")},{type:"Switch",label:oe("edl.propertyConfig.basicChart.sliderZoom"),name:"sliderZoom"},{type:"Switch",label:oe("edl.propertyConfig.basicChart.brushZoom"),name:"brushZoom"},{type:"Switch",label:oe("edl.propertyConfig.basicChart.wheelZoom"),name:"wheelZoom"}],config:{props:{x:0,y:0,visible:!0,theme:"default",color:Bl,xField:"name",yField:"value",seriesField:"type",autoFit:!0,appendPadding:20,showLabel:!0,legend:{visible:!0,layout:"horizontal",position:"top",itemName:{style:{fill:"#ffffff",fontSize:14}}},yAxis:{...Ne(ml),tickLine:{length:5}},xAxis:{...Ne(ml),tickLine:{length:5}},label:{style:{fill:"#ffffff",fontSize:14},autoHide:!0},...ho,point:{shape:"circle",size:5},sliderZoom:!1,brushZoom:!1,wheelZoom:!1,interactions:[]},api:{sourceType:"json",source:gi}},style:{},events:[],methods:[{name:"update",title:oe("edl.component.componentSchema.updateData")},{name:"downloadChart",title:oe("edl.component.componentSchema.downloadChart")}]},vi=({id:l,type:n,config:t},o)=>{const{setVisible:r,loading:s,visible:i,getDataList:c,data:p}=Ie(t),b=a.useRef(),[g,y]=a.useState(!1);a.useImperativeHandle(o,()=>({show(){r(!0)},hide(){r(!1)},update:f=>{c(f)},downloadChart(){var f;(f=b.current)==null||f.getChart().downloadImage("图")}}));const d=a.useMemo(()=>{var T,A,F,E,D,M,q,te,P,J,se,je,pe;const{x:f,y:u,showLabel:h,sliderZoom:C,brushZoom:w,wheelZoom:S,...v}=Ne(t.props);h||(v.label=!1);const I=(T=b.current)==null?void 0:T.getChart();if(I){const ut=qe=>{qe.preventDefault(),qe.preventDefault();const{deltaY:Sl}=qe,tl=Sl>0?.9:1.1,Il=I.chart.controllers.find(Ct=>Ct.name==="slider"),{start:V,end:Be}=Il,bt=V*tl,et=Be*tl;y({start:bt,end:et,formatter:()=>""})},He=I.container;S?(He.addEventListener("wheel",ut),y({formatter:()=>""})):(He.removeEventListener("wheel",ut),y(C?{formatter:()=>""}:!1))}const j=(D=(E=(F=(A=t.props)==null?void 0:A.xAxis)==null?void 0:F.title)==null?void 0:E.style)==null?void 0:D.fontSize,k=(P=(te=(q=(M=t.props)==null?void 0:M.yAxis)==null?void 0:q.title)==null?void 0:te.style)==null?void 0:P.fontSize;return j&&((se=(J=v.xAxis)==null?void 0:J.label)!=null&&se.style)&&(v.xAxis.label.style.fontSize=j),k&&((pe=(je=v.yAxis)==null?void 0:je.label)!=null&&pe.style)&&(v.yAxis.label.style.fontSize=k),v},[t.props]),m=a.useMemo(()=>Array.isArray(p)?p:[],[p]);return a.useEffect(()=>{r(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),i&&e.jsx(pt,{spinning:s,size:"large",wrapperClassName:"spin-loading",children:e.jsx(Ga,{...d,color:t.props.seriesField?t.props.color:t.props.color[0],data:m,ref:b,slider:g})})},Qc=a.forwardRef(vi),ma=a.memo(({name:l="columnStyle"})=>{const n=[l,"radius"],t=window.$translation;return e.jsx(x.Item,{label:t("edl.propertyConfig.basicChart.corner"),children:e.jsx(x.List,{name:n,children:o=>e.jsx(e.Fragment,{children:o.map(({key:r,name:s,...i})=>e.jsx(xe,{style:{marginBottom:8},children:e.jsx(x.Item,{noStyle:!0,...i,name:[s],children:e.jsx(It,{})})},r))})})})}),Ce=window.$translation,Uc={attrs:[...$,{type:"Collapse",label:Ce("edl.propertyConfig.basicProperty"),props:{items:[{type:"Input",label:Ce("edl.propertyConfig.basicChart.xAxisField"),name:"xField"},{type:"Input",label:Ce("edl.propertyConfig.basicChart.yAxisField"),name:"yField"},{type:"Switch",label:Ce("edl.propertyConfig.basicChart.isGroup"),name:"isGroup"},{type:"Switch",label:Ce("edl.propertyConfig.basicChart.isStack"),name:"isStack"},{type:"Input",label:Ce("edl.propertyConfig.basicChart.colorField"),name:"seriesField"},{type:"InputNumber",label:Ce("edl.propertyConfig.basicChart.chartPadding"),name:"appendPadding"}]}},{type:"Collapse",label:Ce("edl.propertyConfig.basicChart.chartStyle"),props:{items:[{type:"Slider",label:Ce("edl.propertyConfig.basicChart.widthProprtion"),name:"columnWidthRatio",props:{min:0,max:1,step:.1}},{type:"Slider",label:Ce("edl.propertyConfig.basicChart.groupPadding"),name:["dodgePadding"]},{type:"Slider",label:Ce("edl.propertyConfig.basicChart.groupMargin"),name:["intervalPadding"]},{type:"function",label:Ce("edl.propertyConfig.basicChart.corner"),render(){return e.jsx(ma,{},"radius")}},{type:"ColorPicker",label:Ce("edl.propertyConfig.basicChart.fillColor"),name:["columnStyle","fill"]},{type:"Slider",label:Ce("edl.propertyConfig.basicChart.opacity"),key:"fillOpacity",name:["columnStyle","fillOpacity"],props:{min:0,max:1,step:.1}},{type:"ColorPicker",label:Ce("edl.propertyConfig.basicChart.chartStroke"),name:["columnStyle","stroke"]},{type:"InputNumber",label:Ce("edl.propertyConfig.basicChart.strokeWidth"),name:["columnStyle","lineWidth"]}]}},{type:"Collapse",label:Ce("edl.propertyConfig.basicChart.labelConfig"),props:{items:[{type:"Switch",label:Ce("edl.propertyConfig.basicChart.showLabel"),name:["showLabel"]},{type:"Select",label:Ce("edl.editor.position"),name:["label","position"],key:"labelPosition",props:{options:[{label:"top",value:"top"},{label:"middle",value:"middle"},{label:"bottom",value:"bottom"}]}},{type:"ColorPicker",label:Ce("common.Color"),name:["label","style","fill"]},{type:"Slider",label:Ce("edl.propertyConfig.basicChart.opacity"),key:"labelOpacity",name:["label","style","opacity"],props:{min:0,max:1,step:.1}}]}},...Ne(Ll),...Ne(yo),{type:"function",label:Ce("edl.propertyConfig.basicChart.chartColor"),name:"color",render(){return e.jsx(el,{},"ColorSet")}},{type:"Title",label:Ce("edl.propertyConfig.basicChart.chartFunction")},{type:"Switch",label:Ce("edl.propertyConfig.basicChart.sliderZoom"),name:"sliderZoom"},{type:"Switch",label:Ce("edl.propertyConfig.basicChart.wheelZoom"),name:"wheelZoom"}],config:{props:{x:0,y:0,visible:!0,xField:"project",yField:"value",columnWidthRatio:.6,isGroup:!0,autoFit:!0,appendPadding:20,showLabel:!1,title:{visible:!0,text:"多色饼图"},...ho,theme:"default",color:Bl,seriesField:"type",isStack:!1,isRange:!1,isPercent:!1,yAxis:{...Ne(ml),tickLine:{length:5}},xAxis:{title:Ne(ml.title),label:Ne(ml.label),tickLine:{length:5}},label:{position:"top",style:{fill:"#FFFFFF",opacity:.8}},legend:{layout:"horizontal",visible:!0,position:"top",itemName:{style:{fill:"#fff",fontSize:14}}},columnStyle:{fillOpacity:1,radius:[50,50,0,0]},sliderZoom:!1,interactions:[{type:"element-active"},{type:"pie-legend-active"}]},style:{},api:{sourceType:"json",source:[{type:"用能",project:"06:00",value:5e3},{type:"用能",project:"07:00",value:800},{type:"用能",project:"08:00",value:3e3},{type:"用能",project:"09:00",value:300},{type:"用能",project:"10:00",value:3e4},{type:"用能",project:"11:00",value:1e4}]}},events:[],methods:[{name:"update",title:Ce("edl.component.componentSchema.updateData")},{name:"downloadChart",title:Ce("edl.component.componentSchema.downloadChart")}]},xi=({id:l,type:n,config:t},o)=>{const{setVisible:r,loading:s,visible:i,getDataList:c,data:p}=Ie(t),b=a.useRef();a.useImperativeHandle(o,()=>({show(){r(!0)},hide(){r(!1)},update:d=>{c(d)},downloadChart(){var d;(d=b.current)==null||d.getChart().downloadImage("图")}}));const g=a.useMemo(()=>{var w,S,v,I,j,k,T,A,F,E,D,M;const{x:d,y:m,showLegend:f,...u}=Ne(t.props);f||(u.legend=!1);const h=(I=(v=(S=(w=t.props)==null?void 0:w.xAxis)==null?void 0:S.title)==null?void 0:v.style)==null?void 0:I.fontSize,C=(A=(T=(k=(j=t.props)==null?void 0:j.yAxis)==null?void 0:k.title)==null?void 0:T.style)==null?void 0:A.fontSize;return h&&((E=(F=u.xAxis)==null?void 0:F.label)!=null&&E.style)&&(u.xAxis.label.style.fontSize=h),C&&((M=(D=u.yAxis)==null?void 0:D.label)!=null&&M.style)&&(u.yAxis.label.style.fontSize=C),u},[t.props]),y=a.useMemo(()=>Array.isArray(p)?p:[],[p]);return a.useEffect(()=>{r(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),i&&e.jsx(pt,{spinning:s,size:"large",wrapperClassName:"spin-loading",children:e.jsx(Za,{...g,color:t.props.seriesField?t.props.color:t.props.color[0],data:y,ref:b})})},qc=a.forwardRef(xi),Re=window.$translation,Jc={attrs:[...$,{type:"Collapse",label:Re("edl.propertyConfig.basicProperty"),props:{items:[{type:"Input",label:Re("edl.propertyConfig.basicChart.xAxisField"),name:"xField"},{type:"Input",label:Re("edl.propertyConfig.basicChart.yAxisField"),name:"yField"},{type:"Switch",label:Re("edl.propertyConfig.basicChart.isGroup"),name:"isGroup"},{type:"Switch",label:Re("edl.propertyConfig.basicChart.isStack"),name:"isStack"},{type:"Input",label:Re("edl.propertyConfig.basicChart.colorField"),name:"seriesField"},{type:"Slider",label:Re("edl.propertyConfig.basicChart.groupPadding"),name:["dodgePadding"]},{type:"Slider",label:Re("edl.propertyConfig.basicChart.groupMargin"),name:["intervalPadding"]},{type:"InputNumber",label:Re("edl.propertyConfig.basicChart.chartPadding"),name:"appendPadding"}]}},{type:"Collapse",label:Re("edl.propertyConfig.basicChart.labelConfig"),props:{items:[{type:"Select",label:Re("edl.editor.position"),name:["label","position"],key:"labelPosition",props:{options:[{label:"top",value:"top"},{label:"middle",value:"middle"},{label:"bottom",value:"bottom"}]}},{type:"ColorPicker",label:Re("common.Color"),name:["label","style","fill"]},{type:"Slider",label:Re("edl.propertyConfig.basicChart.opacity"),key:"labelOpacity",name:["label","style","opacity"],props:{min:0,max:1,step:.1}}]}},...Ne(Ll),...Ne(yo),{type:"Collapse",label:Re("edl.propertyConfig.basicChart.chartConfig"),props:{items:[{type:"Slider",label:Re("edl.propertyConfig.basicChart.widthProprtion"),name:"barWidthRatio",props:{min:0,max:1,step:.1}},{type:"function",label:Re("edl.propertyConfig.basicChart.corner"),render(){return e.jsx(ma,{name:"barStyle"},"radius")}},{type:"Slider",label:Re("edl.propertyConfig.basicChart.opacity"),key:"barOpacity",name:["barStyle","fillOpacity"],props:{min:0,max:1,step:.1}},{type:"function",label:Re("edl.propertyConfig.basicChart.chartColor"),name:"color",render(){return e.jsx(el,{},"ColorSet")}}]}}],config:{props:{x:0,y:0,visible:!0,showLegend:!0,xField:"value",yField:"project",barWidthRatio:.6,isGroup:!0,theme:"default",color:Bl,seriesField:"type",autoFit:!0,appendPadding:20,isStack:!1,isRange:!1,isPercent:!1,label:{position:"middle",style:{fill:"#FFFFFF",opacity:.8}},legend:{layout:"horizontal",position:"top",itemName:{style:{fill:"#fff",fontSize:14}}},yAxis:{label:{autoHide:!0,autoRotate:!0,style:{fill:"#bbbbbb"}}},barStyle:{fillOpacity:1,radius:[50,50,0,0]},...ho,interactions:[{type:"element-active"}]},style:{},api:{sourceType:"json",source:[{type:"PV",project:"百度",value:5e3},{type:"UV",project:"百度",value:800},{type:"PV",project:"字节跳动",value:3e3},{type:"UV",project:"字节跳动",value:300},{type:"PV",project:"阿里",value:3e4},{type:"UV",project:"阿里",value:1e4},{type:"PV",project:"微信",value:7e3},{type:"UV",project:"微信",value:5e3},{type:"PV",project:"micro-apps",value:5e4},{type:"UV",project:"micro-apps",value:35e3}]}},events:[],methods:[{name:"update",title:Re("edl.component.componentSchema.updateData")},{name:"downloadChart",title:Re("edl.component.componentSchema.downloadChart")}]},wi=({id:l,type:n,config:t},o)=>{const{setVisible:r,loading:s,visible:i,getDataList:c,data:p}=Ie(t);a.useImperativeHandle(o,()=>({show(){r(!0)},hide(){r(!1)},update:y=>{c(y)}}));const{visible:b,...g}=t.props;return a.useEffect(()=>{r(b!==void 0?b:!0)},[b]),i&&e.jsx(pt,{spinning:s,size:"large",wrapperClassName:"spin-loading",children:e.jsx(_a,{...g,data:p})})},Kc=a.forwardRef(wi),me=window.$translation,Gc={attrs:[{type:"Title",label:me("edl.propertyConfig.basicProperty")},...$,{type:"Switch",label:me("edl.propertyConfig.basicTextArea.autoFit"),name:"autoFit"},{type:"InputNumber",label:me("edl.propertyConfig.basicChart.chartPadding"),name:"appendPadding"},{type:"Title",label:me("edl.propertyConfig.basicChart.chartStyle")},{type:"Switch",label:me("edl.propertyConfig.basicChart.smooth"),name:"smooth"},{type:"ColorPicker",label:me("edl.propertyConfig.basicChart.fillColor"),name:["lineStyle","fill"]},{type:"Slider",label:me("edl.propertyConfig.basicChart.opacity"),name:["lineStyle","fillOpacity"],props:{min:0,max:1,step:.1}},{type:"ColorPicker",label:me("edl.propertyConfig.basicChart.chartStroke"),name:["lineStyle","stroke"]},{type:"InputNumber",label:me("edl.propertyConfig.basicChart.strokeWidth"),name:["lineStyle","lineWidth"]},{type:"Title",label:me("edl.propertyConfig.basicChart.pointConfig")},{type:"Select",label:me("edl.propertyConfig.basicChart.pointShape"),name:["point","shape"],props:{options:[{label:me("edl.propertyConfig.basicChart.circle"),value:"circle"},{label:me("edl.propertyConfig.basicChart.square"),value:"square"},{label:me("edl.propertyConfig.basicChart.vertLine"),value:"line"},{label:me("edl.propertyConfig.basicChart.diamond"),value:"diamond"},{label:me("edl.propertyConfig.basicChart.triangle"),value:"triangle"},{label:me("edl.propertyConfig.basicChart.invertTriangle"),value:"triangle-down"},{label:me("edl.propertyConfig.basicChart.hexagon"),value:"hexagon"},{label:me("edl.propertyConfig.basicChart.bowTie"),value:"bowtie"},{label:me("edl.propertyConfig.basicChart.cross"),value:"cross"},{label:me("edl.propertyConfig.basicChart.iSymbol"),value:"tick"},{label:me("edl.propertyConfig.basicChart.plus"),value:"plus"},{label:me("edl.propertyConfig.basicChart.minus"),value:"hyphen"}]}},{type:"Slider",label:me("edl.propertyConfig.basicChart.pointSize"),name:["point","size"],props:{min:0,max:50,step:1}},{type:"ColorPicker",label:me("edl.propertyConfig.basicChart.pointColor"),name:["point","style","fill"]},{type:"Title",label:me("edl.propertyConfig.basicChart.themeConfig")},{type:"Select",label:me("edl.propertyConfig.basicChart.theme"),name:"theme",props:{options:[{label:me("common.default"),value:"default"},{label:me("edl.propertyConfig.basicChart.dark"),value:"dark"}]}},{type:"ColorPicker",label:me("common.Color"),name:["color"]}],config:{props:{x:0,y:0,visible:!0,theme:"default",autoFit:!0,appendPadding:20,smooth:!0,point:{shape:"circle",size:0},lineStyle:{lineWidth:2,fillOpacity:1},color:"#7d33ff"},style:{height:"80px"},api:{sourceType:"json",source:[264,417,438,887,309,397,550,575,563,430,525,592,492,467,513,546,983,340,539,243,226,192]}},events:[],methods:[{name:"update",title:me("edl.component.componentSchema.updateData")}]},Si=({id:l,type:n,config:t},o)=>{const{setVisible:r,loading:s,visible:i,getDataList:c,data:p}=Ie(t);a.useImperativeHandle(o,()=>({show(){r(!0)},hide(){r(!1)},update:y=>{c(y)}}));const{visible:b,...g}=t.props;return a.useEffect(()=>{r(b!==void 0?b:!0)},[b]),i&&e.jsx(pt,{spinning:s,size:"large",wrapperClassName:"spin-loading",children:e.jsx(Xa,{...g,data:p})})},Zc=a.forwardRef(Si),ot=window.$translation,_c={attrs:[{type:"Title",label:ot("edl.propertyConfig.basicProperty")},...$,{type:"Switch",label:ot("edl.propertyConfig.basicTextArea.autoFit"),name:"autoFit"},{type:"InputNumber",label:ot("edl.propertyConfig.basicChart.chartPadding"),name:"appendPadding"},{type:"Title",label:ot("edl.propertyConfig.basicChart.chartStyle")},{type:"Slider",label:ot("edl.propertyConfig.basicChart.smooth"),name:"columnWidthRatio",props:{min:0,max:1,step:.1}},{type:"ColorPicker",label:ot("edl.propertyConfig.basicChart.fillColor"),name:["columnStyle","fill"]},{type:"Slider",label:ot("edl.propertyConfig.basicChart.opacity"),name:["columnStyle","fillOpacity"],props:{min:0,max:1,step:.1}},{type:"ColorPicker",label:ot("edl.propertyConfig.basicChart.chartStroke"),name:["columnStyle","stroke"]},{type:"InputNumber",label:ot("edl.propertyConfig.basicChart.strokeWidth"),name:["columnStyle","lineWidth"]},{type:"Title",label:ot("edl.propertyConfig.basicChart.themeConfig")},{type:"Select",label:ot("edl.propertyConfig.basicChart.theme"),name:"theme",props:{options:[{label:ot("common.default"),value:"default"},{label:ot("edl.propertyConfig.basicChart.dark"),value:"dark"}]}},{type:"ColorPicker",label:ot("common.Color"),name:["color"]}],config:{props:{x:0,y:0,visible:!0,theme:"default",autoFit:!0,appendPadding:20,smooth:!0,lineStyle:{lineWidth:2,fillOpacity:1},color:"#7d33ff"},style:{height:"80px"},api:{sourceType:"json",source:[274,337,81,497,666,219,269]}},events:[],methods:[{name:"update",title:ot("edl.component.componentSchema.updateData")}]},Ii=({id:l,type:n,config:t},o)=>{const{setVisible:r,loading:s,visible:i,getDataList:c,data:p}=Ie(t);a.useImperativeHandle(o,()=>({show(){r(!0)},hide(){r(!1)},update:g=>{c(g)}})),a.useEffect(()=>{r(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]);const b={...t.props,percent:p,annotations:[{type:"text",position:["50%","50%"],content:`${(p*100).toFixed(1)}%`,style:{fontSize:16,fill:"#000",textAlign:"center"}}]};return i&&e.jsx(pt,{spinning:s,size:"large",wrapperClassName:"spin-loading",children:e.jsx(en,{...b})})},Xc=a.forwardRef(Ii),vt=window.$translation,ed={attrs:[{type:"Title",label:vt("edl.propertyConfig.basicProperty")},...$,{type:"Switch",label:vt("edl.propertyConfig.basicTextArea.autoFit"),name:"autoFit"},{type:"InputNumber",label:vt("edl.propertyConfig.basicChart.chartPadding"),name:"appendPadding"},{type:"Title",label:vt("edl.propertyConfig.basicChart.chartStyle")},{type:"Slider",label:vt("edl.propertyConfig.basicChart.widthProprtion"),name:"barWidthRatio",props:{min:0,max:1,step:.05}},{type:"Title",label:vt("edl.propertyConfig.basicChart.themeConfig")},{type:"Select",label:vt("edl.propertyConfig.basicChart.theme"),name:"theme",props:{options:[{label:vt("common.default"),value:"default"},{label:vt("edl.propertyConfig.basicChart.dark"),value:"dark"}]}},{type:"function",label:vt("edl.propertyConfig.basicChart.chartColor"),name:"color",render(){return e.jsx(el,{},"ColorSet")}}],config:{props:{x:0,y:0,autoFit:!1,appendPadding:0,barWidthRatio:.2,color:["#3C89E8","#E8EDF3"],visible:!0,annotations:[{type:"text",position:["50%","50%"],content:"",style:{fontSize:16,fill:"#000",textAlign:"center"}}]},style:{display:"inline-block",width:"300px",height:"100px"},api:{sourceType:"json",source:.7}},events:[],methods:[{name:"update",title:vt("edl.component.componentSchema.updateData")}]},ji=({config:l},n)=>{const{setVisible:t,loading:o,visible:r,getDataList:s,data:i}=Ie(l);a.useImperativeHandle(n,()=>({show(){t(!0)},hide(){t(!1)},update:b=>{s(b)}}));const{visible:c,...p}=l.props;return a.useEffect(()=>{t(c!==void 0?c:!0)},[c]),r&&e.jsx(pt,{spinning:o,size:"large",wrapperClassName:"spin-loading",children:e.jsx(tn,{...p,percent:i})})},td=a.forwardRef(ji),ft=window.$translation,ld={attrs:[{type:"Title",label:ft("edl.propertyConfig.basicProperty")},...$,{type:"Switch",label:ft("edl.propertyConfig.basicTextArea.autoFit"),name:"autoFit"},{type:"InputNumber",label:ft("edl.propertyConfig.basicChart.chartPadding"),name:"appendPadding"},{type:"Title",label:ft("edl.propertyConfig.basicChart.chartStyle")},{type:"Slider",label:ft("edl.propertyConfig.basicChart.outerRadius"),name:"radius",props:{min:0,max:1,step:.05}},{type:"Slider",label:ft("edl.propertyConfig.basicChart.innerRadius"),name:"innerRadius",props:{min:0,max:1,step:.05}},{type:"Title",label:ft("edl.propertyConfig.basicChart.themeConfig")},{type:"Select",label:ft("edl.propertyConfig.basicChart.theme"),name:"theme",props:{options:[{label:ft("common.default"),value:"default"},{label:ft("edl.propertyConfig.basicChart.dark"),value:"dark"}]}},{type:"function",label:ft("edl.propertyConfig.basicChart.chartColor"),name:"color",render(){return e.jsx(el,{},"ColorSet")}}],config:{props:{x:0,y:0,visible:!0,theme:"default",autoFit:!0,appendPadding:0,innerRadius:.85,radius:1,color:["#3C89E8","#E8EDF3"],statistic:{content:{style:{color:"#ffffff",fontSize:14}}}},style:{display:"inline-block",width:"100px",height:"100px"},api:{sourceType:"json",source:.5}},events:[],methods:[{name:"update",title:ft("edl.component.componentSchema.updateData")}]},Ti=({config:l},n)=>{const{setVisible:t,loading:o,visible:r,getDataList:s,data:i}=Ie(l);a.useImperativeHandle(n,()=>({show(){t(!0)},hide(){t(!1)},update:b=>{s(b)}}));const{visible:c,...p}=l.props;return a.useEffect(()=>{t(c!==void 0?c:!0)},[c]),r&&e.jsx(pt,{spinning:o,size:"large",style:{display:"inline",backgroundColor:"brown"},wrapperClassName:"spin-loading",children:e.jsx(ln,{style:{width:"100%",height:"100%"},percent:i,...p})})},od=a.forwardRef(Ti),X=window.$translation,ad={attrs:[{type:"Collapse",label:X("edl.propertyConfig.basicProperty"),props:{items:[...$,{type:"Switch",label:X("edl.propertyConfig.basicTextArea.autoFit"),name:"autoFit"},{type:"InputNumber",label:X("edl.propertyConfig.basicChart.chartPadding"),name:"appendPadding"}]}},{type:"Collapse",label:X("edl.propertyConfig.basicChart.chartStyle"),props:{items:[{type:"Slider",label:X("edl.propertyConfig.basicChart.liquidRadius"),name:"radius",props:{min:0,max:1,step:.05}},{type:"Input",label:X("edl.propertyConfig.basicChart.liquidColor"),tooltip:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:X("edl.propertyConfig.basicChart.singleColor")+": #0097A7"}),e.jsx("p",{children:X("edl.propertyConfig.basicChart.gradientColor")+": l(270) 0:#0097A7 0.5:#8BC34A 1:#FFC107"})]}),name:"color",props:{allowClear:!0}},{type:"ColorPicker",label:X("edl.propertyConfig.editorPage.backgroundColor"),name:["shapeStyle","fill"]},{type:"InputNumber",label:X("edl.propertyConfig.basicChart.outerBorder.borderWidth"),name:["outline","border"],props:{min:0,max:10,step:1}},{type:"ColorPicker",label:X("edl.propertyConfig.basicChart.outerBorder.borderStroke"),name:["outline","style","stroke"]},{type:"InputNumber",label:X("edl.propertyConfig.basicChart.wave.count"),name:["wave","count"],props:{min:0,max:10,step:1}},{type:"InputNumber",label:X("edl.propertyConfig.basicChart.wave.length"),name:["wave","length"],props:{min:0,max:300,step:1}},{type:"Select",label:X("edl.propertyConfig.basicChart.liquidShape"),name:["shape"],props:{options:[{label:X("edl.propertyConfig.basicChart.circle"),value:"circle"},{label:X("edl.propertyConfig.basicChart.square"),value:"rect"},{label:X("edl.propertyConfig.basicChart.diamond"),value:"diamond"},{label:X("edl.propertyConfig.basicChart.triangle"),value:"triangle"}]}}]}},{type:"Collapse",label:X("edl.propertyConfig.basicChart.statisticConfig.titleName"),props:{items:[{type:"Select",label:X("edl.propertyConfig.basicChart.statisticConfig.showTitle"),name:["statistic","title","style","display"],props:{options:[{label:X("edl.eventConfig.show"),value:"flex"},{label:X("edl.eventConfig.hidden"),value:"none"}]}},{type:"Input",label:X("edl.propertyConfig.basicChart.statisticConfig.titleName"),name:["statistic","title","content"]},{type:"InputNumber",label:X("edl.propertyConfig.basicChart.statisticConfig.titleFontSize"),name:["statistic","title","style","fontSize"],props:{min:6,max:50,formatter:l=>`${l} px`,parser:l=>l==null?void 0:l.replace("px","")}},{type:"InputNumber",label:X("edl.propertyConfig.basicChart.statisticConfig.titleFontWeight"),name:["statistic","title","style","fontWeight"],props:{min:100,max:800,step:50}},{type:"ColorPicker",label:X("edl.propertyConfig.basicChart.statisticConfig.titleColor"),name:["statistic","title","style","color"]},{type:"InputNumber",label:X("edl.propertyConfig.basicChart.statisticConfig.titleOffsetX"),name:["statistic","title","offsetX"],props:{min:-200,max:200,step:10}},{type:"InputNumber",label:X("edl.propertyConfig.basicChart.statisticConfig.titleOffsetY"),name:["statistic","title","offsetY"],props:{min:-200,max:200,step:10}}]}},{type:"Collapse",label:X("edl.propertyConfig.basicChart.statisticConfig.contentName"),props:{items:[{type:"InputNumber",label:X("edl.propertyConfig.basicChart.statisticConfig.contentFontSize"),name:["statistic","content","style","fontSize"],props:{min:6,max:50,formatter:l=>`${l} px`,parser:l=>l==null?void 0:l.replace("px","")}},{type:"InputNumber",label:X("edl.propertyConfig.basicChart.statisticConfig.contentFontWeight"),name:["statistic","content","style","fontWeight"],props:{min:100,max:800,step:50}},{type:"ColorPicker",label:X("edl.propertyConfig.basicChart.statisticConfig.contentColor"),name:["statistic","content","style","color"]},{type:"InputNumber",label:X("edl.propertyConfig.basicChart.statisticConfig.contentOffsetX"),name:["statistic","content","offsetX"],props:{min:-200,max:200,step:10}},{type:"InputNumber",label:X("edl.propertyConfig.basicChart.statisticConfig.contentOffsetY"),name:["statistic","content","offsetY"],props:{min:-200,max:200,step:10}}]}},{type:"Collapse",label:X("edl.propertyConfig.basicChart.themeConfig"),props:{items:[{type:"Select",label:X("edl.propertyConfig.basicChart.theme"),name:"theme",props:{options:[{label:X("common.default"),value:"default"},{label:X("edl.propertyConfig.basicChart.dark"),value:"dark"}]}}]}}],config:{props:{x:0,y:0,visible:!0,theme:"default",autoFit:!0,appendPadding:0,radius:.95,color:"l(270) 0:#0097A7 0.5:#8BC34A 1:#FFC107",outline:{border:0,style:{stroke:"#fff"}},wave:{count:3,length:200},shape:"circle",shapeStyle:{fill:"rgba(16, 142, 233, 0.7)",lineWidth:0},statistic:{title:{content:"Liquid",offsetX:0,offsetY:-10,style:{fontSize:"36px",fontWeight:"550",color:"#fff",display:"flex"}},content:{offsetX:0,offsetY:10,style:{fontSize:"30px",fontWeight:"500",color:"#fff"}}}},style:{width:"200px",height:"200px"},api:{sourceType:"json",source:.7}},events:[],methods:[{name:"update",title:X("edl.component.componentSchema.updateData")}]},ki=({id:l,type:n,config:t},o)=>{const{setVisible:r,visible:s,getDataList:i,data:c}=Ie(t),p=a.useMemo(()=>Array.isArray(c)?c:(console.error("[List]","data数据格式错误，请检查"),[]),[c]);a.useImperativeHandle(o,()=>({show(){r(!0)},hide(){r(!1)},update:d=>{i(d)}}));const b=d=>{var u;const m=d[(u=t.props.content)==null?void 0:u.name],f=t.props.content.type;if(!m||!f||f==="text")return m;if(f==="money")return jt(m,"currency");if(f==="number")return jt(m);if(f==="date1")return _t(m,"YYYY-MM-DD");if(f==="date2")return _t(m);if(f==="tag")return Array.isArray(m)?m.map(h=>e.jsx(Yt,{children:h},JSON.stringify(h))):typeof m=="string"||typeof m=="number"?e.jsx(Yt,{children:m}):m==null?void 0:m.toString()},g=(d,m={})=>{const f=t.events.find(u=>u.eventName===d);gt(f==null?void 0:f.actions,m)},y=Rt;return a.useEffect(()=>{r(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),s&&e.jsx(Yl,{style:t.style,bordered:t.props.bordered,size:t.props.size,split:t.props.split,header:t.props.header?e.jsx("div",{children:t.props.header}):null,footer:t.props.footer?e.jsx("div",{children:t.props.footer}):null,dataSource:p,renderItem:d=>{var m,f,u;return e.jsxs(Yl.Item,{actions:((m=t.props.bulkActionList)==null?void 0:m.map(h=>e.jsx(ee,{type:h.type,danger:h.danger,icon:h.icon?Vt.createElement(y[h.icon]):null,onClick:()=>g(h.eventName,d),children:h.text},h.eventName)))||[],children:[e.jsx(Yl.Item.Meta,{avatar:t.props.avatar?e.jsx(Zo,{src:d[t.props.avatar]}):null,title:(f=t.props.title)!=null&&f.name?e.jsx("span",{style:{color:t.props.title.color},children:d[t.props.title.name]}):null,description:t.props.desc.name?e.jsx("span",{style:{color:t.props.desc.color},children:d[t.props.desc.name]}):null}),(u=t.props.content)!=null&&u.name?e.jsx("div",{style:{color:t.props.content.color},children:b(d)}):null]})}})},nd=a.forwardRef(ki),sl=window.$translation,rd={attrs:[{type:"Title",label:sl("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Input",label:"头部标题",name:"header"},{type:"Input",label:"底部标题",name:"footer"},{type:"Switch",label:sl("edl.propertyConfig.basicTable.showBorder"),name:"bordered"},{type:"Select",label:"List尺寸",name:"size",props:{options:[{label:sl("common.default"),value:"default"},{label:sl("edl.propertyConfig.basicForm.large"),value:"large"},{label:sl("edl.propertyConfig.basicForm.small"),value:"small"}]}},{type:"Switch",label:"显示分割线",name:"split"},{type:"Title",label:"Meta配置",key:"Meta"},{type:"Input",label:"头像字段",name:"avatar"},{type:"Input",label:"标题字段",name:["title","name"]},{type:"ColorPicker",label:"标题颜色",name:["title","color"]},{type:"Input",label:"描述字段",name:["desc","name"]},{type:"ColorPicker",label:"描述颜色",name:["desc","color"]},{type:"Title",label:"内容配置",key:"content"},{type:"Input",label:"内容字段",name:["content","name"]},{type:"ColorPicker",label:"内容颜色",name:["content","color"]},{type:"Select",label:"展示类型",name:["content","type"],props:{options:[{value:"text",label:"文本"},{value:"date1",label:"日期-不含时分秒"},{value:"date2",label:"日期-包含时分秒"},{value:"money",label:"金额千分位"},{value:"number",label:"数字千分位"},{value:"tag",label:"标签"}]}},{type:"Title",label:"批量操作栏"},{type:"function",render(l){return e.jsx(vl,{form:l},"ActionSetting")}}],config:{props:{x:0,y:0,size:"default",bordered:!1,split:!0,header:"列表标题",footer:"列表底部",avatar:"avatar",title:{name:"name",color:"#000"},desc:{name:"remark",color:""},content:{name:"content",color:"#000",type:"money"},bulkActionList:[]},style:{padding:"20px"},events:[],api:{sourceType:"json",source:[{id:1,name:"上海分店",remark:"20%利润",avatar:"",content:"12423"},{id:2,name:"深圳分店",remark:"70%利润",avatar:"",content:"10999"},{id:3,name:"北京分店",remark:"35%利润",avatar:"",content:"30999"}]}},events:[]},Ai=(l,n)=>{const{id:t,type:o,config:r}=l,{setVisible:s,loading:i,visible:c,getDataList:p,data:b}=Ie(r),g=a.useMemo(()=>Array.isArray(b)?b:[b],[b]);a.useImperativeHandle(n,()=>({show(){s(!0)},hide(){s(!1)},update(h){p(h)}}));const y=(h,C)=>{const w=r.events.find(S=>S.eventName===h);gt(w==null?void 0:w.actions,C)},d=(h,C,w)=>{if(ht(h)?C.type==="money"?h=jt(h,"currency"):C.type==="number"?h=jt(h):C.type==="date1"?h=_t(h,"YYYY-MM-DD"):C.type==="date2"&&(h=_t(h)):typeof r.props.empty>"u"?h="-":r.props.empty&&(h=r.props.empty),C.render)try{h=new Function("text","record",`return (${C.render})(text,record);`)(h,w)}catch(S){console.error(`列[${C.title}]渲染失败`,S),h="解析异常"}if(C.type==="text"){const S=e.jsx(ee,{type:"link",onClick:()=>y(C.eventName,w),children:h.toString()});return C.ellipsis&&C.copyable?e.jsx(_e,{title:h,children:e.jsx(Zt.Paragraph,{copyable:!0,style:{marginBottom:0},children:C.clickable?S:h.toString()})}):C.ellipsis?e.jsx(_e,{title:h,children:C.clickable?S:h.toString()}):C.copyable?e.jsx(Zt.Paragraph,{copyable:!0,children:C.clickable?S:h.toString()}):C.clickable?e.jsx(ee,{type:"link",onClick:()=>y(C.eventName,w),children:h.toString()}):h.toString()}return C.type==="image"?e.jsx(St,{src:h,width:30}):C.type==="tag"?Array.isArray(h)?h.map(S=>e.jsx(Yt,{children:S},S)):typeof h=="string"||typeof h=="number"?e.jsx(Yt,{children:h}):h==null?void 0:h.toString():h},m=a.useMemo(()=>r.props.items.map(h=>{var S;const C=((S=g[0])==null?void 0:S[h.name])||"",w=d(C,h,g[0]||{});return{key:h.key,label:h.label,children:w}}),[r.props.items,g]),{visible:f,...u}=r.props;return a.useEffect(()=>{s(f!==void 0?f:!0)},[f]),c&&e.jsx(on,{...u,items:m,style:r.style})},sd=a.forwardRef(Ai),Fi=a.memo(l=>{const[n,t]=a.useState(!1),[o,r]=a.useState(0),[s]=Lo(),i=window.$translation,{selectedElement:c,elementsMap:p,editTableProps:b,editEvents:g}=window.usePageStore(m=>{const{page:f,selectPageItem:u,selectedElement:h,editTableProps:C,editEvents:w}=m,S=f[u==null?void 0:u.id]||{};return{selectedElement:h,elementsMap:S.elementsMap,editTableProps:C,editEvents:w}});a.useImperativeHandle(l.columnRef,()=>({open(m){const u=p[c==null?void 0:c.id].config.props.items[m],h=u.render||`function render(text,record) {
    return text;
}`;s.resetFields(),s.setFieldsValue({span:1,type:"text",...u,render:h}),r(m),t(!0)}}));const y=()=>{s.validateFields().then(()=>{const m=s.getFieldsValue(),f=p[c==null?void 0:c.id],u=wt(`ClickItem${m.name}`);m.clickable?m.eventName=m.eventName||u:m.eventName="",b({id:c==null?void 0:c.id,type:"items",index:o,props:{...m,key:m.dataIndex||o}});let h=f.events;const C=f.config.props.items[o].eventName;h=h.filter(w=>w.value!==C),m.clickable&&h.push({name:`${m.label}点击事件`,value:m.eventName||u}),g({id:f.id,events:h}),l.update(m.label,o),t(!1)})},d=()=>{t(!1)};return e.jsx(Ot,{title:"描述项设置",open:n,onOk:y,onCancel:d,width:800,children:e.jsxs(x,{form:s,labelCol:{span:8},wrapperCol:{span:14},children:[e.jsxs(Oe,{children:[e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:"标题",name:"label",rules:[{required:!0,message:i("common.pleaseInput")}],children:e.jsx(O,{})})}),e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:i("edl.propertyConfig.basicColumn.dataIndex"),name:"name",rules:[{required:!0,message:i("common.pleaseInput")}],children:e.jsx(O,{})})})]}),e.jsxs(Oe,{children:[e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:"跨列数",name:"span",children:e.jsx(O,{})})}),e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:"列类型",name:"type",children:e.jsxs(W,{children:[e.jsx(W.Option,{value:"text",children:"文本"}),e.jsx(W.Option,{value:"image",children:"图片"}),e.jsx(W.Option,{value:"date1",children:"日期-不含时分秒"}),e.jsx(W.Option,{value:"date2",children:"日期-包含时分秒"}),e.jsx(W.Option,{value:"money",children:"金额千分位"}),e.jsx(W.Option,{value:"number",children:"数字千分位"}),e.jsx(W.Option,{value:"tag",children:"标签"})]})})})]}),e.jsxs(Oe,{children:[e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:"超长省略",name:"ellipsis",tooltip:"省略后，会自动开启tooltip功能",children:e.jsx(Qe,{})})}),e.jsx(ne,{span:12,children:e.jsx(x.Item,{label:"可复制",name:"copyable",tooltip:"开启后，列增加复制功能，只对文本生效",children:e.jsx(Qe,{})})})]}),e.jsx(Oe,{children:e.jsxs(ne,{span:12,children:[e.jsx(x.Item,{label:"可点击",name:"clickable",tooltip:"开启后，当前列展示为可点击的link格式",children:e.jsx(Qe,{})}),e.jsx(x.Item,{name:"eventName",hidden:!0,children:e.jsx(O,{})})]})}),e.jsx(Oe,{children:e.jsx(ne,{span:24,children:e.jsx(x.Item,{label:"自定义渲染",name:"render",labelCol:{span:4},wrapperCol:{span:21},tooltip:"通过编程的方式实现值渲染，不支持ReactNode渲染。例如：if(text === 1)return '在线'; ",children:e.jsx(hl,{})})})})]})})}),Ei=a.memo(({form:l})=>{const n=a.useRef(),t=r=>{var s;(s=n.current)==null||s.open(r)},o=(r,s)=>{l.setFieldValue(["items",s,"label"],r)};return e.jsxs(e.Fragment,{children:[e.jsx(x.List,{name:["items"],children:(r,{add:s,remove:i})=>e.jsx(e.Fragment,{children:r.map(({key:c,name:p,...b})=>e.jsxs(xe,{style:{display:"flex",marginBottom:8,padding:"0 10px"},align:"baseline",children:[e.jsx(x.Item,{...b,wrapperCol:{span:22},name:[p,"label"],children:e.jsx(O,{placeholder:"项名称"})}),e.jsx(x.Item,{...b,wrapperCol:{span:22},name:[p,"name"],children:e.jsx(O,{placeholder:"项字段",style:{width:"100%"}})}),e.jsx(Ml,{onClick:()=>t(p)}),e.jsx(st,{onClick:()=>s({label:"-",name:`name${p+1}`},p+1)}),e.jsx(Wt,{onClick:()=>i(p)})]},c))})}),e.jsx(Fi,{columnRef:n,update:o})]})}),Ht=window.$translation,id={attrs:[{type:"Title",label:Ht("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Input",label:Ht("common.title"),name:["title"]},{type:"Switch",label:"展示边框",name:["bordered"]},{type:"Switch",label:"展示冒号",name:["colon"]},{type:"InputNumber",label:"一行列数",name:["column"]},{type:"Select",label:Ht("edl.component.componentSchema.layout"),name:["layout"],tooltip:"文字和内容的排列",props:{options:[{value:"horizontal",label:"水平"},{value:"vertical",label:"垂直"}]}},{type:"Select",label:"列表大小",name:["size"],props:{options:[{value:"default",label:Ht("common.default")},{value:"middle",label:"中等"},{value:"small",label:"小号"}]}},{type:"Select",label:Ht("edl.propertyConfig.basicStaticTerm.nullDisplay"),name:["empty"],props:{options:[{label:"空",value:""},{label:"-",value:"-"},{label:"/",value:"/"}]}},{type:"Title",label:"列表设置",key:"ListSet"},{type:"function",key:"DescItemSetting",render(l){return e.jsx(Ei,{form:l},"DescItemSetting")}}],config:{props:{x:0,y:0,title:"用户信息",colon:!0,column:3,layout:"horizontal",size:"default",empty:"-",items:[{label:"名称",name:"name",type:"text"},{label:"类型",name:"type",type:"text"},{label:"寿命",name:"time",type:"text"},{label:"地区分布",name:"area",type:"text"}],visible:!0},style:{},events:[],api:{sourceType:"json",sourceField:"list",source:[{id:1001,name:"萤火虫",type:"昆虫",avatar:"",time:10,skill:["飞","发光","御敌"],sales:9.9,createdAt:new Date().getTime(),area:"热带、亚热带和温带地区"}]}},events:[{value:"onClick",name:Ht("edl.propertyConfig.clickEvent")}],methods:[{name:"update",title:Ht("edl.component.componentSchema.updateData")}]},Di=({id:l,type:n,config:t,onChange:o},r)=>{const[s,i]=a.useState(t.props.current||0),{setVisible:c,loading:p,visible:b,getDataList:g,data:y}=Ie(t);a.useEffect(()=>{i(t.props.current)},[t.props.current]);const d=a.useMemo(()=>Array.isArray(y)?y:(console.error("[Steps]","data数据格式错误，请检查"),[]),[y]);a.useImperativeHandle(r,()=>({show(){c(!0)},hide(){c(!1)},update(){g(y)},updateStep(h){i(h)}}));const m=h=>{i(h),o==null||o({current:h})},{visible:f,...u}=t.props;return a.useEffect(()=>{c(f!==void 0?f:!0)},[f]),b&&e.jsx(an,{style:t.style,...u,current:s,items:d,onChange:m})},pd=a.forwardRef(Di),il=window.$translation,cd={attrs:[{type:"Title",label:il("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Variable",label:"当前步骤",name:["current"]},{type:"Select",label:"步骤条方向",name:["direction"],props:{options:[{value:"horizontal",label:"水平"},{value:"vertical",label:"垂直"}]}},{type:"Select",label:il("edl.propertyConfig.basicChart.labelPos"),name:["labelPlacement"],props:{options:[{value:"horizontal",label:"水平"},{value:"vertical",label:"垂直"}]}},{type:"InputNumber",label:"当前进度",name:["percent"],tooltip:"当前 process 步骤显示的进度条进度（只对基本类型的 Steps 生效，取值0-100）"},{type:"Switch",label:"响应式",name:["responsive"]},{type:"Select",label:"尺寸",name:["size"],props:{options:[{value:"default",label:il("common.default")},{value:"small",label:"迷你"}]}},{type:"Select",label:"当前状态",name:["status"],props:{options:[{value:"wait",label:"wait"},{value:"process",label:"process"},{value:"finish",label:"finish"},{value:"error",label:"error"}]}},{type:"Select",label:"步骤类型",name:["type"],props:{options:[{value:"default",label:"default"},{value:"navigation",label:"navigation"},{value:"inline",label:"inline"}]}}],config:{props:{x:0,y:0,current:0,direction:"horizontal",labelPlacement:"horizontal",responsive:!0,visible:!0},style:{},events:[],api:{sourceType:"json",source:[{title:"第一步",description:"开始"},{title:"第二步",description:"进行中",subTitle:"加速中"},{title:"第三步",description:"结束"}]}},events:[{value:"onChange",name:il("edl.propertyConfig.basicInput.onChange")}],methods:[{name:"update",title:il("edl.component.componentSchema.updateData")},{name:"更新步骤",title:"updateStep"}]};function ua({children:l,code:n}){const t=window.usePageStore(s=>s.auths),{pathname:o}=window.location;return a.useMemo(()=>o.includes("microAppsWeb"),[o])||t.includes(n)||!n?e.jsx(e.Fragment,{children:l}):null}const Ni=({id:l,type:n,config:t,onClick:o},r)=>{const{props:s}=t,{authCode:i,authScript:c,visible:p,openAuth:b,...g}=s,[y,d]=a.useState(p!==void 0?p:!0);a.useEffect(()=>{d(s.visible)},[s.visible]);const[m,f]=a.useState(!1),[u,h]=a.useState(!1);a.useImperativeHandle(r,()=>({show(){d(!0)},hide(){d(!1)},enable(){f(!1)},disable(){f(!0)},startLoading:()=>{h(!0)},hideLoading:()=>{h(!1)}}));const C=()=>{o&&o()};return y&&e.jsx(ua,{code:i&&i[0]&&i[0].code,children:e.jsx(ee,{style:t.style,loading:u,disabled:m,...g,icon:g.icon?e.jsx(Te,{name:g.icon}):null,onClick:C,children:t.props.text})})},dd=a.forwardRef(Ni),Pi=window.$translation;function wl({name:l="icon"}){return e.jsx(x.Item,{label:Pi("edl.propertyConfig.basicButton.btnIcon"),name:l,children:e.jsx(bl,{})})}const Fe=window.$translation,md={attrs:[{type:"Title",label:Fe("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Variable",label:Fe("edl.propertyConfig.basicButton.btnLabel"),name:["text"]},{type:"Select",label:Fe("edl.propertyConfig.basicButton.btnType"),name:["type"],props:{options:[{value:"primary",label:"primary"},{value:"default",label:"default"},{value:"ghost",label:"ghost"},{value:"dashed",label:"dashed"},{value:"text",label:"text"},{value:"link",label:"link"}]}},{type:"Select",label:Fe("edl.propertyConfig.basicButton.btnShape"),name:["shape"],props:{options:[{value:"default",label:"default"},{value:"circle",label:"circle"},{value:"round",label:"round"}]}},{type:"Switch",label:Fe("edl.propertyConfig.basicButton.blockBtn"),name:["block"]},{type:"Switch",label:Fe("edl.propertyConfig.basicButton.ghostBtn"),name:["ghost"]},{type:"Switch",label:Fe("edl.propertyConfig.basicButton.dangerBtn"),name:["danger"]},{type:"Variable",label:Fe("edl.propertyConfig.basicButton.disable"),name:["disabled"]},{type:"function",render(){return e.jsx(wl,{},"icon-setting")}},{type:"Title",label:Fe("edl.propertyConfig.basicButton.authVerification"),key:"auth"},{type:"Switch",label:Fe("edl.propertyConfig.basicButton.openAuth"),name:"openAuth",props:{placeholder:Fe("edl.propertyConfig.basicButton.openAuth")}},{type:"Input",label:Fe("edl.propertyConfig.basicButton.authName"),name:["authCode",0,"name"],props:{placeholder:Fe("edl.propertyConfig.basicButton.authName"),disabled:!0}},{type:"Input",label:Fe("edl.propertyConfig.basicButton.auth"),name:["authCode",0,"code"],props:{placeholder:Fe("edl.propertyConfig.basicButton.auth"),disabled:!0}},{type:"Variable",label:Fe("edl.propertyConfig.basicButton.thirdVerification"),name:["authScript"],props:{placeholder:Fe("edl.propertyConfig.basicButton.scripts")}}],config:{props:{x:0,y:0,type:"primary",size:"middle",text:Fe("edl.propertyConfig.basicButton.text"),shape:"default",openAuth:!1,visible:!0},style:{width:"120px",height:"32px"},events:[]},events:[{value:"onClick",name:Fe("edl.propertyConfig.clickEvent")}],methods:[{name:"startLoading",title:Fe("edl.component.componentSchema.startLoading")},{name:"endLoading",title:Fe("edl.component.componentSchema.endLoading")}]},$i=({id:l,type:n,config:t,onSuccess:o,onFail:r},s)=>{const{props:i}=t,[c,p]=a.useState(i.visible!==void 0?i.visible:!0),[b,g]=a.useState(!1),[y,d]=a.useState(!1),m=window.usePageStore(S=>S.apis);a.useImperativeHandle(s,()=>({show(){p(!0)},hide(){p(!1)},enable(){g(!1)},disable(){g(!0)}}));const f=S=>{var j;return((j=t.props.upload.accept)==null?void 0:j.includes(S.type))?S.size>t.props.upload.limitSize*1024*1024?(window.$message.error("图片超出最大限制"),!1):!0:(window.$message.error("不支持该文件格式，请重新选择"),!1)},u=S=>{d(!0);const{url:v,method:I,replaceData:j,params:k}=m[t.api.id],{data:T}=In(I,j,k,{});ro.post(v,{[t.props.upload.name||"file"]:S.file,...T},{headers:{"Content-Type":"multipart/form-data"}}).then(A=>{d(!1),o==null||o(A.data)}).catch(()=>{r==null||r()}).finally(()=>{d(!1)})},h=Rt,{button:C,upload:w}=t.props;return a.useEffect(()=>{p(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),c&&e.jsx(Pl,{...w,withCredentials:!0,showUploadList:!1,style:t.style,beforeUpload:f,customRequest:u,children:e.jsx(ee,{...C,icon:C.icon?Vt.createElement(h[C.icon]):null,loading:y,disabled:b,children:C.text})})},ud=a.forwardRef($i),mt=window.$translation,bd={attrs:[{type:"Title",label:mt("edl.propertyConfig.basicConfig"),key:"title1"},{type:"Input",label:mt("edl.propertyConfig.basicButton.btnLabel"),name:["button","text"]},{type:"Select",label:mt("edl.propertyConfig.basicButton.btnType"),name:["button","type"],props:{options:[{value:"primary",label:"primary"},{value:"default",label:"default"},{value:"ghost",label:"ghost"},{value:"dashed",label:"dashed"},{value:"text",label:"text"},{value:"link",label:"link"}]}},{type:"Select",label:mt("edl.propertyConfig.basicButton.btnShape"),name:["button","shape"],props:{options:[{value:"default",label:"default"},{value:"circle",label:"circle"},{value:"round",label:"round"}]}},{type:"Switch",label:mt("edl.propertyConfig.basicButton.blockBtn"),name:["button","block"]},{type:"Switch",label:mt("edl.propertyConfig.basicButton.ghostBtn"),name:["button","ghost"]},{type:"Switch",label:mt("edl.propertyConfig.basicButton.dangerBtn"),name:["button","danger"]},{type:"function",render(){return e.jsx(wl,{name:["button","icon"]},"icon-setting")}},{type:"Title",label:mt("edl.propertyConfig.basicUpload.uploadConfig"),key:"title2"},{type:"Input",label:"参数名称",name:["upload","name"],props:{placeholder:mt("common.pleaseInput")}},{type:"Select",label:mt("edl.propertyConfig.basicUpload.fileType"),name:["upload","accept"],props:{mode:"multiple",options:[{value:"image/jpeg",label:"image/jpeg"},{value:"image/png",label:"image/png"},{value:"image/gif",label:"image/gif"},{value:"video/mp4",label:"video/mp4"},{value:"text/csv",label:"text/csv"},{value:"text/html",label:"text/html"},{value:"application/zip",label:"application/zip"},{value:"application/pdf",label:"application/pdf"},{value:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",label:"excel"},{value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",label:"word"},{value:"application/vnd.openxmlformats-officedocument.presentationml.presentation",label:"ppt"}]}},{type:"InputNumber",label:mt("edl.propertyConfig.basicUpload.fileSize"),name:["upload","limitSize"],props:{placeholder:"单位：MB",addonAfter:"MB"}},{type:"Switch",label:mt("edl.propertyConfig.basicCascadeSelection.supportMultip"),name:["upload","multiple"]},{type:"Input",label:"上传地址",name:["upload","action"],props:{placeholder:mt("common.pleaseInput")}}],config:{props:{x:0,y:0,button:{type:"primary",size:"middle",text:"上传",shape:"default",icon:"UploadOutlined"},upload:{name:"file",accept:["excel"],listType:"text",multiple:!1,limitSize:10},text:"Upload",structure:"url",visible:!0},style:{},events:[],api:{},source:[]},events:[{value:"onSuccess",name:"上传成功事件"},{value:"onFail",name:"上传失败事件"}]},Mi="_basicTabs_1nbwz_1",Vi={basicTabs:Mi},Ri=({tab:l,handleDrop:n,elements:t})=>{const o=window.AppsRender,r=window.$translation,{mode:s}=window.usePageStore(it(c=>({mode:c.mode}))),[,i]=Cl({accept:"MENU_ITEM",drop(c,p){p.didDrop()||n(c,p,l)},collect:c=>({isOver:c.isOver(),canDrop:c.canDrop()})});return e.jsx("div",{ref:i,className:"w-100% h-100%",children:t.length>0?e.jsx(o,{elements:t}):s==="edit"?r("edl.component.containerComponent.dragDesc"):""})},Wi=({id:l,config:n,elements:t,onChange:o,onTabClick:r},s)=>{const{items:i=[],visible:c,x:p,y:b,...g}=n.props,[y,d]=a.useState(c!==void 0?c:!0),m=da(l),[f,u]=a.useState([]);a.useImperativeHandle(s,()=>({show(){d(!0)},hide(){d(!1)}}));const[h,C]=a.useState("0"),w=I=>{C(I),o==null||o({activeKey:I})},S=I=>{r==null||r({activeKey:I})};a.useEffect(()=>{u(i.map((I,j)=>{const k=(t==null?void 0:t.filter(T=>T.pos===I.key))||[];return{label:I.label,closable:g.type==="editable-card"?I.closable:void 0,key:j.toString(),icon:I.icon?e.jsx(Te,{name:I.icon}):null,closeIcon:g.type==="editable-card"&&I.closeIcon?e.jsx(Te,{name:I.closeIcon}):null,children:e.jsx(Ri,{tab:I.key,handleDrop:m,elements:k})}}))},[i,t]);const v=(I,j)=>{if(j==="remove"){if(!f)return;const k=f.findIndex(A=>A.key===I),T=f.filter(A=>A.key!==I);if(T.length&&I===h){const A=T[k===T.length?k-1:k].key;C(A)}u(T)}};return a.useEffect(()=>{d(n.props.visible!==void 0?n.props.visible:!0)},[n.props.visible]),y&&e.jsx(Ho,{className:Vi.basicTabs,style:n.style,...g,items:f,onChange:w,onTabClick:S,activeKey:h,onEdit:v})},fd=a.forwardRef(Wi),Bi=a.memo(({form:l})=>{const n=window.$translation,{token:t}=qo.useToken(),{removeElementsByPos:o}=window.usePageStore(r=>({removeElementsByPos:r.removeElementsByPos}));return e.jsx(x.Item,{children:e.jsx(x.List,{name:"items",children:(r,{add:s,remove:i})=>e.jsxs(e.Fragment,{children:[r.map(({key:c,name:p,...b})=>e.jsxs("div",{className:"pt-15px pb-10px px-10px relative",style:{border:`1px solid ${t.colorBorder}`},children:[e.jsx(Te,{className:"absolute top-10px right-10px cursor-pointer z-11",name:"cuowu",onClick:()=>{o(l.getFieldValue(["items",p,"key"])),i(p)}}),e.jsx(x.Item,{...b,name:[p,"key"],hidden:!0,children:e.jsx(O,{})}),e.jsx(x.Item,{...b,name:[p,"label"],label:n("edl.propertyConfig.basicTabs.tabName"),children:e.jsx(O,{})}),e.jsx(x.Item,{...b,name:[p,"icon"],label:n("edl.propertyConfig.basicTabs.icon"),children:e.jsx(bl,{placeholder:n("edl.propertyConfig.basicHmiContainer.icon")})}),e.jsx(x.Item,{...b,name:[p,"closable"],label:n("edl.propertyConfig.basicTabs.closable"),children:e.jsx(Qe,{})}),e.jsx(x.Item,{...b,name:[p,"closeIcon"],label:n("edl.propertyConfig.basicTabs.closeIcon"),children:e.jsx(bl,{placeholder:n("edl.propertyConfig.basicHmiContainer.icon")})})]},c)),e.jsx("div",{style:{padding:"10px"},children:e.jsx(ee,{type:"primary",block:!0,ghost:!0,onClick:()=>{s({label:`Tab${r.length+1}`,icon:void 0,closable:!0,closeIcon:void 0,key:new Date().getTime()},r.length+1)},icon:e.jsx(Te,{name:"tianjia"}),children:n("edl.common.add")})})]})})})}),Ee=window.$translation,yd={attrs:[{type:"Title",label:Ee("edl.propertyConfig.basicTabs.tabConfig"),key:"tabs-title"},...$,{type:"Title",label:Ee("edl.propertyConfig.basicConfig"),key:"basic"},{type:"Switch",label:Ee("edl.propertyConfig.basicTabs.tabCenter"),name:["centered"]},{type:"Select",label:Ee("edl.propertyConfig.basicTabs.size"),name:["size"],props:{options:[{value:"large",label:Ee("edl.propertyConfig.basicTabs.large")},{value:"middle",label:Ee("edl.propertyConfig.basicTabs.middle")},{value:"small",label:Ee("edl.propertyConfig.basicTabs.small")}]}},{type:"InputNumber",label:Ee("edl.propertyConfig.basicTabs.tabBarGutter"),name:["tabBarGutter"]},{type:"Select",label:Ee("edl.propertyConfig.basicTabs.tabPosition"),name:["tabPosition"],props:{options:[{value:"top",label:Ee("edl.propertyConfig.basicTabs.top")},{value:"right",label:Ee("edl.propertyConfig.basicTabs.right")},{value:"bottom",label:Ee("edl.propertyConfig.basicTabs.bottom")},{value:"left",label:Ee("edl.propertyConfig.basicTabs.left")}]}},{type:"Switch",label:Ee("edl.propertyConfig.basicTabs.destroyOnHide"),name:["destroyInactiveTabPane"]},{type:"Select",label:Ee("edl.propertyConfig.basicTabs.tabType"),name:["type"],props:{options:[{value:"line",label:Ee("edl.propertyConfig.basicTabs.line")},{value:"card",label:Ee("edl.propertyConfig.basicTabs.card")},{value:"editable-card",label:Ee("edl.propertyConfig.basicTabs.editableCard")}]}},{type:"Title",label:Ee("edl.propertyConfig.basicTabs.tab"),key:"tabs-page"},{type:"function",render(l){return e.jsx(Bi,{form:l},"tab-setting")}}],config:{props:{x:0,y:0,type:"line",size:"middle",tabPosition:"top",centered:!1,hideAdd:!0,destroyInactiveTabPane:!1,visible:!0,items:[{label:"Tab1",icon:void 0,closable:!0,closeIcon:void 0,key:new Date().getTime()}]},style:{width:"100%",height:"600px",padding:0},events:[]},events:[{value:"onTabClick",name:Ee("edl.propertyConfig.clickEvent")},{value:"onChange",name:Ee("edl.propertyConfig.basicOptions.toggleEvent")}],methods:[]},Li=({id:l,type:n,config:t,elements:o},r)=>{const{props:s}=t,[i,c]=a.useState(s.visible!==void 0?s.visible:!0),p=window.$translation,b=Ze(l);a.useImperativeHandle(r,()=>({show(){c(!0)},hide(){c(!1)}}));const g=window.AppsRender;return a.useEffect(()=>{c(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),i&&e.jsx("div",{ref:b,children:o!=null&&o.length?e.jsx(g,{elements:o}):e.jsx("div",{className:"slots",style:{lineHeight:"150px"},children:p("edl.component.containerComponent.dragDesc")})})},hd=a.forwardRef(Li),Fo=window.$translation,gd={attrs:[{type:"Title",label:Fo("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Input",label:"Key",name:["key"]},{type:"Input",label:"标签名称",name:["label"]},{type:"function",render(){return e.jsx(wl,{},"icon-setting")}},{type:"Switch",label:"显示关闭",name:["closable"],props:{tooltip:'type="editable-card"有效'}},{type:"Switch",label:Fo("edl.propertyConfig.basicForm.disabled"),name:["disabled"]},{type:"Switch",label:"隐藏渲染",name:["forceRender"]},{type:"Switch",label:"隐藏销毁",name:["destroyInactiveTabPane"]}],config:{props:{x:0,y:0,key:"active1",label:"Tab1",icon:"",closable:!1,forceRender:!1,disabled:!1,destroyInactiveTabPane:!1,visible:!0},style:{},events:[]},events:[],methods:[]},Hi=({config:l},n)=>{const{setVisible:t,visible:o,getDataList:r,data:s}=Ie(l),{dataProps:i,vertical:c,wrap:p,justify:b,align:g,gap:y,showIcon:d,iconShape:m,icon:f,iconSize:u,titleFontSize:h,titleColor:C,dataFontSize:w,dataColor:S,unitFontSize:v,unitColor:I,dataGap:j=8,unitGap:k=8}=l.props,T=a.useMemo(()=>{if(!jn(s,"object"))return console.error("StatisticCount","data数据格式错误，请检查"),{name:"",value:"",icon:"",unit:""};let F={};return i?Object.keys(i||{}).forEach(E=>{F[E]=s[i[E]]||s[i[E]]===0?s[i[E]]:""}):F=s,F},[s,i]);a.useImperativeHandle(n,()=>({show(){t(!0)},hide(){t(!1)},update:F=>{r(F)}}));const A=a.useMemo(()=>u?+u.replace(/\D/g,""):20,[u]);return a.useEffect(()=>{t(l.props.visible!==void 0?l.props.visible:!0)},[l.props.visible]),o&&e.jsxs(Xe,{vertical:!1,wrap:!1,justify:"start",align:"center",gap:y,style:l==null?void 0:l.style,children:[d&&e.jsx(Zo,{size:A,shape:m,src:T.icon||f}),e.jsxs(Xe,{vertical:c,wrap:p,justify:b,gap:j,align:g,flex:1,children:[e.jsx("div",{style:{fontSize:h,color:C},children:T.name||"--"}),e.jsxs(xe,{size:[k,0],children:[e.jsx("span",{style:{fontSize:w,color:S},children:T.value||T.value===0?T.value:"--"}),e.jsx("span",{style:{fontSize:v,color:I},children:T.unit})]})]})]})},Cd=a.forwardRef(Hi),z=window.$translation,vd={attrs:[{type:"Title",label:z("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Collapse",label:z("edl.component.componentSchema.field",{addSpaceAfterEn:!0})+z("common.setting"),key:"fieldSet",props:{items:[{type:"Input",label:z("edl.component.componentSchema.iconFieldSet"),name:["dataProps","icon"]},{type:"Input",label:z("edl.component.componentSchema.nameFieldSet"),name:["dataProps","name"]},{type:"Input",label:z("edl.component.componentSchema.valueFieldSet"),name:["dataProps","value"]},{type:"Input",label:z("edl.component.componentSchema.unitFieldSet"),name:["dataProps","unit"]}]}},{type:"Collapse",key:"gapSet",label:z("edl.component.componentSchema.gapSet"),props:{items:[{type:"InputNumber",label:z("edl.component.componentSchema.IconGap"),name:"gap"},{type:"InputNumber",label:z("edl.component.componentSchema.titleGap"),name:"dataGap"},{type:"InputNumber",label:z("edl.component.componentSchema.unitGap"),name:"unitGap"}]}},{type:"Switch",label:z("edl.propertyConfig.basicSpace.autoWrap"),name:"wrap"},{type:"Switch",label:z("edl.component.containerComponent.veticalLayout"),name:"vertical"},{type:"Select",label:z("edl.styleConfig.justifyContent"),name:"justify",props:{options:[{label:z("edl.styleConfig.flexStart"),value:"start"},{label:z("edl.styleConfig.flexEnd"),value:"end"},{label:z("edl.styleConfig.center"),value:"center"},{label:z("edl.styleConfig.spaceBetween"),value:"space-between"},{label:z("edl.styleConfig.spaceAround"),value:"space-around"}]}},{type:"Select",label:z("edl.styleConfig.alignItems"),name:"align",props:{options:[{label:z("edl.styleConfig.top"),value:"start"},{label:z("edl.styleConfig.bottom"),value:"end"},{label:z("edl.styleConfig.center"),value:"center"},{label:z("edl.styleConfig.baselineAlign"),value:"baseline"},{label:z("edl.styleConfig.stretch"),value:"stretch"},{label:z("edl.styleConfig.auto"),value:"auto"}]}},{type:"Collapse",label:z("edl.component.componentSchema.iconSet"),key:"iconSet",props:{items:[{type:"Switch",label:z("common.open"),name:"showIcon"},{type:"function",label:z("common.icon"),name:"icon",render:()=>e.jsx(x.Item,{label:z("common.icon"),name:"icon",children:e.jsx(xl,{})},"icon")},{type:"function",label:z("topo.penProps.iconSize"),name:"iconSize",render:()=>e.jsx(x.Item,{label:z("topo.penProps.iconSize"),name:"iconSize",children:e.jsx(Et,{})},"iconSize")},{type:"Select",label:z("edl.component.componentSchema.iconShape"),name:"iconShape",props:{options:[{label:z("edl.propertyConfig.basicChart.circle"),value:"circle"},{label:z("edl.propertyConfig.basicChart.square"),value:"square"}]}}]}},{type:"Collapse",label:z("common.title"),key:"titleSet",props:{items:[{type:"function",label:z("edl.styleConfig.fontSize"),name:"titleFontSize",render:()=>e.jsx(x.Item,{label:z("edl.styleConfig.fontSize"),name:"titleFontSize",children:e.jsx(Et,{})},"titleFontSize")},{type:"ColorPicker",label:z("common.Color"),name:"titleColor"}]}},{type:"Collapse",label:z("topo.events.value"),key:"valueSet",props:{items:[{type:"function",label:z("edl.styleConfig.fontSize"),name:"dataFontSize",render:()=>e.jsx(x.Item,{label:z("edl.styleConfig.fontSize"),name:"dataFontSize",children:e.jsx(Et,{})},"titleFontSize")},{type:"ColorPicker",label:z("common.Color"),name:"dataColor"}]}},{type:"Collapse",label:z("edl.component.componentSchema.unitSet"),key:"unitSet",props:{items:[{type:"function",label:z("edl.styleConfig.fontSize"),name:"unitFontSize",render:()=>e.jsx(x.Item,{label:z("edl.styleConfig.fontSize"),name:"unitFontSize",children:e.jsx(Et,{})},"unitFontSize")},{type:"ColorPicker",label:z("common.Color"),name:"unitColor"}]}}],config:{props:{x:0,y:0,size:"default",showIcon:!0,gap:12,dataGap:8,unitGap:8,icon:"",iconSize:"20px",iconShape:"square",wrap:!1,vertical:!1,justify:"start",align:"center",titleFontSize:"16px",titleColor:"#dddddd",dataFontSize:"24px",dataColor:"#ffffff",unitFontSize:"12px",unitColor:"#dddddd",dataProps:{icon:"icon",name:"name",value:"value",unit:"unit"},visible:!0},style:{padding:""},events:[],api:{sourceType:"json",source:{icon:"",name:"装机容量",value:"232",unit:"kW"},sourceDataType:zt.object,fields:[{name:"icon",type:zt.string,desc:"图标"},{name:"name",type:zt.string,desc:"标题"},{name:"value",type:zt.string,desc:"数值"},{name:"unit",type:zt.string,desc:"单位"}]}},events:[]},zi="_dropdownBtn_cmjuo_1",Yi={dropdownBtn:zi},Oi=({id:l,config:n,onClickLeftBtn:t},o)=>{const{props:r}=n,[s,i]=a.useState(r.visible!==void 0?r.visible:!0),[c,p]=a.useState(!1),[b,g]=a.useState(!1),{authCode:y,authScript:d,openAuth:m,x:f,y:u,visible:h,dropdownStyle:C,text:w,danger:S,icon:v,size:I,type:j,autoAdjustOverflow:k,bulkActionList:T,iconPosition:A,width:F,...E}=r,D=a.useMemo(()=>T.map(q=>({...q,icon:q.icon?e.jsx(Te,{name:q.icon}):null})),[T]);a.useImperativeHandle(o,()=>({show(){i(!0)},hide(){i(!1)},enable(){p(!1)},disable(){p(!0)},startLoading:()=>{g(!0)},hideLoading:()=>{g(!1)}}));const M=q=>{const te=n.events.find(P=>P.eventName===q.key);gt(te==null?void 0:te.actions,void 0)};return a.useEffect(()=>{i(h!==void 0?h:!0)},[h]),s&&e.jsx(ua,{code:y&&y[0]&&y[0].code,children:C==="link"?e.jsx(kl,{disabled:c,autoAdjustOverflow:k,getPopupContainer:q=>q.parentNode,menu:{items:D,onClick:M},...E,overlayStyle:{width:Number(F)?Number(F)+"px":"auto"},children:e.jsx("a",{style:{...n.style},onClick:q=>q.preventDefault(),className:"flex items-center justify-center",children:A==="start"?e.jsxs(e.Fragment,{children:[v?e.jsx(Te,{name:v}):null,e.jsx("span",{className:"ml-5px",children:w})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-5px",children:w}),v?e.jsx(Te,{name:v}):null]})})}):C==="singleBtn"?e.jsx(kl,{disabled:c,autoAdjustOverflow:k,getPopupContainer:q=>q.parentNode,menu:{items:D,onClick:M},...E,overlayStyle:{width:Number(F)?Number(F)+"px":"auto"},children:e.jsx(ee,{style:{...n.style},danger:S,type:j,icon:v?e.jsx(Te,{name:v}):null,iconPosition:A,loading:b,size:I,children:w})}):e.jsx(kl.Button,{className:Yi.dropdownBtn,disabled:c,loading:b,getPopupContainer:q=>q.parentNode,menu:{items:D,onClick:M},...E,danger:S,icon:v?e.jsx(Te,{name:v}):null,size:I,type:j,onClick:()=>t==null?void 0:t(),overlayStyle:{width:Number(F)?Number(F)+"px":"auto"},children:w})})},xd=a.forwardRef(Oi),Qi=a.memo(({modalRef:l,update:n})=>{const{t}=_o(),[o,r]=a.useState(!1),[s,i]=a.useState(0),[c]=x.useForm(),{selectedElement:p,elementsMap:b,editTableProps:g}=window.usePageStore(m=>{var u;const f=m.page[((u=m.selectPageItem)==null?void 0:u.id)||""];return{selectedElement:m.selectedElement,elementsMap:f.elementsMap,editTableProps:m.editTableProps}});a.useImperativeHandle(l,()=>({open(m){const f=b[p==null?void 0:p.id];c.setFieldsValue({...f.config.props.bulkActionList[m]}),i(m),r(!0)}}));const y=()=>{c.validateFields().then(()=>{const m=c.getFieldsValue();g({id:p==null?void 0:p.id,type:"bulkActionList",index:s,props:m}),n(m,s),r(!1)})},d=()=>{r(!1)};return e.jsx(Ot,{title:t("edl.propertyConfig.basicDropdown.menuConfig"),open:o,onOk:y,onCancel:d,width:600,destroyOnClose:!0,children:e.jsxs(x,{form:c,children:[e.jsx(x.Item,{name:"key",hidden:!0,children:e.jsx(O,{})}),e.jsx(x.Item,{name:"label",label:t("edl.propertyConfig.basicDropdown.label"),rules:[{required:!0,message:t("common.pleaseInput",{addSpaceAfterEn:!0})+t("edl.propertyConfig.basicDropdown.label",{lowerCase:!0})}],children:e.jsx(O,{})}),e.jsx(x.Item,{name:"danger",label:t("edl.propertyConfig.basicDropdown.danger"),valuePropName:"checked",children:e.jsx(Qe,{})}),e.jsx(x.Item,{name:"disabled",label:t("edl.propertyConfig.basicDropdown.disabled"),valuePropName:"checked",children:e.jsx(Qe,{})}),e.jsx(x.Item,{name:"extra",label:t("edl.propertyConfig.basicDropdown.extra"),children:e.jsx(O,{})}),e.jsx(x.Item,{name:"title",label:t("edl.propertyConfig.basicDropdown.title"),children:e.jsx(O,{})}),e.jsx(x.Item,{name:"icon",children:e.jsx(wl,{})})]})})}),Ui=a.memo(({form:l})=>{const n=window.$translation,{selectedElement:t,elementsMap:o,editEvents:r}=window.usePageStore(d=>{var f;const m=d.page[((f=d.selectPageItem)==null?void 0:f.id)||""];return{selectedElement:d.selectedElement,elementsMap:m.elementsMap,editEvents:d.editEvents}}),s=a.useRef(),i=()=>{var f,u;const m=(f=o[t==null?void 0:t.id].events)==null?void 0:f.filter(h=>h.value.indexOf("DropdownAction")===-1);(u=l.getFieldValue("bulkActionList"))==null||u.map(h=>{m.push({name:h.label+n("edl.propertyConfig.event"),value:h.key})}),r({id:t==null?void 0:t.id,events:m})},c=(d,m)=>{typeof d=="string"?l.setFieldValue(["bulkActionList",m,"label"],d):l.setFieldValue(["bulkActionList",m],d);const f=l.getFieldValue(["bulkActionList",m,"key"]),u=o[t==null?void 0:t.id],h=nn.cloneDeep(u.events||[]);h.map(C=>{if(C.value===f){const w=n("edl.eventConfig.title");typeof d=="string"?C.name=d+w:C.name=d.label+w}return C}),r({id:t==null?void 0:t.id,events:h})},p=d=>{d({label:n("edl.propertyConfig.basicDropdown.option"),key:wt("DropdownAction")}),i()},b=(d,m)=>{d(m),i()},g=d=>{var m;(m=s.current)==null||m.open(d)},{run:y}=zo((d,m)=>{c(d,m)},{wait:100});return e.jsxs(e.Fragment,{children:[e.jsx(x.List,{name:["bulkActionList"],children:(d,{add:m,remove:f})=>e.jsxs(e.Fragment,{children:[d.map(({key:u,name:h,...C})=>e.jsxs(Xe,{justify:"space-between",align:"baseline",className:"w-100%",gap:10,children:[e.jsx(x.Item,{...C,name:[h,"label"],className:"w-100% flex-1",children:e.jsx(O,{placeholder:n("common.pleaseInput"),onChange:w=>y(w.target.value,h)})}),e.jsx(x.Item,{name:[h,"key"],hidden:!0,children:e.jsx(O,{})}),e.jsx(Te,{name:"bi",onClick:()=>g(h)}),e.jsx(Te,{name:"jian",onClick:()=>b(f,h)})]},u)),e.jsx("div",{style:{padding:"0 10px 10px"},children:e.jsx(ee,{type:"primary",block:!0,ghost:!0,onClick:()=>p(m),icon:e.jsx(Te,{name:"tianjia"}),children:n("buComp.common.create")})})]})}),e.jsx(Qi,{modalRef:s,update:c})]})}),Q=window.$translation,wd={attrs:[{type:"Title",label:Q("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Variable",label:Q("edl.propertyConfig.basicButton.btnLabel"),name:["text"]},{type:"Select",label:Q("edl.propertyConfig.basicDropdown.trigger"),name:["trigger"],props:{options:[{value:"click",label:Q("edl.propertyConfig.basicDropdown.click")},{value:"hover",label:Q("edl.propertyConfig.basicDropdown.hover")},{value:"contextMenu",label:Q("edl.propertyConfig.basicDropdown.contextMenu")}],mode:"multiple"}},{type:"Switch",label:Q("edl.propertyConfig.basicDropdown.arrow"),name:["arrow"]},{type:"Switch",label:Q("edl.propertyConfig.basicDropdown.autoAdjust"),name:["autoAdjustOverflow"]},{type:"Switch",label:Q("edl.propertyConfig.basicDropdown.autoFocus"),name:["autoFocus"]},{type:"Select",label:Q("edl.propertyConfig.basicDropdown.placement"),name:["placement"],props:{options:[{value:"bottom",label:Q("edl.propertyConfig.basicDropdown.bottom")},{value:"bottomLeft",label:Q("edl.propertyConfig.basicDropdown.bottomLeft")},{value:"bottomRight",label:Q("edl.propertyConfig.basicDropdown.bottomRight")},{value:"top",label:Q("edl.propertyConfig.basicDropdown.top")},{value:"topLeft",label:Q("edl.propertyConfig.basicDropdown.topLeft")},{value:"topRight",label:Q("edl.propertyConfig.basicDropdown.topRight")}]}},{type:"function",render(){return e.jsx(wl,{},"icon-setting")}},{type:"Select",label:Q("edl.propertyConfig.basicDropdown.iconPosition"),name:["iconPosition"],props:{options:[{value:"start",label:Q("edl.propertyConfig.basicDropdown.left")},{value:"end",label:Q("edl.propertyConfig.basicDropdown.right")}]}},{type:"Input",label:Q("edl.propertyConfig.basicDropdown.width"),name:["width"],props:{suffix:"px"}},{type:"Title",label:Q("edl.propertyConfig.basicDropdown.styleConfig"),key:"styleConfig"},{type:"Select",label:Q("edl.propertyConfig.basicDropdown.styleSelect"),name:["dropdownStyle"],props:{options:[{value:"link",label:Q("edl.propertyConfig.basicDropdown.link")},{value:"singleBtn",label:Q("edl.propertyConfig.basicDropdown.singleBtn")},{value:"doubleBtn",label:Q("edl.propertyConfig.basicDropdown.doubleBtn")}]}},{type:"Switch",label:Q("edl.propertyConfig.basicDropdown.danger"),name:["danger"]},{type:"Select",label:Q("edl.propertyConfig.basicDropdown.size"),name:["size"],props:{options:[{value:"large",label:Q("edl.propertyConfig.basicDropdown.large")},{value:"middle",label:Q("edl.propertyConfig.basicDropdown.middle")},{value:"small",label:Q("edl.propertyConfig.basicDropdown.small")}]}},{type:"Select",label:Q("edl.propertyConfig.basicDropdown.type"),name:["type"],props:{options:[{value:"primary",label:"primary"},{value:"dashed",label:"dashed"},{value:"link",label:"link"},{value:"text",label:"text"},{value:"default",label:"default"}]}},{type:"Title",label:Q("edl.propertyConfig.basicDropdown.menuConfig"),key:"menuConfig"},{type:"function",render(l){return e.jsx(Ui,{form:l},"DropdownSetting")}},{type:"Title",label:Q("edl.propertyConfig.basicButton.authVerification"),key:"auth"},{type:"Switch",label:Q("edl.propertyConfig.basicButton.openAuth"),name:"openAuth",props:{placeholder:Q("edl.propertyConfig.basicButton.openAuth")}},{type:"Input",label:Q("edl.propertyConfig.basicButton.authName"),name:["authCode",0,"name"],props:{placeholder:Q("edl.propertyConfig.basicButton.authName"),disabled:!0}},{type:"Input",label:Q("edl.propertyConfig.basicButton.auth"),name:["authCode",0,"code"],props:{placeholder:Q("edl.propertyConfig.basicButton.auth"),disabled:!0}},{type:"Variable",label:Q("edl.propertyConfig.basicButton.thirdVerification"),name:["authScript"],props:{placeholder:Q("edl.propertyConfig.basicButton.scripts")}}],config:{props:{x:0,y:0,visible:!0,arrow:!1,autoAdjustOverflow:!0,autoFocus:!1,placement:"bottomLeft",icon:null,danger:!1,dropdownStyle:"link",type:"default",size:"middle",openAuth:!1,trigger:["hover"],text:Q("edl.component.featureComponent.dropdown"),bulkActionList:[],iconPosition:"start",width:""},style:{width:"120px",height:"32px"},events:[]},events:[{value:"onClickLeftBtn",name:Q("edl.propertyConfig.basicDropdown.clickLeftBtn")}],methods:[{name:"startLoading",title:Q("edl.component.componentSchema.startLoading")},{name:"endLoading",title:Q("edl.component.componentSchema.endLoading")}]},qi=({id:l,type:n,config:t},o)=>{const{props:r}=t,[s,i]=a.useState(r.visible!==void 0?r.visible:!0);a.useImperativeHandle(o,()=>({show(){i(!0)},hide(){i(!1)}}));const{dateFormat:c,weekFormat:p,timeFormat:b,hideSecond:g,rowContent:y,visible:d}=r,{t:m,i18n:{language:f}}=_o(),u=a.useRef(void 0),[h,C]=a.useState(""),[w,S]=a.useState(""),[v,I]=a.useState(""),j=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],k=["sun","mon","tues","wed","thur","fri","sat"],T=["january","february","march","april","may","june","july","august","september","october","november","december"];return a.useEffect(()=>{u.current&&clearInterval(u.current);const A=()=>{const F=new Date,E=F.getFullYear(),D=F.getMonth(),M=F.getDate(),q=F.getDay(),te=F.getHours(),P=F.getMinutes(),J=F.getSeconds();let se="",je="",pe="";switch(c){case"text":f===$t.ZHCN?se=`${E}年${m("edl.propertyConfig.basicDatetime."+T[D])}${M.toString().padStart(2,"0")}日`:se=`${m("edl.propertyConfig.basicDatetime."+T[D])} ${M}, ${E}`;break;case"-":se=`${E}-${(D+1).toString().padStart(2,"0")}-${M.toString().padStart(2,"0")}`;break;case"/":se=`${E}/${(D+1).toString().padStart(2,"0")}/${M.toString().padStart(2,"0")}`;break;case"noDivide":se=`${E}${(D+1).toString().padStart(2,"0")}${M.toString().padStart(2,"0")}`;break;default:se="error";break}switch(p){case"longType":je=m("edl.propertyConfig.basicDatetime."+j[q]);break;case"shortType":je=m("edl.propertyConfig.basicDatetime."+k[q]);break;default:je="error"}switch(b){case"24h":pe=`${te.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}`,g||(pe+=`:${J.toString().padStart(2,"0")}`);break;case"12h":if(te===0&&P===0&&J===0)f===$t.ZHCN?(pe="凌晨 12:00",g||(pe+=":00")):(pe="12:00",g||(pe+=":00"),pe+=" A.M.");else if(te===12&&P===0&&J===0)f===$t.ZHCN?(pe="中午 12:00",g||(pe+=":00")):(pe="12:00",g||(pe+=":00"),pe+=" P.M.");else{let He=`${(te>=12?te-12:te).toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}`;g||(He+=`:${J.toString().padStart(2,"0")}`);const qe=te>=12?"pm":"am";f===$t.ZHCN?pe=`${m("edl.propertyConfig.basicDatetime."+qe)} ${He}`:pe=`${He} ${m("edl.propertyConfig.basicDatetime."+qe)}`}break;default:pe="error";break}C(se),S(je),I(pe)};return u.current=setInterval(A,1e3),A(),()=>{clearInterval(u.current)}},[c,p,b,g]),a.useEffect(()=>{i(d!==void 0?d:!0)},[d]),s&&e.jsx("div",{style:{...t.style},children:y.map((A,F)=>e.jsx(Xe,{gap:"10px",children:A.map((E,D)=>e.jsxs("div",{children:[E==="date"&&h,E==="week"&&w,E==="time"&&v]},F.toString()+D.toString()))},F.toString()+"row"))})},Sd=a.forwardRef(qi),Ji=a.memo(({form:l})=>{const n=window.$translation,t=e.jsx(W,{className:"w-200px!",options:[{label:n("edl.propertyConfig.basicDatetime.date"),value:"date"},{label:n("edl.propertyConfig.basicDatetime.week"),value:"week"},{label:n("edl.propertyConfig.basicDatetime.time"),value:"time"}]}),o=(s,i)=>{s(i)},r=s=>{s("")};return e.jsxs(e.Fragment,{children:[e.jsx(x.Item,{label:n("edl.propertyConfig.basicDatetime.firstRow"),children:e.jsx(x.List,{name:["rowContent",0],children:(s,{add:i,remove:c})=>e.jsxs(e.Fragment,{children:[s.map(({key:p,name:b,...g})=>e.jsxs(xe,{align:"baseline",className:"w-100%",children:[e.jsx(x.Item,{...g,name:[b],children:t}),e.jsx(Te,{name:"jianqu",onClick:()=>o(c,b)})]},p)),e.jsx("div",{style:{padding:"0 10px 10px"},children:e.jsx(ee,{type:"primary",block:!0,ghost:!0,onClick:()=>r(i),icon:e.jsx(Te,{name:"tianjia"}),children:n("buComp.common.create")})})]})})}),e.jsx(x.Item,{label:n("edl.propertyConfig.basicDatetime.secondRow"),children:e.jsx(x.List,{name:["rowContent",1],children:(s,{add:i,remove:c})=>e.jsxs(e.Fragment,{children:[s.map(({key:p,name:b,...g})=>e.jsxs(xe,{align:"baseline",className:"w-100%",children:[e.jsx(x.Item,{...g,name:[b],children:t}),e.jsx(Te,{name:"jianqu",onClick:()=>o(c,b)})]},p)),e.jsx("div",{style:{padding:"0 10px 10px"},children:e.jsx(ee,{type:"primary",block:!0,ghost:!0,onClick:()=>r(i),icon:e.jsx(Te,{name:"tianjia"}),children:n("buComp.common.create")})})]})})}),e.jsx(x.Item,{label:n("edl.propertyConfig.basicDatetime.thirdRow"),children:e.jsx(x.List,{name:["rowContent",2],children:(s,{add:i,remove:c})=>e.jsxs(e.Fragment,{children:[s.map(({key:p,name:b,...g})=>e.jsxs(xe,{align:"baseline",className:"w-100%",children:[e.jsx(x.Item,{...g,name:[b],children:t}),e.jsx(Te,{name:"jianqu",onClick:()=>o(c,b)})]},p)),e.jsx("div",{style:{padding:"0 10px 10px"},children:e.jsx(ee,{type:"primary",block:!0,ghost:!0,onClick:()=>r(i),icon:e.jsx(Te,{name:"tianjia"}),children:n("buComp.common.create")})})]})})})]})}),nt=window.$translation,Id={attrs:[{type:"Title",label:nt("edl.propertyConfig.basicDatetime.formatConfig"),key:"formatConfig"},...$,{type:"Select",label:nt("edl.propertyConfig.basicDatetime.dateFormat"),name:["dateFormat"],props:{options:[{value:"text",label:nt("edl.propertyConfig.basicDatetime.text")},{value:"-",label:nt("edl.propertyConfig.basicDatetime.-Divide")},{value:"/",label:nt("edl.propertyConfig.basicDatetime./Divide")},{value:"noDivide",label:nt("edl.propertyConfig.basicDatetime.noDivide")}]}},{type:"Select",label:nt("edl.propertyConfig.basicDatetime.weekFormat"),name:["weekFormat"],props:{options:[{value:"longType",label:nt("edl.propertyConfig.basicDatetime.longType")},{value:"shortType",label:nt("edl.propertyConfig.basicDatetime.shortType")}]}},{type:"Select",label:nt("edl.propertyConfig.basicDatetime.timeFormat"),name:["timeFormat"],props:{options:[{value:"24h",label:nt("edl.propertyConfig.basicDatetime.24hType")},{value:"12h",label:nt("edl.propertyConfig.basicDatetime.12hType")}]}},{type:"Switch",label:nt("edl.propertyConfig.basicDatetime.hideSecond"),name:["hideSecond"]},{type:"Title",label:nt("edl.propertyConfig.basicDatetime.layoutConfig"),key:"layoutConfig"},{type:"function",render(l){return e.jsx(Ji,{form:l},"LayoutSetting")}}],config:{props:{x:0,y:0,dateFormat:"text",visible:!0,weekFormat:"longType",timeFormat:"24h",hideSecond:!1,rowContent:[["date"],["week"],["time"]]},style:{width:"300px",height:"100px"},events:[]},events:[],methods:[]},Ki=({config:l},n)=>{var g;const{useCommonData:t}=window.CommonFetchData,{setVisible:o,visible:r,data:s}=t(l);a.useImperativeHandle(n,()=>({show(){o(!0)},hide(){o(!1)}}));const{src:i,visible:c,...p}=l.props;a.useEffect(()=>{o(c!==void 0?c:!0)},[c]);const b=a.useMemo(()=>s||i,[s,(g=l.props)==null?void 0:g.src]);return r&&e.jsx(St,{style:l.style,src:b,...p})},jd=a.forwardRef(Ki),Gl=window.$translation,Td={attrs:[{type:"Title",label:"edl.propertyConfig.basicConfig",key:"basic"},...$,{type:"function",label:Gl("edl.propertyConfig.basicImg.imgUrl"),name:"src",render:()=>e.jsx(x.Item,{label:Gl("edl.propertyConfig.basicImg.imgUrl"),name:"src",children:e.jsx(xl,{type:"all"})},"icon")},{type:"Input",label:"edl.propertyConfig.basicImg.imgWidth",name:"width"},{type:"Input",label:"edl.propertyConfig.basicImg.imgHeight",name:"height"},{type:"Switch",label:"edl.propertyConfig.basicImg.isPreview",name:"preview"},{type:"Input",label:"edl.propertyConfig.basicImg.imgAlt",name:"alt"}],config:{props:{src:"",preview:!1,width:"200px",height:"200px",alt:"",x:0,y:0,visible:!0},style:{},api:{source:"",sourceDataType:zt.string,sourceType:"json"}},events:[{value:"handleClick",name:Gl("edl.propertyConfig.clickEvent")}],api:{}},Gi=({id:l,type:n,config:t},o)=>{var m,f;const[r,s]=a.useState(""),i=window.$translation,{useCommonData:c}=window.CommonFetchData,{setVisible:p,visible:b,data:g}=c(t);a.useEffect(()=>{var S,v,I,j;const u=((v=(S=t.props)==null?void 0:S.text)==null?void 0:v.toString())||"",h=(I=t.props)==null?void 0:I.format,C=(j=t.props)==null?void 0:j.script;let w=g||u;if(h==="YYYY-MM-DD HH:mm:ss"?w=at(u).format(h):h==="YYYY-MM-DD"?w=at(u).format(h):h==="HH:mm:ss"?w=at(u).format(h):h==="money"?w=jt(u,"currency"):h==="number"?w=jt(u,"decimal"):h==="percent"&&(w=jt(u,"percent")),C)try{w=new Function("value",`return (${C})(value);`)(w)}catch(k){console.error(`${i("edl.propertyConfig.basicText.parseFail")}`,k),window.$message.error(JSON.stringify(k))}s(w==null?void 0:w.toString())},[t.props.text,(m=t.props)==null?void 0:m.format,(f=t.props)==null?void 0:f.script,g]),a.useImperativeHandle(o,()=>({show(){p(!0)},hide(){p(!1)}}));const{visible:y,...d}=t.props;return a.useEffect(()=>{p(y!==void 0?y:!0)},[y]),b&&e.jsx(Zt.Text,{style:{...t.style,display:"inline-block"},...d,text:void 0,children:r})},kd=a.forwardRef(Gi),Ye=window.$translation,Ad={attrs:[{type:"Title",label:Ye("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Variable",label:Ye("edl.propertyConfig.basicText.text"),name:"text"},{type:"Select",label:Ye("edl.propertyConfig.basicText.textType.title"),name:"type",props:{options:[{value:"",label:Ye("edl.propertyConfig.basicText.textType.default")},{value:"secondary",label:Ye("edl.propertyConfig.basicText.textType.secondary")},{value:"success",label:Ye("edl.propertyConfig.basicText.textType.success")},{value:"warning",label:Ye("edl.propertyConfig.basicText.textType.warning")},{value:"danger",label:Ye("edl.propertyConfig.basicText.textType.danger")}]}},{type:"Select",label:Ye("edl.propertyConfig.basicText.textFormat.title"),name:"format",props:{options:[{value:"",label:Ye("edl.propertyConfig.basicText.textFormat.default")},{value:"YYYY-MM-DD HH:mm:ss",label:Ye("edl.propertyConfig.basicText.textFormat.YYYYMMDDHHmmss")},{value:"YYYY-MM-DD",label:Ye("edl.propertyConfig.basicText.textFormat.YYYYMMDD")},{value:"HH:mm:ss",label:Ye("edl.propertyConfig.basicText.textFormat.HHmmss")},{value:"money",label:Ye("edl.propertyConfig.basicText.textFormat.money")},{value:"number",label:Ye("edl.propertyConfig.basicText.textFormat.number")},{value:"percent",label:Ye("edl.propertyConfig.basicText.textFormat.percent")}]}},{type:"Title",label:"edl.propertyConfig.basicText.textFormatConfig",key:"format_config"},{type:"Switch",label:"edl.propertyConfig.basicText.textCode",name:"code"},{type:"Switch",label:"edl.propertyConfig.basicText.textDelete",name:"delete"},{type:"Switch",label:"edl.propertyConfig.basicText.textDisabled",name:"disabled"},{type:"Switch",label:"edl.propertyConfig.basicText.textCopyable",name:"copyable"},{type:"Switch",label:"edl.propertyConfig.basicText.textMark",name:"mark"},{type:"Switch",label:"edl.propertyConfig.basicText.textStrong",name:"strong"},{type:"Switch",label:"edl.propertyConfig.basicText.textItalic",name:"italic"},{type:"Switch",label:"edl.propertyConfig.basicText.textUnderline",name:"underline"}],config:{props:{text:Ye("edl.component.welcome"),type:"",x:0,y:0,visible:!0},style:{},events:[],api:{source:"",sourceType:"json",sourceDataType:"string",fields:[{name:"value",type:"string",desc:"组件显示值"}]},source:""},events:[{value:"handleClick",name:Ye("edl.propertyConfig.clickEvent")}],api:{}},Zi=({id:l,type:n,config:t},o)=>{const{props:r}=t,[s,i]=a.useState(r.visible!==void 0?r.visible:!0);return a.useImperativeHandle(o,()=>({show(){i(!0)},hide(){i(!1)}})),a.useEffect(()=>{i(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),s&&e.jsx(Zt.Title,{style:t.style,...t.props,text:void 0,children:t.props.text})},Fd=a.forwardRef(Zi),Jt=window.$translation,Ed={attrs:[{type:"Title",label:"edl.propertyConfig.basicConfig",key:"basic"},...$,{type:"TextArea",label:"标题内容",name:"text"},{type:"Select",label:"重要程度",name:"level",props:{options:[{value:1,label:"H1"},{value:2,label:"H2"},{value:3,label:"H3"},{value:4,label:"H4"},{value:5,label:"H5"}]}},{type:"Select",label:"文本类型",name:"type",props:{options:[{value:"",label:Jt("common.default")},{value:"secondary",label:Jt("edl.propertyConfig.basicText.textType.secondary")},{value:"success",label:Jt("edl.propertyConfig.basicText.textType.success")},{value:"warning",label:Jt("edl.propertyConfig.basicText.textType.warning")},{value:"danger",label:Jt("edl.propertyConfig.basicText.textType.danger")}]}},{type:"Switch",label:"代码格式",name:"code"},{type:"Switch",label:"删除线",name:"delete"},{type:"Switch",label:"禁用文本",name:"disabled"},{type:"Switch",label:"是否可复制",name:"copyable"},{type:"Switch",label:"标记格式",name:"mark"},{type:"Switch",label:"是否加粗",name:"strong"},{type:"Switch",label:"是否斜体",name:"italic"},{type:"Switch",label:"下划线",name:"underline"}],config:{props:{text:"欢迎使用micro-apps低代码系统",type:"",level:1,x:0,y:0,visible:!0},style:{},events:[],api:{},source:""},events:[{value:"handleClick",name:Jt("edl.propertyConfig.clickEvent")}],api:{}},_i=({id:l,type:n,config:t},o)=>{const{props:r}=t,[s,i]=a.useState(r.visible!==void 0?r.visible:!0);a.useImperativeHandle(o,()=>({show(){i(!0)},hide(){i(!1)}}));const{visible:c,...p}=r;return a.useEffect(()=>{i(c!==void 0?c:!0)},[c]),s&&e.jsx("a",{style:t.style,...p,children:t.props.text})},Dd=a.forwardRef(_i),Xi=window.$translation,Nd={attrs:[{type:"Title",label:"edl.propertyConfig.basicConfig",key:"basic"},...$,{type:"TextArea",label:"edl.propertyConfig.basicLink.text",name:"text"},{type:"Input",label:"edl.propertyConfig.basicLink.linkUrl",name:"href"},{type:"Select",label:"edl.propertyConfig.basicLink.linkTarget.title",name:"target",props:{options:[{value:"_self",label:"edl.propertyConfig.basicLink.linkTarget.self"},{value:"_blank",label:"edl.propertyConfig.basicLink.linkTarget.blank"},{value:"_parent",label:"edl.propertyConfig.basicLink.linkTarget.parent"},{value:"_top",label:"edl.propertyConfig.basicLink.linkTarget.top"}]}}],config:{props:{text:"打开micro-apps系统",href:"http://www.micro-apps.cc",target:"_blank",x:0,y:0,visible:!0},style:{},events:[],api:{},source:""},events:[{value:"handleClick",name:Xi("edl.propertyConfig.clickEvent")}],api:{}},ep=({config:l,onHandleChange:n},t)=>{const{props:o}=l,{dataProps:r,visible:s,optionType:i,bigScreen:c,formItem:p,buttonStyle:b,...g}=o,[y,d]=a.useState(s!==void 0?s:!0),{data:m}=Ie(l),[f,u]=a.useState(o==null?void 0:o.defaultValue);a.useImperativeHandle(t,()=>({show(){d(!0)},hide(){d(!1)}}));const h=S=>{n&&n({[p.name]:S.target.value})};a.useEffect(()=>{d(s!==void 0?s:!0)},[s]);const C=a.useMemo(()=>Array.isArray(m)?m.map(S=>r?{label:S[r.label],value:S[r.value]}:S):[],[m]),w=S=>{u(S),n&&n({[p.name]:S})};if(y){const S=v=>{w(v)};return c?e.jsx(Xt,{theme:{token:{controlPaddingHorizontal:13,colorBorder:"transparent",lineWidth:0},components:{Segmented:{trackBg:"#26344C",trackPadding:"0px",itemSelectedBg:"#004DDC"}}},children:e.jsx(Go,{style:l.style,...g,onChange:S,value:f,options:C})}):e.jsx(he.Group,{block:!0,onChange:h,style:l.style,...g,buttonStyle:b,optionType:i,options:m})}return null},Pd=a.forwardRef(ep),De=window.$translation,$d={attrs:[{type:"Title",label:De("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Switch",label:De("edl.propertyConfig.basicCard.bigscreen"),name:["bigScreen"]},{type:"Input",label:De("edl.component.componentSchema.field"),name:["formItem","name"]},{type:"Select",label:De("edl.propertyConfig.basicButton.btnStyle"),name:"buttonStyle",props:{options:[{label:"solid",value:"solid"},{label:"outline",value:"outline"}]}},{type:"Input",label:De("edl.propertyConfig.basicOptions.defaultSelect"),name:"defaultValue"},{type:"Select",label:De("edl.propertyConfig.basicOptions.optionType"),name:"optionType",props:{options:[{label:De("common.default"),value:"default"},{label:De("edl.component.featureComponent.btn"),value:"button"}]}},{type:"Select",label:De("common.size"),name:"size",props:{options:[{label:De("edl.propertyConfig.basicForm.large"),value:"large"},{label:De("edl.propertyConfig.basicForm.medium"),value:"middle"},{label:De("edl.propertyConfig.basicForm.small"),value:"small"}]}},{type:"Switch",label:De("edl.propertyConfig.basicOptions.fullWithParent"),name:"block"},{type:"Collapse",label:De("edl.component.componentSchema.field",{addSpaceAfterEn:!0})+De("common.setting"),key:"fieldSet",props:{items:[{type:"Input",label:De("edl.component.componentSchema.nameFieldSet"),name:["dataProps","label"]},{type:"Input",label:De("edl.component.componentSchema.valueFieldSet"),name:["dataProps","value"]}]}}],config:{props:{bigScreen:!1,block:!0,optionType:"button",buttonStyle:"solid",size:"middle",defaultValue:"D",x:0,y:0,visible:!0,formItem:{name:"dateType"},dataProps:{label:"label",value:"value"}},style:{},events:[],api:{source:[{label:De("edl.propertyConfig.basicDate.date"),value:"D"},{label:De("edl.propertyConfig.basicDate.month"),value:"M"},{label:De("edl.propertyConfig.basicDate.Y"),value:"Y"}],sourceType:"json",sourceDataType:"array"},source:""},events:[{value:"onHandleChange",name:De("edl.propertyConfig.basicOptions.toggleEvent")}],api:{}},tp=a.forwardRef(({id:l,type:n,config:t,elements:o,onLoad:r,onOk:s,onCancel:i},c)=>{const{props:p}=t,{visible:b,...g}=p,[y,d]=a.useState(b!==void 0?b:!1),[m,f]=a.useState(t.props.confirmLoading||!1),[u,h]=a.useState(!1),{mode:C}=window.usePageStore(T=>({addChildElements:T.addChildElements,mode:T.mode})),w=window.$translation,S=Ze(l);a.useEffect(()=>{d(b)},[b]),a.useImperativeHandle(c,()=>({close:()=>{d(!1)},open:()=>new Promise(T=>{d(()=>(T(!0),!0))}),showConfirmLoading:()=>{f(!0)},hideConfirmLoading:()=>{f(!1)},showLoading:()=>{h(!0)},hideLoading:()=>{h(!1)}}),[]),a.useEffect(()=>{var F;y&&(r==null||r());const T=(F=document.querySelector("#page"))==null?void 0:F.getBoundingClientRect(),A=document.querySelector(`[data-id="${l}Modal"]`);A&&(A.style.height=(T==null?void 0:T.height)+"px")},[y]);const v=()=>{s==null||s()},I=()=>{i==null||i(),d(!1)},j=document.querySelector(`[data-id="${l}Modal"]`);y&&j?j.style.display="":j&&(j.style.display="none");const k=window.AppsRender;return e.jsxs(e.Fragment,{children:[C==="edit"&&e.jsx(ee,{onClick:()=>d(!0),children:t.props.title}),e.jsx(Ot,{...g,"data-id":`${l}Modal`,open:y,footer:t.props.footer?void 0:null,getContainer:!1,onOk:v,maskClosable:!1,onCancel:I,width:t.props.width||void 0,confirmLoading:m,style:{...t.style},children:e.jsx("div",{ref:S,children:e.jsx(pt,{spinning:u,children:o!=null&&o.length?e.jsx(k,{elements:o}):e.jsx("div",{className:"slots",style:{lineHeight:"150px"},children:w("edl.component.containerComponent.dragDesc")})})})})]})}),Md=a.memo(tp),Zl=window.$translation,Vd={attrs:[{type:"Title",label:Zl("edl.propertyConfig.basicConfig"),key:"modal-basic"},{type:"Variable",label:Zl("common.title"),name:"title"},{type:"InputNumber",label:"弹框宽度",name:"width"},{type:"Switch",label:"显示关闭",name:"closable"},{type:"Switch",label:"Footer",name:"footer"},{type:"Input",label:"确认文本",name:"okText"},{type:"Input",label:"取消文本",name:"cancelText"},{type:"Switch",label:"关闭后销毁",name:"destroyOnClose"},{type:"Switch",label:"确认Loading",name:"confirmLoading"}],config:{props:{x:0,y:0,title:"弹框",closable:!0,footer:!0,open:!0,okText:"确定",cancelText:"取消",destroyOnClose:!1,confirmLoading:!1},style:{}},events:[{value:"onLoad",name:Zl("edl.eventConfig.initEvent")},{value:"onOk",name:"确认事件"},{value:"onCancel",name:"取消事件"}],methods:[{name:"open",title:"打开弹框"},{name:"close",title:"关闭弹框"},{name:"showConfirmLoading",title:"确认Loading"},{name:"hideConfirmLoading",title:"隐藏确认Loading"},{name:"showLoading",title:"显示加载Loading"},{name:"hideLoading",title:"隐藏加载Loading"}]},lp=({config:l},n)=>{var p,b,g,y;const{props:t}=l,[o,r]=a.useState(t.visible!==void 0?t.visible:!0);a.useImperativeHandle(n,()=>({show(){r(!0)},hide(){r(!1)}}));let s=(p=l.props)==null?void 0:p.image;((b=l.props)==null?void 0:b.image)==="simple"?s=Ol.PRESENTED_IMAGE_SIMPLE:((g=l.props)==null?void 0:g.image)==="default"?s=Ol.PRESENTED_IMAGE_DEFAULT:s=(y=l.props)==null?void 0:y.image;const{visible:i,...c}=l.props;return a.useEffect(()=>{r(i!==void 0?i:!0)},[i]),o&&e.jsx(Ol,{style:l.style,...c,image:s})},Rd=a.forwardRef(lp),xt=window.$translation,Wd={attrs:[{type:"Title",label:xt("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Input",label:xt("edl.propertyConfig.basicEmpty.desc"),name:["description"]},{type:"InputSelect",label:xt("edl.component.dataShowComponent.image"),name:["image"],tooltip:xt("edl.propertyConfig.basicEmpty.imgTips"),props:{options:[{value:"simple",label:xt("edl.propertyConfig.basicEmpty.simple")},{value:"default",label:xt("common.default")}]}},{type:"InputNumber",label:xt("edl.propertyConfig.basicImg.imgWidth"),name:["imageStyle","width"],props:{placeholder:xt("common.pleaseInput")}},{type:"InputNumber",label:xt("edl.propertyConfig.basicImg.imgHeight"),name:["imageStyle","height"],props:{placeholder:xt("common.pleaseInput")}}],config:{props:{x:0,y:0,description:xt("edl.propertyConfig.basicEmpty.noData"),image:"default",visible:!0},style:{},events:[]},events:[],methods:[]},op=a.forwardRef(({id:l,type:n,config:t,elements:o,onClose:r,onAfterOpenChange:s},i)=>{const{props:c}=t,{visible:p,...b}=c,[g,y]=a.useState(p!==void 0?p:!1),[d,m]=a.useState(!1),f=window.$translation,u=Ze(l);a.useEffect(()=>{y(p)},[p]),a.useImperativeHandle(i,()=>({close:()=>{y(!1)},open:()=>new Promise(j=>{y(()=>(j(!0),!0))}),showLoading:()=>{m(!0)},hideLoading:()=>{m(!1)}}));const h=j=>{s==null||s(j)},C=()=>{y(!1),r==null||r()},w=j=>{const k=t.events.find(T=>T.eventName===j);gt(k==null?void 0:k.actions,{})},S=t.props.bulkActionList||[],v=Rt,I=window.AppsRender;return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(ee,{onClick:()=>y(!0),children:t.props.title})}),e.jsx(rn,{...b,open:g,footer:t.props.footer?void 0:null,getContainer:!1,afterOpenChange:j=>h(j),onClose:C,style:{...t.style},zIndex:998,extra:e.jsx("div",{style:{display:"flex",gap:10},children:S.map(j=>e.jsx(ee,{type:j.type,danger:j.danger,icon:j.icon?Vt.createElement(v[j.icon]):null,onClick:()=>w(j.eventName),children:j.text},j.eventName))}),children:e.jsx("div",{ref:u,children:e.jsx(pt,{spinning:d,children:o!=null&&o.length?e.jsx(I,{elements:o||[]}):e.jsx("div",{className:"slots",style:{lineHeight:"100px"},children:f("edl.component.containerComponent.dragDesc")})})})})]})}),Bd=a.memo(op),Kt=window.$translation,Ld={attrs:[{type:"Title",label:"右上角操作栏"},{type:"function",render(l){return e.jsx(vl,{form:l},"ActionSetting")}},{type:"Title",label:Kt("edl.propertyConfig.basicConfig"),key:"basic"},{type:"Variable",label:Kt("common.title"),name:["title"]},{type:"Select",label:"抽屉方向",name:["placement"],props:{options:[{label:Kt("edl.propertyConfig.basicCard.modules.top"),value:"top"},{label:Kt("edl.propertyConfig.basicCard.modules.right"),value:"right"},{label:Kt("edl.propertyConfig.basicCard.modules.bottom"),value:"bottom"},{label:Kt("edl.propertyConfig.basicCard.modules.left"),value:"left"}]}},{type:"Input",label:"高度",name:["height"]},{type:"Input",label:"宽度",name:["width"]},{type:"Switch",label:"销毁关闭",name:["destroyOnClose"]},{type:"Switch",label:"键盘ESC关闭",name:["keyboard"]},{type:"Switch",label:"遮罩",name:["mask"]},{type:"Switch",label:"点击遮罩关闭",name:["maskClosable"]}],config:{props:{x:0,y:0,title:"抽屉",destroyOnClose:!0,height:"40%",width:"30%",keyboard:!0,mask:!0,maskClosable:!0,placement:"right"},style:{}},events:[{value:"onClose",name:"关闭抽屉事件"},{value:"onAfterOpenChange",name:"切换抽屉结束事件"}],methods:[{name:"show",title:"打开抽屉"},{name:"hide",title:"关闭抽屉"},{name:"showLoading",title:"显示加载Loading"},{name:"hideLoading",title:"隐藏加载Loading"}]},ap=({config:l},n)=>{const{props:t}=l,[o,r]=a.useState(t.visible!==void 0?t.visible:!0);a.useImperativeHandle(n,()=>({show(){r(!0)},hide(){r(!1)}}));const s=Rt,i=l.props.bulkActionList||[],c=g=>{const y=l.events.find(d=>d.eventName===g);gt(y==null?void 0:y.actions,{})},{visible:p,...b}=l.props;return a.useEffect(()=>{r(p!==void 0?p:!0)},[p]),o&&e.jsx(sn,{style:l.style,...b,icon:l.props.icon?Vt.createElement(s[l.props.icon]):void 0,extra:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:10},children:i.map(g=>e.jsx(ee,{type:g.type,danger:g.danger,icon:g.icon?Vt.createElement(s[g.icon]):null,onClick:()=>c(g.eventName),children:g.text},g.eventName))})})},Hd=a.forwardRef(ap),Ft=window.$translation,zd={attrs:[{type:"Title",label:Ft("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"Variable",label:Ft("common.title"),name:["title"],props:{placeholder:Ft("common.pleaseInput")}},{type:"Variable",label:Ft("common.subTitle"),name:["subTitle"],props:{placeholder:Ft("common.pleaseInput")}},{type:"Select",label:Ft("common.status"),name:["status"],props:{options:[{value:"success",label:"success"},{value:"error",label:"error"},{value:"info",label:"info"},{value:"warning",label:"warning"},{value:"404",label:"404"},{value:"403",label:"403"},{value:"500",label:"500"}]}},{type:"Icons",label:Ft("edl.propertyConfig.basicResult.icon"),name:["icon"],props:{placeholder:Ft("common.pleaseSelect")}},{type:"Title",label:Ft("edl.propertyConfig.basicResult.btnAction")},{type:"function",render(l){return e.jsx(vl,{form:l},"ActionSetting")}}],config:{props:{x:0,y:0,status:"info",visible:!0,title:"Your operation has been executed"},style:{},events:[]},events:[],methods:[]},np=({id:l,type:n,config:t},o)=>{const{setVisible:r,visible:s,getDataList:i,data:c}=Ie(t);a.useImperativeHandle(o,()=>({show(){r(!0)},hide(){r(!1)},update:f=>{i(f)}}));const[p,b]=a.useState([]),[g,y]=a.useState({}),[d,m]=a.useState({});return a.useImperativeHandle(o,()=>({show(){r(!0)},hide(){r(!1)}})),a.useEffect(()=>{const{imgUrls:f,objectFit:u,objectPosition:h,...C}=t.props;try{Array.isArray(c)&&c.every(w=>typeof w=="string")?b(c):b(f)}catch{b([f])}y(C),m({objectFit:u,objectPosition:h})},[t.props,c]),a.useEffect(()=>{r(t.props.visible!==void 0?t.props.visible:!0)},[t.props.visible]),s&&e.jsx("div",{className:"m-carousel",children:e.jsx(Oo,{style:t.style,...g,children:p.map((f,u)=>e.jsx("div",{className:"w-100% h-100%",children:e.jsx("img",{className:"w-100% h-100%",style:d,src:f,onError:h=>{h.target.onerror=null,h.target.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="}})},f+u))})})},Yd=a.forwardRef(np),rp=a.memo(()=>{const l=window.$translation,n=!!a.useContext(co);return e.jsx(x.Item,{label:l("edl.propertyConfig.basicCarousel.imgUrl"),children:e.jsx(x.List,{name:"imgUrls",children:(t,{add:o,remove:r})=>e.jsx(xe,{direction:"vertical",style:{width:"100%"},children:t.map(({key:s,name:i,...c})=>e.jsxs(xe,{style:{width:"100%"},children:[e.jsx("div",{style:{width:"220px"},children:e.jsx(x.Item,{noStyle:!0,...c,name:[i],children:e.jsx(xl,{type:"image"})})}),!n&&e.jsxs(e.Fragment,{children:[e.jsx(st,{onClick:()=>o("",i+1)}),i>0&&e.jsx(Wt,{onClick:()=>r(i)})]})]},s))})})})}),sp=({value:l,onChange:n})=>{const t=window.$translation,[o,r]=a.useState(l?Math.round(l/1e3):0),[s,i]=a.useState(1e3),c=b=>{b?(r(b),n==null||n(b*s)):(r(0),n==null||n(0))},p=b=>{i(b),n==null||n(b*o)};return e.jsxs(xe,{children:[e.jsx(It,{value:o,onChange:c}),e.jsx(W,{value:s,onChange:p,options:[{value:1e3,label:t("edl.propertyConfig.basicCarousel.second")},{value:1e3*60,label:t("edl.propertyConfig.basicCarousel.minute")},{value:1e3*60*60,label:t("edl.propertyConfig.basicCarousel.hour")}]})]})},ip=()=>{const l=window.$translation;return e.jsx(x.Item,{name:"autoplaySpeed",label:l("edl.propertyConfig.basicCarousel.autoplaySpeed"),children:e.jsx(sp,{})})},pp=a.memo(ip),rt=window.$translation,Od={attrs:[{type:"Title",label:"edl.propertyConfig.basicCarousel.content",key:"content"},...$,{type:"function",render:()=>e.jsx(rp,{},"carousel-setting")},{type:"Select",label:"edl.propertyConfig.basicCarousel.objectFit",name:"objectFit",props:{options:[{label:rt("edl.propertyConfig.basicCarousel.fill"),value:"fill"},{label:rt("edl.propertyConfig.basicCarousel.contain"),value:"contain"},{label:rt("edl.propertyConfig.basicCarousel.cover"),value:"cover"},{label:rt("edl.propertyConfig.basicCarousel.none"),value:"none"},{label:rt("edl.propertyConfig.basicCarousel.scaleDown"),value:"scale-down"}]}},{type:"Select",label:"edl.propertyConfig.basicCarousel.objectPosition",name:"objectPosition",props:{options:[{label:rt("edl.propertyConfig.basicCarousel.center"),value:"center"},{label:rt("edl.propertyConfig.basicCarousel.toLeft"),value:"left"},{label:rt("edl.propertyConfig.basicCarousel.toRight"),value:"right"},{label:rt("edl.propertyConfig.basicCarousel.toTop"),value:"top"},{label:rt("edl.propertyConfig.basicCarousel.toBottom"),value:"bottom"}]}},{type:"Title",label:"edl.propertyConfig.basicConfig",key:"basic"},{type:"Switch",label:"edl.propertyConfig.basicCarousel.showArrow",name:"arrows"},{type:"Switch",label:"edl.propertyConfig.basicCarousel.autoplay",name:"autoplay"},{type:"function",render:()=>e.jsx(pp,{},"timer-setting")},{type:"Switch",label:"edl.propertyConfig.basicCarousel.adaptiveHeight",name:"adaptiveHeight"},{type:"Switch",label:"edl.propertyConfig.basicCarousel.showDot",name:"dots"},{type:"Select",label:"edl.propertyConfig.basicCarousel.dotPosition",name:"dotPosition",props:{options:[{label:rt("edl.propertyConfig.basicCarousel.top"),value:"top"},{label:rt("edl.propertyConfig.basicCarousel.bottom"),value:"bottom"},{label:rt("edl.propertyConfig.basicCarousel.left"),value:"left"},{label:rt("edl.propertyConfig.basicCarousel.right"),value:"right"}]}},{type:"Switch",label:"edl.propertyConfig.basicCarousel.draggable",name:"draggable"},{type:"Title",label:"edl.propertyConfig.basicCarousel.animationConfig",key:"animationConfig"},{type:"Switch",label:"edl.propertyConfig.basicCarousel.fade",name:"fade"},{type:"Switch",label:"edl.propertyConfig.basicCarousel.infinite",name:"infinite"},{type:"InputNumber",label:"edl.propertyConfig.basicCarousel.speed",name:"speed"},{type:"Select",label:"edl.propertyConfig.basicCarousel.easing",name:"easing",props:{options:[{label:"linear",value:"linear"},{label:"ease-in",value:"ease-in"},{label:"ease-out",value:"ease-out"},{label:"ease-in-out",value:"ease-in-out"}]}},{type:"Select",label:"edl.propertyConfig.basicCarousel.effect",name:"effect",props:{options:[{label:"scrollx",value:"scrollx"},{label:"fade",value:"fade"}]}},{type:"Switch",label:"edl.propertyConfig.basicCarousel.waitForAnimate",name:"waitForAnimate"}],config:{props:{x:0,y:0,visible:!0,imgUrls:[""],arrows:!1,autoplay:!1,autoplaySpeed:3e3,adaptiveHeight:!1,dots:!0,dotPosition:"bottom",draggable:!1,fade:!1,infinite:!0,speed:500,easing:"linear",effect:"scrollx",waitForAnimate:!1,objectFit:"fill",objectPosition:"center"},style:{width:"200px",height:"200px"},events:[],api:{sourceType:"json",source:""},source:""},events:[]},cp=({id:l,type:n,config:t},o)=>{const{props:r}=t,[s,i]=a.useState(r.visible!==void 0?r.visible:!0);a.useImperativeHandle(o,()=>({show(){i(!0)},hide(){i(!1)}}));const{visible:c,...p}=r;return a.useEffect(()=>{i(c!==void 0?c:!0)},[c]),s&&e.jsx("iframe",{style:t.style,...p,sandbox:""})},Qd=a.forwardRef(cp),Eo=window.$translation,Ud={attrs:[{type:"Title",label:Eo("edl.propertyConfig.basicConfig"),key:"basic"},...$,{type:"TextArea",label:"远程地址",name:"src"},{type:"Input",label:"显示标题",name:"title"}],config:{props:{x:0,y:0,src:"https://juejin.cn/",title:"IFrame组件",visible:!0},style:{border:"5px solid #7d33ff",width:"100%",height:"600px"},events:[],api:{},source:""},events:[{value:"handleClick",name:Eo("edl.propertyConfig.clickEvent")}],api:{}};export{Sp as $,yp as A,qc as B,kp as C,Xp as D,Sd as E,Id as F,sd as G,id as H,Fp as I,Ep as J,Bc as K,Lc as L,Bd as M,Ld as N,xd as O,wd as P,Dc as Q,Nc as R,Jc as S,bp as T,fp as U,Rd as V,Wd as W,ud as X,bd as Y,Pd as Z,$d as _,So as a,hp as a$,Ip as a0,jp as a1,Tp as a2,uc as a3,bc as a4,Fc as a5,Ec as a6,Hp as a7,zp as a8,Qd as a9,zc as aA,Xc as aB,ed as aC,oc as aD,ac as aE,Hd as aF,zd as aG,td as aH,ld as aI,Mc as aJ,Vc as aK,xp as aL,wp as aM,xc as aN,wc as aO,nc as aP,rc as aQ,jc as aR,Tc as aS,Pc as aT,$c as aU,dc as aV,mc as aW,Cd as aX,vd as aY,pd as aZ,cd as a_,Ud as aa,jd as ab,Td as ac,Yp as ad,Op as ae,qp as af,Jp as ag,Kp as ah,Gp as ai,Qp as aj,Up as ak,Yc as al,Oc as am,Dd as an,Nd as ao,od as ap,ad as aq,nd as ar,rd as as,Pp as at,$p as au,Cp as av,vp as aw,Md as ax,Vd as ay,Hc as az,Rp as b,sc as b0,ic as b1,hd as b2,gd as b3,fd as b4,yd as b5,kd as b6,Zp as b7,_p as b8,Ad as b9,hc as ba,gc as bb,Cc as bc,vc as bd,Zc as be,_c as bf,Kc as bg,Gc as bh,Fd as bi,Ed as bj,Mp as bk,Vp as bl,kc as bm,Ac as bn,pc as bo,cc as bp,Qn as bq,Yn as br,Wp as c,Bp as d,Lp as e,gp as f,dd as g,gt as h,md as i,Ap as j,Yd as k,Od as l,Sc as m,Ic as n,fc as o,yc as p,Rc as q,Wc as r,Qc as s,Uc as t,sa as u,Dp as v,Np as w,ec as x,tc as y,lc as z};
